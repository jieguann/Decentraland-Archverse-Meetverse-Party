"use strict";const getGlobalThis=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==this)return this;throw new Error("Unable to locate global `this`")},globalObject=getGlobalThis();var loader;!function(x){let A=0,E=[],R=[];const O={baseUrl:""},V={};function d(x,E,R){let O=null,z={},U=null;"function"==typeof x?z=x:"string"==typeof x?(O=x,"function"==typeof E?z=E:E instanceof Array&&(U=E,z=R)):x instanceof Array&&(U=x,"function"==typeof E&&(z=E)),U=U||["require","exports","module"],null===O&&(O="unnamed-module-"+A++),O=g(O),U=(U||[]).map((x=>function(x,A){return x?b(A,x):A}(O,x))),V[O]||(V[O]={name:O,parent:null,dclamd:1,dependencies:U,handlers:[],exports:{},dependants:new Set}),V[O].dependencies=U,p(U,(function(x){const A=V[O];if(!A)throw new Error("Could not access registered module "+O);let E=A.exports;E="function"==typeof z?z.apply(globalObject,x)||E:z,A.exports=E,u(O)}),(x=>{if("function"!=typeof onerror)throw x;onerror(x)}),O)}function u(x){const A=V[x];if(!A)throw new Error("Could not access registered module "+x);A.dclamd=2;let E=A.handlers;if(E&&E.length)for(let A=0;A<E.length;A++)E[A](V[x])}function c(x,A,E){if(!V[x])return null;if(x==A||50==E)return[x];const R=V[x].dependencies;for(let O=0,V=R.length;O<V;O++){let V=c(R[O],A,E+1);if(null!==V)return V.push(x),V}return null}function a(x,A){let E=V[x];if(!E)return!1;let R={};for(let x in V)R[x]=!1;let O=[];for(O.push(E),R[x]=!0;O.length>0;){let x=O.shift().dependencies;if(x)for(let E=0,z=x.length;E<z;E++){let z=x[E];if(z===A)return!0;let U=V[z];U&&!R[z]&&(R[z]=!0,O.push(U))}}return!1}function p(x,A,E,O){let z=new Array(x.length).fill(null),U=0,Q=!1;if("string"==typeof x){if(V[x]){if(1===V[x].dclamd)throw new Error(`Trying to load ${x} from ${O}. The first module is still loading.`);return V[x]}throw new Error(x+" has not been defined. Please include it as a dependency in "+O+"'s define()")}const W=x.length;for(let H=0;H<W;H++)switch(x[H]){case"require":let h=function(x,A,E){return p(x,A,E,O)};h.toUrl=function(x){return b(x,O)},z[H]=h,U++;break;case"exports":if(!V[O])throw new Error("Parent module "+O+" not registered yet");z[H]=V[O].exports,U++;break;case"module":z[H]={id:O,uri:b(O)},U++;break;default:{const $=x[H],m=()=>{z[H]=V[$].exports,U++,U===W&&A&&(Q=!0,A(z))};if(a($,O)){const x=c($,O,0);x&&(x.reverse(),x.push($),R.push(x)),w($,(()=>{}),E,O),m()}else w($,m,E,O);break}}!Q&&U===W&&A&&A(z)}function h(x,A){return function(){return dcl.callRpc(x,A.name,E.slice.call(arguments,0))}}function w(x,A,E,R){if(V[x])return V[x].dependants.add(R),void(1===V[x].dclamd?A&&V[x].handlers.push(A):A&&A(V[x]));if(V[x]={name:x,parent:R,dclamd:1,handlers:[A],dependencies:[],dependants:new Set([R]),exports:{}},0===x.indexOf("@")){let A=V[x].exports;if("function"!=typeof dcl.loadModule)throw new Error("Asynchronous modules will not work because loadModule function is not present");dcl.loadModule(x,A).then((E=>{for(let x in E.methods){const R=E.methods[x];A[R.name]=h(E.rpcHandle,R)}u(x)})).catch((x=>{E(x)}))}}function g(x){let A,E=x;for(A=/\/\.\//;A.test(E);)E=E.replace(A,"/");for(E=E.replace(/^\.\//g,""),A=/\/(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//;A.test(E);)E=E.replace(A,"/");return E=E.replace(/^(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//,""),E=E.replace(/^\//g,""),E}function b(x,A){switch(x){case"require":case"exports":case"module":return x}return A?function(x,A){let E=x;if(!E.startsWith("@")&&(E.startsWith("./")||E.startsWith("../"))){const x=A.split("/");x.pop(),E=g(x.join("/")+"/"+E)}return E}(x,A):g(x)}x.config=function(x){if("object"==typeof x)for(let A in x)x.hasOwnProperty(A)&&(O[A]=x[A])},x.define=d,function(x){x.amd={},x.modules=V}(d=x.define||(x.define={})),x.require=p,"undefined"!=typeof dcl&&dcl.onStart((()=>{const x=new Set,A=[];for(let E in V)V[E]&&(1===V[E].dclamd&&A.push(V[E]),V[E].dependencies.forEach((A=>{"require"!=A&&"exports"!=A&&"module"!=A&&(V[A]||x.add(A))})));const E=[];if(R.length&&E.push(`\n> Cyclic dependencies: ${R.map((x=>"\n  - "+x.join(" -> "))).join("")}`),x.size&&E.push(`\n> Undeclared/unknown modules: ${Array.from(x).map((x=>"\n  - "+x)).join("")}`),A.length&&E.push(`\n> These modules didn't load: ${A.map((x=>"\n  - "+x.name)).join("")}.\n`),E.length)throw new Error(E.join("\n"))})),p.toUrl=b}(loader||(loader={})),globalObject.define=loader.define,globalObject.dclamd=loader,function(x){var A=function(){function t(){}return t.AVATAR={getEntityRepresentation:function(x){return x.avatarEntity}},t.FIRST_PERSON_CAMERA={getEntityRepresentation:function(x){return x.firstPersonCameraEntity}},t}(),n=function(x,A){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,A){x.__proto__=A}||function(x,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(x[E]=A[E])})(x,A)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o(x,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function o(){this.constructor=x}n(x,A),x.prototype=null===A?Object.create(A):(o.prototype=A.prototype,new o)}var i=function(){return(i=Object.assign||function(x){for(var A,E=1,R=arguments.length;E<R;E++)for(var O in A=arguments[E])Object.prototype.hasOwnProperty.call(A,O)&&(x[O]=A[O]);return x}).apply(this,arguments)};function r(x,A,E,R){var O,V=arguments.length,z=V<3?A:null===R?R=Object.getOwnPropertyDescriptor(A,E):R;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(x,A,E,R);else for(var U=x.length-1;U>=0;U--)(O=x[U])&&(z=(V<3?O(z):V>3?O(A,E,z):O(A,E))||z);return V>3&&z&&Object.defineProperty(A,E,z),z}function u(x){var A="function"==typeof Symbol&&Symbol.iterator,E=A&&x[A],R=0;if(E)return E.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&R>=x.length&&(x=void 0),{value:x&&x[R++],done:!x}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(x,A){var E="function"==typeof Symbol&&x[Symbol.iterator];if(!E)return x;var R,O,V=E.call(x),z=[];try{for(;(void 0===A||A-- >0)&&!(R=V.next()).done;)z.push(R.value)}catch(x){O={error:x}}finally{try{R&&!R.done&&(E=V.return)&&E.call(V)}finally{if(O)throw O.error}}return z}function h(x,A){for(var E=0,R=A.length,O=x.length;E<R;E++,O++)x[O]=A[E];return x}var E=0;function d(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];"undefined"!=typeof dcl?dcl.log.apply(dcl,h([],p(x))):console.log.apply(console,h(["DEBUG:"],p(x)))}function l(x,A){"undefined"!=typeof dcl?dcl.error(x,A):console.error("ERROR:",x,A)}function f(x){if(E++,0===x.length)throw new Error("newId(type: string): type cannot be empty");return x+E.toString(36)}function y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(x){var A=16*Math.random()|0;return("x"===x?A:3&A|8).toString(16)}))}function v(x,A){for(var E=[],R=0;R<x;++R)E.push(A());return E}var R=[];function _(x){if(!("__event_name__"in x)||"string"!=typeof x.__event_name__)throw new Error("The EventConstructor is not registered");return x.__event_name__}var O=function(){function t(){this.listeners={}}return t.prototype.addListener=function(x,A,E){if(!x||"function"!=typeof x)throw new Error("Invalid EventConstructor");var R=_(x),O=this.listeners[R];O||(O=this.listeners[R]=[]);for(var V=0;V<O.length;V++)if(O[V].listener===A)throw new Error("The provided listener is already registered");return O.push({listener:A,fn:E}),this},t.prototype.removeListener=function(x,A){if(!A||"function"!=typeof A)throw new Error("Invalid EventConstructor");var E=_(A),R=this.listeners[E];if(!R)return!1;for(var O=0;O<R.length;O++)if(R[O].listener===x)return R.splice(O,1),!0;return!1},t.prototype.fireEvent=function(x){var A=_(x.constructor),E=this.listeners[A];if(E)for(var R=0;R<E.length;R++)try{var O=E[R];O.fn.call(O.listener,x)}catch(x){l(x)}return this},t}();function w(){var x=f("EV");if(-1!==R.indexOf(x))throw new Error("The event name "+x+" is already taken");return R.push(x),function(A){return A.__event_name__=x,A}}var V,z=r([w()],(function(x,A,E){this.entity=x,this.componentName=A,this.component=E})),U=r([w()],(function(x,A,E){this.entity=x,this.componentName=A,this.classId=E})),Q=r([w()],(function(x,A){this.entity=x,this.parent=A}));x.UIValueType=void 0,(V=x.UIValueType||(x.UIValueType={}))[V.PERCENT=0]="PERCENT",V[V.PIXELS=1]="PIXELS";var W=function(){function e(A){if(this.type=x.UIValueType.PIXELS,"string"==typeof A){var E=A;E.indexOf("px")>-1?this.type=x.UIValueType.PIXELS:E.indexOf("%")>-1&&(this.type=x.UIValueType.PERCENT),this.value=parseFloat(E)}else this.value=A}return e.prototype.toString=function(){var A=this.value.toString();return this.type===x.UIValueType.PERCENT?A+="%":A+="px",A},e}(),H="__name__symbol_",$="__classId__symbol_",G="__component__id_",X=r([w()],(function(x,A,E){this.componentId=x,this.componentName=A,this.classId=E})),K=r([w()],(function(x){this.componentId=x})),J=r([w()],(function(x,A){this.componentId=x,this.component=A}));function M(x,A){return function(E){if(E.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+E.originalClassName+" with: "+x);var R=E,i=function(){var E=Array.prototype.slice.call(arguments),O=new(R.bind.apply(R,h([void 0],p(E))));return Object.defineProperty(O,H,{enumerable:!1,writable:!1,configurable:!1,value:x}),void 0!==A&&Object.defineProperty(O,$,{enumerable:!1,writable:!1,configurable:!1,value:A}),O};return void 0!==A&&(i.__classId__symbol_=A),i.__name__symbol_=x,i.isComponent=!0,i.originalClassName=x,(i.prototype=E.prototype).constructor=E,i}}function F(x,A){return function(E){if(E.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+E.originalClassName+" with: "+x);if("number"!=typeof A||isNaN(A))throw new Error("classId: "+A+" is an invalid integer");var R=E,i=function(){if(!F.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");var E=Array.prototype.slice.call(arguments),O=new(R.bind.apply(R,h([void 0],p(E)))),V=f("C");return Object.defineProperty(O,H,{enumerable:!1,writable:!1,configurable:!1,value:x}),Object.defineProperty(O,G,{enumerable:!1,writable:!1,configurable:!1,value:V}),void 0!==A&&Object.defineProperty(O,$,{enumerable:!1,writable:!1,configurable:!1,value:A}),F.engine&&F.engine.registerComponent(O),O};return void 0!==A&&(i.__classId__symbol_=A),i.__name__symbol_=x,i.isComponent=!0,i.isDisposableComponent=!0,i.originalClassName=x,(i.prototype=E.prototype).constructor=E,i}}function L(x){if(!x)throw new TypeError(x+" is not a component.");if(x.__name__symbol_)return x.__name__symbol_;throw new TypeError(x+" is not a registered component.")}function N(x){if(!x)throw new TypeError(x+" is not a component.");if(x.__classId__symbol_)return x.__classId__symbol_;if(!x.__name__symbol_)throw new TypeError(x+" is not a registered component.");return null}function D(x){if(!x)throw new TypeError(x+" is not a component.");if(x.__component__id_)return x.__component__id_;throw new TypeError(x+" is not a registered disposable component.")}!function(x){x.engine=null}(F||(F={}));var Z=function(){function t(){this.dirty=!1,this.data={},this.subscriptions=[]}return t.component=function(x,A){if(delete x[A]){var E=A+"_"+Math.random();x[E]=void 0,Object.defineProperty(x,E,i(i({},Object.getOwnPropertyDescriptor(x,E)),{enumerable:!1})),Object.defineProperty(x,A.toString(),{get:function(){return this[E]},set:function(x){var R=this[E];if(this.data[A]=x?D(x):null,this[E]=x,x!==R){this.dirty=!0;for(var O=0;O<this.subscriptions.length;O++)this.subscriptions[O](A,x,R)}},enumerable:!0})}},t.field=function(x,A){delete x[A]&&Object.defineProperty(x,A.toString(),{get:function(){return this.data[A]},set:function(x){var E=this.data[A];if(this.data[A]=x,x!==E){this.dirty=!0;for(var R=0;R<this.subscriptions.length;R++)this.subscriptions[R](A,x,E)}},enumerable:!0})},t.uiValue=function(x,A){delete x[A]&&Object.defineProperty(x,A.toString(),{get:function(){return this.data[A].toString()},set:function(x){var E=this.data[A],R=new W(x);if(this.data[A]=R,R!==E){this.dirty=!0;for(var O=0;O<this.subscriptions.length;O++)this.subscriptions[O](A,R,E)}},enumerable:!0})},t.readonly=function(x,A){delete x[A]&&Object.defineProperty(x,A.toString(),{get:function(){if(A in this.data==0)throw new Error("The field "+A+" is uninitialized");return this.data[A]},set:function(x){if(A in this.data)throw new Error("The field "+A+" is readonly");this.data[A]=x,this.dirty=!0},enumerable:!0,configurable:!1})},t.prototype.onChange=function(x){return this.subscriptions.push(x),this},t.prototype.toJSON=function(){return this.data},t}();function B(x){return G in x}var et=function(){function t(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];if(this.entities=[],this.active=!1,this._requiresNames=[],!x)throw new Error("ComponentGroup: Could not load the requires list");if(!(x instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return x.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(var n=function(A){var R=x[A],O=null;if(!R)throw new Error("ComponentGroup: the required component at location "+A+" is invalid");try{O=L(R)}catch(x){throw new Error("ComponentGroup: the required component at location "+A+" is not registered as a @Component. Remember to provide the class of the component, not the name")}if(E._requiresNames.some((function(x){return x===O})))throw new Error("ComponentGroup: the required component list has a repeated name "+O);E._requiresNames.push(O)},E=this,R=0;R<x.length;R++)n(R)}return t.prototype.hasEntity=function(x){return!!x.isAddedToEngine()&&-1!==this.entities.indexOf(x)},t.prototype.addEntity=function(x){if(!x.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(x)&&this.entities.push(x)},t.prototype.removeEntity=function(x){var A=this.entities.indexOf(x);-1!==A&&this.entities.splice(A,1)},t.prototype.componentRemoved=function(x,A){-1!==this._requiresNames.indexOf(A)&&this.removeEntity(x)},t.prototype.meetsRequirements=function(x){for(var A=0;A<this._requiresNames.length;A++)if(!(this._requiresNames[A]in x.components))return!1;return!0},t}(),nt=function(){function t(x){this.name=x,this.children={},this.eventManager=null,this.alive=!1,this.uuid=f("E"),this.components={},this.engine=null,this._parent=null}return t.prototype.addComponentOrReplace=function(x){if("function"==typeof x)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof x)throw new Error("You passed a "+typeof x+", an instance of component is expected");var A=L(x);if(this.components[A]){if(this.components[A]===x)return x;this.removeComponent(this.components[A],!1)}return this.addComponent(x)},t.prototype.hasComponent=function(x){var A=typeof x;if("string"!==A&&"object"!==A&&"function"!==A)throw new Error("Entity#has(component): component is not a class, name or instance");if(null==x)return!1;var E="string"===A?x:L(x),R=this.components[E];return!!R&&("object"===A?R===x:"function"!==A||R instanceof x)},t.prototype.getComponent=function(x){var A=typeof x;if("string"!==A&&"function"!==A)throw new Error("Entity#get(component): component is not a class or name");var E="string"===A?x:L(x),R=this.components[E];if(!R)throw new Error('Can not get component "'+E+'" from entity "'+this.identifier+'"');if("function"===A){if(R instanceof x)return R;throw new Error('Can not get component "'+E+'" from entity "'+this.identifier+'" (by instance)')}return R},t.prototype.getComponentOrNull=function(x){var A=typeof x;if("string"!==A&&"function"!==A)throw new Error("Entity#getOrNull(component): component is not a class or name");var E="string"===A?x:L(x),R=this.components[E];return R?"function"===A?R instanceof x?R:null:R:null},t.prototype.getComponentOrCreate=function(x){if("function"!=typeof x)throw new Error("Entity#getOrCreate(component): component is not a class");var A=this.getComponentOrNull(x);return A||(L(A=new x),this.addComponentOrReplace(A)),A},t.prototype.addComponent=function(x){if("object"!=typeof x)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");var A=L(x),E=N(x);if(this.components[A])throw new Error('A component of type "'+A+'" is already present in entity "'+this.identifier+'"');this.components[A]=x,this.eventManager&&this.eventManager.fireEvent(new U(this,A,E));var R=x;return"function"==typeof R.addedToEntity&&R.addedToEntity(this),x},t.prototype.removeComponent=function(x,A){void 0===A&&(A=!0);var E=typeof x;if("string"!==E&&"function"!==E&&"object"!==E)throw new Error("Entity#remove(component): component is not a class, class or name");var R="string"===E?x:L(x),O=this.components[R];if(O){if("function"===E)return O instanceof x?(delete this.components[R],void(O&&(A&&this.eventManager&&this.eventManager.fireEvent(new z(this,R,O)),"function"==typeof O.removedFromEntity&&O.removedFromEntity(this)))):void d('Entity Warning: Trying to remove wrong (by constructor) component "'+R+'" from entity "'+this.identifier+'"');delete this.components[R],O&&(A&&this.eventManager&&this.eventManager.fireEvent(new z(this,R,O)),"function"==typeof O.removedFromEntity&&O.removedFromEntity(this))}else d('Entity Warning: Trying to remove inexisting component "'+R+'" from entity "'+this.identifier+'"')},t.prototype.isAddedToEngine=function(){return!(!this.engine||!(this.uuid in this.engine.entities)&&this.engine.rootEntity!==this)},t.prototype.setParent=function(x){var A;if(x&&"getEntityRepresentation"in x){if(!this.engine)throw new Error("In order to set an attachable as parent, you first need to add the entity to the engine.");A=x.getEntityRepresentation(this.engine)}else A=!x&&this.engine?this.engine.rootEntity:x;var E=this.getParent();if(A===this)throw new Error('Failed to set parent for entity "'+this.identifier+"\": An entity can't set itself as a its own parent");if(A===E)return this;var R=this.getCircularAncestor(A);if(R)throw new Error('Failed to set parent for entity "'+this.identifier+'": Circular parent references are not allowed (See entity "'+R+'")');return E&&delete E.children[this.uuid],null!==A&&"0"!==A.uuid&&(!A.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),A.isAddedToEngine()&&!this.isAddedToEngine()&&A.engine.addEntity(this)),this._parent=A||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new Q(this,A)),this},t.prototype.getParent=function(){return this._parent},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.name||this.uuid},enumerable:!1,configurable:!0}),t.prototype.getCircularAncestor=function(x){for(var A=this.engine?this.engine.rootEntity:null,E=x;E&&E!==A;){var R=E.getParent();if(R===this)return E.uuid;E=R}return null},t.prototype.registerAsChild=function(){var x=this.getParent();this.uuid&&x&&(x.children[this.uuid]=this)},t}(),ot=function(){function t(x){this.eventManager=new O,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(U,this,this.componentAddedHandler),this.eventManager.addListener(z,this,this.componentRemovedHandler),this.rootEntity=x,this.firstPersonCameraEntity=new nt,this.firstPersonCameraEntity.uuid="FirstPersonCameraEntityReference",this.addEntity(this.firstPersonCameraEntity),this.avatarEntity=new nt,this.avatarEntity.uuid="AvatarEntityReference",this.addEntity(this.avatarEntity)}return Object.defineProperty(t.prototype,"entities",{get:function(){return this._entities},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disposableComponents",{get:function(){return this._disposableComponents},enumerable:!1,configurable:!0}),t.prototype.addEntity=function(x){var A=x.getParent();if(x.isAddedToEngine())return x;for(var E in x.eventManager=this.eventManager,x.engine=this,this._entities[x.uuid]=x,this.checkRequirementsAndAdd(x),A?A.isAddedToEngine()||A===this.rootEntity||d("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+A.uuid):x.setParent(this.rootEntity),x.alive=!0,x.children){var R=x.children[E];R&&(R.isAddedToEngine()||this.addEntity(R))}return x},t.prototype.removeEntity=function(x){var A=x.uuid;if(x.isAddedToEngine()){for(var E in x.components){var R=this._componentGroups[E];if(R)for(var O in R)R[O].removeEntity(x);delete this.entityLists[E][A]}for(var V=0;V<this.simpleSystems.length;V++){var z=this.simpleSystems[V];z.onRemoveEntity&&z.onRemoveEntity(x)}for(var V in x.children){var U=x.children[V];U&&this.removeEntity(U)}return x.alive=!1,x.eventManager=null,delete this._entities[A],!0}for(var E in d("Engine: Trying to remove non existent entity from engine."),x.isAddedToEngine()?d("Engine: Entity id: "+A):d('Engine: Entity "'+x.uuid+'" has not been added to any engine yet.'),d("Engine: Entity's components:"),x.components)d(E);return!1},t.prototype.addSystem=function(x,A){if(void 0===A&&(A=0),-1!==this.addedSystems.indexOf(x))return d("Engine: Trying to add a system that is already added. Aborting"),x;if(this.systems.length>0)for(var E=0;E<this.systems.length;E++){var R=this.systems[E],O=E===this.systems.length-1;if(R.priority>A){this.addedSystems.push(x),this.systems.splice(E,0,{system:x,priority:A});break}if(O){this.addedSystems.push(x),this.systems.splice(E+1,0,{system:x,priority:A});break}}else this.addedSystems.push(x),this.systems.splice(1,0,{system:x,priority:A});return this.registerSystem(x),x},t.prototype.removeSystem=function(x){var A=this.addedSystems.indexOf(x);if(-1!==A){x.active=!1,x.deactivate&&x.deactivate(),this.addedSystems.splice(A,1);for(var E=0;E<this.systems.length;E++)this.systems[E].system===x&&this.systems.splice(E,1);return!0}return!1},t.prototype.update=function(x){for(var A in this.systems){var E=this.systems[A].system;if(E.active&&E.update)try{E.update(x)}catch(x){l(x)}}return this},t.prototype.getEntitiesWithComponent=function(x){var A="string"==typeof x?x:L(x);return A in this.entityLists?this.entityLists[A]:this.entityLists[A]={}},t.prototype.registerComponent=function(x){var A=D(x),E=L(x),R=N(x);this._disposableComponents[A]=x,null!==R&&(this.eventManager.fireEvent(new X(A,E,R)),this.eventManager.fireEvent(new J(A,x)))},t.prototype.disposeComponent=function(x){var A=D(x);return delete this._disposableComponents[A]&&(this.eventManager.fireEvent(new K(A)),x.onDispose&&x.onDispose(),!0)},t.prototype.updateComponent=function(x){this.eventManager.fireEvent(new J(D(x),x))},t.prototype.getComponentGroup=function(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];var E=void 0;if(x.length>0&&(Q=this._componentGroups[L(x[0])]))for(var R=x.slice(),O=0;O<Q.length;O++){var V=Q[O];if(R.length===V.requires.length){for(var z=0;z<R.length&&-1!==V.requires.indexOf(R[z]);z++)z===R.length-1&&(E=V);if(E)break}}if(E)return E;(E=new(et.bind.apply(et,h([void 0],p(x))))).active=!0;var U=E.requiresNames;for(O=0;O<U.length;O++){var Q,W=U[O];(Q=this._componentGroups[W])||(this._componentGroups[W]=Q=[]),-1===Q.indexOf(E)&&Q.push(E)}for(var H in this._entities)this.checkRequirements(this._entities[H],E);return E},t.prototype.removeComponentGroup=function(x){if(x.active){x.active=!1;for(var A=x.requiresNames,E=0;E<A.length;E++){var R=A[E],O=this._componentGroups[R];if(O){var V=O.indexOf(x);-1!==V&&O.splice(V,1)}}return!0}return!1},t.prototype.registerSystem=function(x){x.active=!0,x.activate&&x.activate(this),this.simpleSystems.push(x)},t.prototype.checkRequirementsAndAdd=function(x){if(x.isAddedToEngine()){for(var A in x.components){A in this.entityLists||(this.entityLists[A]={}),this.entityLists[A][x.uuid]=x;var E=this._componentGroups[A];if(E)for(var R in E)this.checkRequirements(x,E[R])}for(var O=0;O<this.simpleSystems.length;O++){var V=this.simpleSystems[O];V.onAddEntity&&V.onAddEntity(x)}}},t.prototype.checkRequirements=function(x,A){A.meetsRequirements(x)?A.hasEntity(x)||A.addEntity(x):A.hasEntity(x)&&A.removeEntity(x)},t.prototype.componentAddedHandler=function(x){var A,E=x.entity,R=x.componentName;if(E.isAddedToEngine()){this.entityLists[R]?this.entityLists[R][E.uuid]=E:this.entityLists[R]=((A={})[E.uuid]=E,A);var O=this._componentGroups[R];if(O)for(var V in O)this.checkRequirements(E,O[V])}},t.prototype.componentRemovedHandler=function(x){var A=x.entity,E=x.componentName;if(A.isAddedToEngine()){delete this.entityLists[E][A.uuid];var R=this._componentGroups[E];if(R)for(var O in R)this.checkRequirements(A,R[O])}},t}(),it=Promise.resolve().then.bind(Promise.resolve());function q(x){var A=it(x);return A.isComplete=!1,A.then((function(x){A.isComplete=!0,A.result=x,A.didFail=!1})).catch((function(x){A.isComplete=!0,A.error=x,A.didFail=!0,l("executeTask: FAILED "+x.toString(),x)})),A}var rt,st,at=function(){function t(x,A,E,R){void 0===A&&(A=!1),this.initalize(x,A,E,R)}return t.prototype.initalize=function(x,A,E,R){return void 0===A&&(A=!1),this.mask=x,this.skipNextObservers=A,this.target=E,this.currentTarget=R,this},t}(),Y=function(x,A,E){void 0===E&&(E=null),this.callback=x,this.mask=A,this.scope=E,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1},ut=function(){function t(){this._observers=null,this._observables=null}return t.Watch=function(x,A,E,R){var O,V;void 0===E&&(E=-1),void 0===R&&(R=null);var z=new t;z._observers=new Array,z._observables=x;try{for(var U=u(x),Q=U.next();!Q.done;Q=U.next()){var W=Q.value.add(A,E,!1,R);W&&z._observers.push(W)}}catch(x){O={error:x}}finally{try{Q&&!Q.done&&(V=U.return)&&V.call(U)}finally{if(O)throw O.error}}return z},t.prototype.dispose=function(){if(this._observers&&this._observables)for(var x=0;x<this._observers.length;x++)this._observables[x].remove(this._observers[x]);this._observers=null,this._observables=null},t}(),pt=function(){function t(x){this._observers=new Array,this._onObserverAdded=null,this._eventState=new at(0),x&&(this._onObserverAdded=x)}return t.prototype.add=function(x,A,E,R,O){if(void 0===A&&(A=-1),void 0===E&&(E=!1),void 0===R&&(R=null),void 0===O&&(O=!1),!x)return null;var V=new Y(x,A,R);return V.unregisterOnNextCall=O,E?this._observers.unshift(V):this._observers.push(V),this._onObserverAdded&&this._onObserverAdded(V),V},t.prototype.addOnce=function(x){return this.add(x,void 0,void 0,void 0,!0)},t.prototype.remove=function(x){return!!x&&-1!==this._observers.indexOf(x)&&(this._deferUnregister(x),!0)},t.prototype.removeCallback=function(x,A){for(var E=0;E<this._observers.length;E++)if(this._observers[E].callback===x&&(!A||A===this._observers[E].scope))return this._deferUnregister(this._observers[E]),!0;return!1},t.prototype.notifyObservers=function(x,A,E,R){var O,V;if(void 0===A&&(A=-1),!this._observers.length)return!0;var z=this._eventState;z.mask=A,z.target=E,z.currentTarget=R,z.skipNextObservers=!1,z.lastReturnValue=x;try{for(var U=u(this._observers),Q=U.next();!Q.done;Q=U.next()){var W=Q.value;if(!W._willBeUnregistered&&(W.mask&A&&(W.scope?z.lastReturnValue=W.callback.apply(W.scope,[x,z]):z.lastReturnValue=W.callback(x,z),W.unregisterOnNextCall&&this._deferUnregister(W)),z.skipNextObservers))return!1}}catch(x){O={error:x}}finally{try{Q&&!Q.done&&(V=U.return)&&V.call(U)}finally{if(O)throw O.error}}return!0},t.prototype.notifyObserversWithPromise=function(x,A,E,R){var O=this;void 0===A&&(A=-1);var V=Promise.resolve(x);if(!this._observers.length)return V;var z=this._eventState;return z.mask=A,z.target=E,z.currentTarget=R,z.skipNextObservers=!1,this._observers.forEach((function(E){z.skipNextObservers||E._willBeUnregistered||E.mask&A&&(V=E.scope?V.then((function(A){return z.lastReturnValue=A,E.callback.apply(E.scope,[x,z])})):V.then((function(A){return z.lastReturnValue=A,E.callback(x,z)})),E.unregisterOnNextCall&&O._deferUnregister(E))})),V.then((function(){return x}))},t.prototype.notifyObserver=function(x,A,E){void 0===E&&(E=-1);var R=this._eventState;R.mask=E,R.skipNextObservers=!1,x.callback(A,R)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var x=new t;return x._observers=this._observers.slice(0),x},t.prototype.hasSpecificMask=function(x){var A,E;void 0===x&&(x=-1);try{for(var R=u(this._observers),O=R.next();!O.done;O=R.next()){var V=O.value;if(V.mask&x||V.mask===x)return!0}}catch(x){A={error:x}}finally{try{O&&!O.done&&(E=R.return)&&E.call(R)}finally{if(A)throw A.error}}return!1},t.prototype._deferUnregister=function(x){var A=this;x.unregisterOnNextCall=!1,x._willBeUnregistered=!0,q((function(){return function(x,A,E,R){return new(E||(E=Promise))((function(A,O){function s(x){try{u(R.next(x))}catch(x){O(x)}}function a(x){try{u(R.throw(x))}catch(x){O(x)}}function u(x){var R;x.done?A(x.value):(R=x.value,R instanceof E?R:new E((function(x){x(R)}))).then(s,a)}u((R=R.apply(x,[])).next())}))}(A,0,void 0,(function(){return function(x,A){var E,R,O,V,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return V={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function a(V){return function(U){return function(V){if(E)throw new TypeError("Generator is already executing.");for(;z;)try{if(E=1,R&&(O=2&V[0]?R.return:V[0]?R.throw||((O=R.return)&&O.call(R),0):R.next)&&!(O=O.call(R,V[1])).done)return O;switch(R=0,O&&(V=[2&V[0],O.value]),V[0]){case 0:case 1:O=V;break;case 4:return z.label++,{value:V[1],done:!1};case 5:z.label++,R=V[1],V=[0];continue;case 7:V=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==V[0]&&2!==V[0])){z=0;continue}if(3===V[0]&&(!O||V[1]>O[0]&&V[1]<O[3])){z.label=V[1];break}if(6===V[0]&&z.label<O[1]){z.label=O[1],O=V;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(V);break}O[2]&&z.ops.pop(),z.trys.pop();continue}V=A.call(x,z)}catch(x){V=[6,x],R=0}finally{E=O=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,U])}}}(this,(function(A){return[2,this._remove(x)]}))}))}))},t.prototype._remove=function(x){if(!x)return!1;var A=this._observers.indexOf(x);return-1!==A&&(this._observers.splice(A,1),!0)},t}(),lt=r([w()],(function(x,A){this.uuid=x,this.payload=A})),ht=r([w()],(function(x){this.payload=x})),dt=r([w()],(function(x){this.payload=x}));function tt(x){return function(){st&&st.subscribe(x)}}var ft=new pt(tt("cameraModeChanged")),gt=new pt(tt("idleStateChanged")),mt=new pt(tt("onEnterScene")),yt=mt,wt=new pt(tt("onLeaveScene")),vt=wt,bt=new pt(tt("sceneStart")),xt=new pt(tt("playerExpression")),Tt=new pt(tt("videoEvent")),At=new pt(tt("profileChanged"));function ct(x){(st=x)&&st.onEvent((function(x){switch(x.type){case"onEnterScene":return void mt.notifyObservers(x.data);case"onLeaveScene":return void wt.notifyObservers(x.data);case"cameraModeChanged":return void ft.notifyObservers(x.data);case"idleStateChanged":return void gt.notifyObservers(x.data);case"sceneStart":return void bt.notifyObservers(x.data);case"playerExpression":return void xt.notifyObservers(x.data);case"videoEvent":var A=x.data,E=F.engine.disposableComponents[A.componentId];return E&&E.update(A),void Tt.notifyObservers(A);case"profileChanged":return void At.notifyObservers(x.data)}}))}var Et,Ct,St=function(){function t(x){this.dcl=x,this.cachedComponents={}}return t.prototype.activate=function(x){var A=this;this.engine=x,x.eventManager.addListener(U,this,this.componentAdded),x.eventManager.addListener(z,this,this.componentRemoved),x.eventManager.addListener(X,this,this.disposableComponentCreated),x.eventManager.addListener(K,this,this.disposableComponentRemoved),x.eventManager.addListener(J,this,this.disposableComponentUpdated),x.eventManager.addListener(Q,this,this.parentChanged);var E=x.rootEntity.uuid;this.dcl.addEntity(E),this.dcl.onUpdate((function(E){x.update(E),A.presentEntities()})),this.dcl.onEvent((function(A){var E=A.data;switch(A.type){case"uuidEvent":x.eventManager.fireEvent(new lt(E.uuid,E.payload));break;case"raycastResponse":("HitFirst"===E.queryType||"HitAll"===E.queryType)&&x.eventManager.fireEvent(new ht(E));break;case"pointerEvent":x.eventManager.fireEvent(new dt(E.payload))}}))},t.prototype.onAddEntity=function(x){if(x&&x.isAddedToEngine()){var A=x.uuid,E=x.getParent();for(var R in this.dcl.addEntity(A),E&&this.dcl.setParent(A,E.uuid),this.cachedComponents[A]={},x.components){var O=x.components[R],V=N(O);if(null!==V)if(B(O))this.dcl.attachEntityComponent(x.uuid,R,D(O));else{var z=JSON.stringify(O);this.dcl.updateEntityComponent(A,R,V,z),this.cachedComponents[A][R]=z}}}},t.prototype.onRemoveEntity=function(x){if(x.isAddedToEngine()){var A=x.uuid;this.dcl.removeEntity(A),delete this.cachedComponents[A]}},t.prototype.presentEntities=function(){for(var x in this.engine.entities){var A=this.engine.entities[x];for(var E in A.components){var R=N(z=A.components[E]);if(null!==R&&!B(z)){var O=this.getJsonIfDirty(A.uuid,E,z);O&&(this.dcl.updateEntityComponent(A.uuid,E,R,O),this.clearDirty(A.uuid,E,z,O))}}}for(var V in this.engine.disposableComponents){var z;(z=this.engine.disposableComponents[V])instanceof Z&&z.dirty&&(this.dcl.componentUpdated(V,JSON.stringify(z)),z.dirty=!1)}},t.prototype.componentAdded=function(x){if(x.entity.isAddedToEngine()){var A=x.entity.components[x.componentName];if(B(A))this.dcl.attachEntityComponent(x.entity.uuid,x.componentName,D(A));else if(null!==x.classId){var E=JSON.stringify(A);this.dcl.updateEntityComponent(x.entity.uuid,x.componentName,x.classId,E),this.cachedComponents[x.entity.uuid][x.componentName]=E}}},t.prototype.componentRemoved=function(x){x.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(x.entity.uuid,x.componentName),delete this.cachedComponents[x.entity.uuid][x.componentName])},t.prototype.disposableComponentCreated=function(x){this.dcl.componentCreated(x.componentId,x.componentName,x.classId)},t.prototype.disposableComponentRemoved=function(x){this.dcl.componentDisposed(x.componentId)},t.prototype.disposableComponentUpdated=function(x){this.dcl.componentUpdated(x.componentId,JSON.stringify(x.component))},t.prototype.parentChanged=function(x){this.dcl.setParent(x.entity.uuid,x.parent?x.parent.uuid:"0")},t.prototype.getJsonIfDirty=function(x,A,E){var R=JSON.stringify(E);return R!==this.cachedComponents[x][A]&&R},t.prototype.clearDirty=function(x,A,E,R){this.cachedComponents[x][A]=R},t}();x.Orientation=void 0,(Et=x.Orientation||(x.Orientation={}))[Et.CW=0]="CW",Et[Et.CCW=1]="CCW",x.Space=void 0,(Ct=x.Space||(x.Space={}))[Ct.LOCAL=0]="LOCAL",Ct[Ct.WORLD=1]="WORLD",Ct[Ct.BONE=2]="BONE";var _t,It,Rt,Ot,Vt=1/2.2,Pt=2.2,kt=1e-6,Dt=Math.PI/180,Lt=360/(2*Math.PI),Bt=function(){function t(){}return t.WithinEpsilon=function(x,A,E){void 0===E&&(E=1401298e-51);var R=x-A;return-E<=R&&R<=E},t.ToHex=function(x){var A=x.toString(16);return x<=15?("0"+A).toUpperCase():A.toUpperCase()},t.Sign=function(x){var A=+x;return 0===A||isNaN(A)?A:A>0?1:-1},t.Clamp=function(x,A,E){return void 0===A&&(A=0),void 0===E&&(E=1),Math.min(E,Math.max(A,x))},t.Log2=function(x){return Math.log(x)*Math.LOG2E},t.Repeat=function(x,A){return x-Math.floor(x/A)*A},t.Normalize=function(x,A,E){return(x-A)/(E-A)},t.Denormalize=function(x,A,E){return x*(E-A)+A},t.DeltaAngle=function(x,A){var E=t.Repeat(A-x,360);return E>180&&(E-=360),E},t.PingPong=function(x,A){var E=t.Repeat(x,2*A);return A-Math.abs(E-A)},t.SmoothStep=function(x,A,E){var R=t.Clamp(E);return A*(R=-2*R*R*R+3*R*R)+x*(1-R)},t.MoveTowards=function(x,A,E){return Math.abs(A-x)<=E?A:x+t.Sign(A-x)*E},t.MoveTowardsAngle=function(x,A,E){var R=t.DeltaAngle(x,A);return-E<R&&R<E?A:t.MoveTowards(x,x+R,E)},t.Lerp=function(x,A,E){return x+(A-x)*E},t.LerpAngle=function(x,A,E){var R=t.Repeat(A-x,360);return R>180&&(R-=360),x+R*t.Clamp(E)},t.InverseLerp=function(x,A,E){return x!==A?t.Clamp((E-x)/(A-x)):0},t.Hermite=function(x,A,E,R,O){var V=O*O,z=O*V;return x*(2*z-3*V+1)+E*(-2*z+3*V)+A*(z-2*V+O)+R*(z-V)},t.RandomRange=function(x,A){return x===A?x:Math.random()*(A-x)+x},t.RangeToPercent=function(x,A,E){return(x-A)/(E-A)},t.PercentToRange=function(x,A,E){return(E-A)*x+A},t.NormalizeRadians=function(x){return x-t.TwoPi*Math.floor((x+Math.PI)/t.TwoPi)},t.TwoPi=2*Math.PI,t}(),Ft=function(){function t(x,A,E,R){this.x=x,this.y=A,this.z=E,this.w=R}return t.Add=function(x,A){return new t(x.x,x.y,x.z,x.w).addInPlace(A)},t.FromArray=function(x,A){return void 0===A&&(A=0),new t(x[A],x[A+1],x[A+2],x[A+3])},t.FromArrayToRef=function(x,A,E){E.x=x[A],E.y=x[A+1],E.z=x[A+2],E.w=x[A+3]},t.FromFloatArrayToRef=function(x,A,E){t.FromArrayToRef(x,A,E)},t.FromFloatsToRef=function(x,A,E,R,O){O.x=x,O.y=A,O.z=E,O.w=R},t.Zero=function(){return new t(0,0,0,0)},t.One=function(){return new t(1,1,1,1)},t.Normalize=function(x){var A=t.Zero();return t.NormalizeToRef(x,A),A},t.NormalizeToRef=function(x,A){A.copyFrom(x),A.normalize()},t.Minimize=function(x,A){var E=new t(x.x,x.y,x.z,x.w);return E.minimizeInPlace(A),E},t.Maximize=function(x,A){var E=new t(x.x,x.y,x.z,x.w);return E.maximizeInPlace(A),E},t.Distance=function(x,A){return Math.sqrt(t.DistanceSquared(x,A))},t.DistanceSquared=function(x,A){var E=x.x-A.x,R=x.y-A.y,O=x.z-A.z,V=x.w-A.w;return E*E+R*R+O*O+V*V},t.Center=function(x,A){var E=t.Add(x,A);return E.scaleInPlace(.5),E},t.TransformNormal=function(x,A){var E=t.Zero();return t.TransformNormalToRef(x,A,E),E},t.TransformNormalToRef=function(x,A,E){var R=A.m,O=x.x*R[0]+x.y*R[4]+x.z*R[8],V=x.x*R[1]+x.y*R[5]+x.z*R[9],z=x.x*R[2]+x.y*R[6]+x.z*R[10];E.x=O,E.y=V,E.z=z,E.w=x.w},t.TransformNormalFromFloatsToRef=function(x,A,E,R,O,V){var z=O.m;V.x=x*z[0]+A*z[4]+E*z[8],V.y=x*z[1]+A*z[5]+E*z[9],V.z=x*z[2]+A*z[6]+E*z[10],V.w=R},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},t.prototype.getClassName=function(){return"Vector4"},t.prototype.getHashCode=function(){var x=this.x||0;return 397*(x=397*(x=397*x^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){var x=new Array;return this.toArray(x,0),x},t.prototype.toArray=function(x,A){return void 0===A&&(A=0),x[A]=this.x,x[A+1]=this.y,x[A+2]=this.z,x[A+3]=this.w,this},t.prototype.addInPlace=function(x){return this.x+=x.x,this.y+=x.y,this.z+=x.z,this.w+=x.w,this},t.prototype.add=function(x){return new t(this.x+x.x,this.y+x.y,this.z+x.z,this.w+x.w)},t.prototype.addToRef=function(x,A){return A.x=this.x+x.x,A.y=this.y+x.y,A.z=this.z+x.z,A.w=this.w+x.w,this},t.prototype.subtractInPlace=function(x){return this.x-=x.x,this.y-=x.y,this.z-=x.z,this.w-=x.w,this},t.prototype.subtract=function(x){return new t(this.x-x.x,this.y-x.y,this.z-x.z,this.w-x.w)},t.prototype.subtractToRef=function(x,A){return A.x=this.x-x.x,A.y=this.y-x.y,A.z=this.z-x.z,A.w=this.w-x.w,this},t.prototype.subtractFromFloats=function(x,A,E,R){return new t(this.x-x,this.y-A,this.z-E,this.w-R)},t.prototype.subtractFromFloatsToRef=function(x,A,E,R,O){return O.x=this.x-x,O.y=this.y-A,O.z=this.z-E,O.w=this.w-R,this},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z,-this.w)},t.prototype.scaleInPlace=function(x){return this.x*=x,this.y*=x,this.z*=x,this.w*=x,this},t.prototype.scale=function(x){return new t(this.x*x,this.y*x,this.z*x,this.w*x)},t.prototype.scaleToRef=function(x,A){return A.x=this.x*x,A.y=this.y*x,A.z=this.z*x,A.w=this.w*x,this},t.prototype.scaleAndAddToRef=function(x,A){return A.x+=this.x*x,A.y+=this.y*x,A.z+=this.z*x,A.w+=this.w*x,this},t.prototype.equals=function(x){return x&&this.x===x.x&&this.y===x.y&&this.z===x.z&&this.w===x.w},t.prototype.equalsWithEpsilon=function(x,A){return void 0===A&&(A=kt),x&&Bt.WithinEpsilon(this.x,x.x,A)&&Bt.WithinEpsilon(this.y,x.y,A)&&Bt.WithinEpsilon(this.z,x.z,A)&&Bt.WithinEpsilon(this.w,x.w,A)},t.prototype.equalsToFloats=function(x,A,E,R){return this.x===x&&this.y===A&&this.z===E&&this.w===R},t.prototype.multiplyInPlace=function(x){return this.x*=x.x,this.y*=x.y,this.z*=x.z,this.w*=x.w,this},t.prototype.multiply=function(x){return new t(this.x*x.x,this.y*x.y,this.z*x.z,this.w*x.w)},t.prototype.multiplyToRef=function(x,A){return A.x=this.x*x.x,A.y=this.y*x.y,A.z=this.z*x.z,A.w=this.w*x.w,this},t.prototype.multiplyByFloats=function(x,A,E,R){return new t(this.x*x,this.y*A,this.z*E,this.w*R)},t.prototype.divide=function(x){return new t(this.x/x.x,this.y/x.y,this.z/x.z,this.w/x.w)},t.prototype.divideToRef=function(x,A){return A.x=this.x/x.x,A.y=this.y/x.y,A.z=this.z/x.z,A.w=this.w/x.w,this},t.prototype.divideInPlace=function(x){return this.divideToRef(x,this)},t.prototype.minimizeInPlace=function(x){return x.x<this.x&&(this.x=x.x),x.y<this.y&&(this.y=x.y),x.z<this.z&&(this.z=x.z),x.w<this.w&&(this.w=x.w),this},t.prototype.maximizeInPlace=function(x){return x.x>this.x&&(this.x=x.x),x.y>this.y&&(this.y=x.y),x.z>this.z&&(this.z=x.z),x.w>this.w&&(this.w=x.w),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},t.prototype.normalize=function(){var x=this.length();return 0===x?this:this.scaleInPlace(1/x)},t.prototype.toVector3=function(){return new jt(this.x,this.y,this.z)},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(x){return this.x=x.x,this.y=x.y,this.z=x.z,this.w=x.w,this},t.prototype.copyFromFloats=function(x,A,E,R){return this.x=x,this.y=A,this.z=E,this.w=R,this},t.prototype.set=function(x,A,E,R){return this.copyFromFloats(x,A,E,R)},t.prototype.setAll=function(x){return this.x=this.y=this.z=this.w=x,this},t}(),Nt=function(){function t(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}return Object.defineProperty(t.prototype,"m",{get:function(){return this._m},enumerable:!1,configurable:!0}),Object.defineProperty(t,"IdentityReadOnly",{get:function(){return t._identityReadOnly},enumerable:!1,configurable:!0}),t.FromArray=function(x,A){void 0===A&&(A=0);var E=new t;return t.FromArrayToRef(x,A,E),E},t.FromArrayToRef=function(x,A,E){for(var R=0;R<16;R++)E._m[R]=x[R+A];E._markAsUpdated()},t.FromFloatArrayToRefScaled=function(x,A,E,R){for(var O=0;O<16;O++)R._m[O]=x[O+A]*E;R._markAsUpdated()},t.FromValuesToRef=function(x,A,E,R,O,V,z,U,Q,W,H,$,G,X,K,J,Z){var et=Z._m;et[0]=x,et[1]=A,et[2]=E,et[3]=R,et[4]=O,et[5]=V,et[6]=z,et[7]=U,et[8]=Q,et[9]=W,et[10]=H,et[11]=$,et[12]=G,et[13]=X,et[14]=K,et[15]=J,Z._markAsUpdated()},t.FromValues=function(x,A,E,R,O,V,z,U,Q,W,H,$,G,X,K,J){var Z=new t,et=Z._m;return et[0]=x,et[1]=A,et[2]=E,et[3]=R,et[4]=O,et[5]=V,et[6]=z,et[7]=U,et[8]=Q,et[9]=W,et[10]=H,et[11]=$,et[12]=G,et[13]=X,et[14]=K,et[15]=J,Z._markAsUpdated(),Z},t.Compose=function(x,A,E){var R=new t;return t.ComposeToRef(x,A,E,R),R},t.ComposeToRef=function(x,A,E,R){t.ScalingToRef(x.x,x.y,x.z,Ut.Matrix[1]),A.toRotationMatrix(Ut.Matrix[0]),Ut.Matrix[1].multiplyToRef(Ut.Matrix[0],R),R.setTranslation(E)},t.Identity=function(){var x=t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return x._updateIdentityStatus(!0),x},t.IdentityToRef=function(x){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,x),x._updateIdentityStatus(!0)},t.Zero=function(){var x=t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return x._updateIdentityStatus(!1),x},t.RotationX=function(x){var A=new t;return t.RotationXToRef(x,A),A},t.Invert=function(x){var A=new t;return x.invertToRef(A),A},t.RotationXToRef=function(x,A){var E=Math.sin(x),R=Math.cos(x);t.FromValuesToRef(1,0,0,0,0,R,E,0,0,-E,R,0,0,0,0,1,A),A._updateIdentityStatus(1===R&&0===E)},t.RotationY=function(x){var A=new t;return t.RotationYToRef(x,A),A},t.RotationYToRef=function(x,A){var E=Math.sin(x),R=Math.cos(x);t.FromValuesToRef(R,0,-E,0,0,1,0,0,E,0,R,0,0,0,0,1,A),A._updateIdentityStatus(1===R&&0===E)},t.RotationZ=function(x){var A=new t;return t.RotationZToRef(x,A),A},t.RotationZToRef=function(x,A){var E=Math.sin(x),R=Math.cos(x);t.FromValuesToRef(R,E,0,0,-E,R,0,0,0,0,1,0,0,0,0,1,A),A._updateIdentityStatus(1===R&&0===E)},t.RotationAxis=function(x,A){var E=new t;return t.RotationAxisToRef(x,A,E),E},t.RotationAxisToRef=function(x,A,E){var R=Math.sin(-A),O=Math.cos(-A),V=1-O;x.normalize();var z=E._m;z[0]=x.x*x.x*V+O,z[1]=x.x*x.y*V-x.z*R,z[2]=x.x*x.z*V+x.y*R,z[3]=0,z[4]=x.y*x.x*V+x.z*R,z[5]=x.y*x.y*V+O,z[6]=x.y*x.z*V-x.x*R,z[7]=0,z[8]=x.z*x.x*V-x.y*R,z[9]=x.z*x.y*V+x.x*R,z[10]=x.z*x.z*V+O,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,E._markAsUpdated()},t.RotationYawPitchRoll=function(x,A,E){var R=new t;return t.RotationYawPitchRollToRef(x,A,E,R),R},t.RotationYawPitchRollToRef=function(x,A,E,R){Mt.RotationYawPitchRollToRef(x,A,E,Ut.Quaternion[0]),Ut.Quaternion[0].toRotationMatrix(R)},t.Scaling=function(x,A,E){var R=new t;return t.ScalingToRef(x,A,E,R),R},t.ScalingToRef=function(x,A,E,R){t.FromValuesToRef(x,0,0,0,0,A,0,0,0,0,E,0,0,0,0,1,R),R._updateIdentityStatus(1===x&&1===A&&1===E)},t.Translation=function(x,A,E){var R=new t;return t.TranslationToRef(x,A,E,R),R},t.TranslationToRef=function(x,A,E,R){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,x,A,E,1,R),R._updateIdentityStatus(0===x&&0===A&&0===E)},t.Lerp=function(x,A,E){var R=new t;return t.LerpToRef(x,A,E,R),R},t.LerpToRef=function(x,A,E,R){for(var O=0;O<16;O++)R._m[O]=x._m[O]*(1-E)+A._m[O]*E;R._markAsUpdated()},t.DecomposeLerp=function(x,A,E){var R=new t;return t.DecomposeLerpToRef(x,A,E,R),R},t.DecomposeLerpToRef=function(x,A,E,R){var O=Ut.Vector3[0],V=Ut.Quaternion[0],z=Ut.Vector3[1];x.decompose(O,V,z);var U=Ut.Vector3[2],Q=Ut.Quaternion[1],W=Ut.Vector3[3];A.decompose(U,Q,W);var H=Ut.Vector3[4];jt.LerpToRef(O,U,E,H);var $=Ut.Quaternion[2];Mt.SlerpToRef(V,Q,E,$);var G=Ut.Vector3[5];jt.LerpToRef(z,W,E,G),t.ComposeToRef(H,$,G,R)},t.LookAtLH=function(x,A,E){var R=new t;return t.LookAtLHToRef(x,A,E,R),R},t.LookAtLHToRef=function(x,A,E,R){var O=Ut.Vector3[0],V=Ut.Vector3[1],z=Ut.Vector3[2];A.subtractToRef(x,z),z.normalize(),jt.CrossToRef(E,z,O);var U=O.lengthSquared();0===U?O.x=1:O.normalizeFromLength(Math.sqrt(U)),jt.CrossToRef(z,O,V),V.normalize();var Q=-jt.Dot(O,x),W=-jt.Dot(V,x),H=-jt.Dot(z,x);t.FromValuesToRef(O.x,V.x,z.x,0,O.y,V.y,z.y,0,O.z,V.z,z.z,0,Q,W,H,1,R)},t.LookAtRH=function(x,A,E){var R=new t;return t.LookAtRHToRef(x,A,E,R),R},t.LookAtRHToRef=function(x,A,E,R){var O=Ut.Vector3[0],V=Ut.Vector3[1],z=Ut.Vector3[2];x.subtractToRef(A,z),z.normalize(),jt.CrossToRef(E,z,O);var U=O.lengthSquared();0===U?O.x=1:O.normalizeFromLength(Math.sqrt(U)),jt.CrossToRef(z,O,V),V.normalize();var Q=-jt.Dot(O,x),W=-jt.Dot(V,x),H=-jt.Dot(z,x);t.FromValuesToRef(O.x,V.x,z.x,0,O.y,V.y,z.y,0,O.z,V.z,z.z,0,Q,W,H,1,R)},t.OrthoLH=function(x,A,E,R){var O=new t;return t.OrthoLHToRef(x,A,E,R,O),O},t.OrthoLHToRef=function(x,A,E,R,O){var V=2/x,z=2/A,U=2/(R-E),Q=-(R+E)/(R-E);t.FromValuesToRef(V,0,0,0,0,z,0,0,0,0,U,0,0,0,Q,1,O),O._updateIdentityStatus(1===V&&1===z&&1===U&&0===Q)},t.OrthoOffCenterLH=function(x,A,E,R,O,V){var z=new t;return t.OrthoOffCenterLHToRef(x,A,E,R,O,V,z),z},t.OrthoOffCenterLHToRef=function(x,A,E,R,O,V,z){var U=2/(A-x),Q=2/(R-E),W=2/(V-O),H=-(V+O)/(V-O),$=(x+A)/(x-A),G=(R+E)/(E-R);t.FromValuesToRef(U,0,0,0,0,Q,0,0,0,0,W,0,$,G,H,1,z),z._markAsUpdated()},t.OrthoOffCenterRH=function(x,A,E,R,O,V){var z=new t;return t.OrthoOffCenterRHToRef(x,A,E,R,O,V,z),z},t.OrthoOffCenterRHToRef=function(x,A,E,R,O,V,z){t.OrthoOffCenterLHToRef(x,A,E,R,O,V,z),z._m[10]*=-1},t.PerspectiveLH=function(x,A,E,R){var O=new t,V=2*E/x,z=2*E/A,U=(R+E)/(R-E),Q=-2*R*E/(R-E);return t.FromValuesToRef(V,0,0,0,0,z,0,0,0,0,U,1,0,0,Q,0,O),O._updateIdentityStatus(!1),O},t.PerspectiveFovLH=function(x,A,E,R){var O=new t;return t.PerspectiveFovLHToRef(x,A,E,R,O),O},t.PerspectiveFovLHToRef=function(x,A,E,R,O,V){void 0===V&&(V=!0);var z=E,U=R,Q=1/Math.tan(.5*x),W=V?Q/A:Q,H=V?Q:Q*A,$=(U+z)/(U-z),G=-2*U*z/(U-z);t.FromValuesToRef(W,0,0,0,0,H,0,0,0,0,$,1,0,0,G,0,O),O._updateIdentityStatus(!1)},t.PerspectiveFovRH=function(x,A,E,R){var O=new t;return t.PerspectiveFovRHToRef(x,A,E,R,O),O},t.PerspectiveFovRHToRef=function(x,A,E,R,O,V){void 0===V&&(V=!0);var z=E,U=R,Q=1/Math.tan(.5*x),W=V?Q/A:Q,H=V?Q:Q*A,$=-(U+z)/(U-z),G=-2*U*z/(U-z);t.FromValuesToRef(W,0,0,0,0,H,0,0,0,0,$,-1,0,0,G,0,O),O._updateIdentityStatus(!1)},t.PerspectiveFovWebVRToRef=function(x,A,E,R,O){void 0===O&&(O=!1);var V=O?-1:1,z=Math.tan(x.upDegrees*Math.PI/180),U=Math.tan(x.downDegrees*Math.PI/180),Q=Math.tan(x.leftDegrees*Math.PI/180),W=Math.tan(x.rightDegrees*Math.PI/180),H=2/(Q+W),$=2/(z+U),G=R._m;G[0]=H,G[1]=G[2]=G[3]=G[4]=0,G[5]=$,G[6]=G[7]=0,G[8]=(Q-W)*H*.5,G[9]=-(z-U)*$*.5,G[10]=-E/(A-E),G[11]=1*V,G[12]=G[13]=G[15]=0,G[14]=-2*E*A/(E-A),R._markAsUpdated()},t.GetAsMatrix2x2=function(x){return[x._m[0],x._m[1],x._m[4],x._m[5]]},t.GetAsMatrix3x3=function(x){return[x._m[0],x._m[1],x._m[2],x._m[4],x._m[5],x._m[6],x._m[8],x._m[9],x._m[10]]},t.Transpose=function(x){var A=new t;return t.TransposeToRef(x,A),A},t.TransposeToRef=function(x,A){var E=A._m,R=x._m;E[0]=R[0],E[1]=R[4],E[2]=R[8],E[3]=R[12],E[4]=R[1],E[5]=R[5],E[6]=R[9],E[7]=R[13],E[8]=R[2],E[9]=R[6],E[10]=R[10],E[11]=R[14],E[12]=R[3],E[13]=R[7],E[14]=R[11],E[15]=R[15],A._updateIdentityStatus(x._isIdentity,x._isIdentityDirty)},t.Reflection=function(x){var A=new t;return t.ReflectionToRef(x,A),A},t.ReflectionToRef=function(x,A){x.normalize();var E=x.normal.x,R=x.normal.y,O=x.normal.z,V=-2*E,z=-2*R,U=-2*O;t.FromValuesToRef(V*E+1,z*E,U*E,0,V*R,z*R+1,U*R,0,V*O,z*O,U*O+1,0,V*x.d,z*x.d,U*x.d,1,A)},t.FromXYZAxesToRef=function(x,A,E,R){t.FromValuesToRef(x.x,x.y,x.z,0,A.x,A.y,A.z,0,E.x,E.y,E.z,0,0,0,0,1,R)},t.FromQuaternionToRef=function(x,A){var E=x.x*x.x,R=x.y*x.y,O=x.z*x.z,V=x.x*x.y,z=x.z*x.w,U=x.z*x.x,Q=x.y*x.w,W=x.y*x.z,H=x.x*x.w;A._m[0]=1-2*(R+O),A._m[1]=2*(V+z),A._m[2]=2*(U-Q),A._m[3]=0,A._m[4]=2*(V-z),A._m[5]=1-2*(O+E),A._m[6]=2*(W+H),A._m[7]=0,A._m[8]=2*(U+Q),A._m[9]=2*(W-H),A._m[10]=1-2*(R+E),A._m[11]=0,A._m[12]=0,A._m[13]=0,A._m[14]=0,A._m[15]=1,A._markAsUpdated()},t.prototype._markAsUpdated=function(){this.updateFlag=t._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},t.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var x=this._m;this._isIdentity=1===x[0]&&0===x[1]&&0===x[2]&&0===x[3]&&0===x[4]&&1===x[5]&&0===x[6]&&0===x[7]&&0===x[8]&&0===x[9]&&1===x[10]&&0===x[11]&&0===x[12]&&0===x[13]&&0===x[14]&&1===x[15]}return this._isIdentity},t.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2},t.prototype.determinant=function(){if(!0===this._isIdentity)return 1;var x=this._m,A=x[0],E=x[1],R=x[2],O=x[3],V=x[4],z=x[5],U=x[6],Q=x[7],W=x[8],H=x[9],$=x[10],G=x[11],X=x[12],K=x[13],J=x[14],Z=x[15],et=$*Z-J*G,nt=H*Z-K*G,ot=H*J-K*$,it=W*Z-X*G,rt=W*J-$*X,st=W*K-X*H;return A*+(z*et-U*nt+Q*ot)+E*-(V*et-U*it+Q*rt)+R*+(V*nt-z*it+Q*st)+O*-(V*ot-z*rt+U*st)},t.prototype.toArray=function(){return this._m},t.prototype.asArray=function(){return this._m},t.prototype.invert=function(){return this.invertToRef(this),this},t.prototype.reset=function(){return t.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},t.prototype.add=function(x){var A=new t;return this.addToRef(x,A),A},t.prototype.addToRef=function(x,A){for(var E=0;E<16;E++)A._m[E]=this._m[E]+x._m[E];return A._markAsUpdated(),this},t.prototype.addToSelf=function(x){for(var A=0;A<16;A++)this._m[A]+=x._m[A];return this._markAsUpdated(),this},t.prototype.invertToRef=function(x){if(!0===this._isIdentity)return t.IdentityToRef(x),this;var A=this._m,E=A[0],R=A[1],O=A[2],V=A[3],z=A[4],U=A[5],Q=A[6],W=A[7],H=A[8],$=A[9],G=A[10],X=A[11],K=A[12],J=A[13],Z=A[14],et=A[15],nt=G*et-Z*X,ot=$*et-J*X,it=$*Z-J*G,rt=H*et-K*X,st=H*Z-G*K,at=H*J-K*$,ut=+(U*nt-Q*ot+W*it),pt=-(z*nt-Q*rt+W*st),lt=+(z*ot-U*rt+W*at),ht=-(z*it-U*st+Q*at),dt=E*ut+R*pt+O*lt+V*ht;if(0===dt)return x.copyFrom(this),this;var ft=1/dt,gt=Q*et-Z*W,mt=U*et-J*W,yt=U*Z-J*Q,wt=z*et-K*W,vt=z*Z-K*Q,bt=z*J-K*U,xt=Q*X-G*W,Tt=U*X-$*W,At=U*G-$*Q,Et=z*X-H*W,Ct=z*G-H*Q,St=z*$-H*U,_t=-(R*nt-O*ot+V*it),It=+(E*nt-O*rt+V*st),Rt=-(E*ot-R*rt+V*at),Ot=+(E*it-R*st+O*at),Vt=+(R*gt-O*mt+V*yt),Pt=-(E*gt-O*wt+V*vt),kt=+(E*mt-R*wt+V*bt),Dt=-(E*yt-R*vt+O*bt),Lt=-(R*xt-O*Tt+V*At),Bt=+(E*xt-O*Et+V*Ct),Ft=-(E*Tt-R*Et+V*St),Nt=+(E*At-R*Ct+O*St);return t.FromValuesToRef(ut*ft,_t*ft,Vt*ft,Lt*ft,pt*ft,It*ft,Pt*ft,Bt*ft,lt*ft,Rt*ft,kt*ft,Ft*ft,ht*ft,Ot*ft,Dt*ft,Nt*ft,x),this},t.prototype.addAtIndex=function(x,A){return this._m[x]+=A,this._markAsUpdated(),this},t.prototype.multiplyAtIndex=function(x,A){return this._m[x]*=A,this._markAsUpdated(),this},t.prototype.setTranslationFromFloats=function(x,A,E){return this._m[12]=x,this._m[13]=A,this._m[14]=E,this._markAsUpdated(),this},t.prototype.setTranslation=function(x){return this.setTranslationFromFloats(x.x,x.y,x.z)},t.prototype.getTranslation=function(){return new jt(this._m[12],this._m[13],this._m[14])},t.prototype.getTranslationToRef=function(x){return x.x=this._m[12],x.y=this._m[13],x.z=this._m[14],this},t.prototype.removeRotationAndScaling=function(){var x=this.m;return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,x[12],x[13],x[14],x[15],this),this._updateIdentityStatus(0===x[12]&&0===x[13]&&0===x[14]&&1===x[15]),this},t.prototype.multiply=function(x){var A=new t;return this.multiplyToRef(x,A),A},t.prototype.copyFrom=function(x){x.copyToArray(this._m);var A=x;return this._updateIdentityStatus(A._isIdentity,A._isIdentityDirty,A._isIdentity3x2,A._isIdentity3x2Dirty),this},t.prototype.copyToArray=function(x,A){void 0===A&&(A=0);for(var E=0;E<16;E++)x[A+E]=this._m[E];return this},t.prototype.multiplyToRef=function(x,A){return this._isIdentity?(A.copyFrom(x),this):x._isIdentity?(A.copyFrom(this),this):(this.multiplyToArray(x,A._m,0),A._markAsUpdated(),this)},t.prototype.multiplyToArray=function(x,A,E){var R=this._m,O=x.m,V=R[0],z=R[1],U=R[2],Q=R[3],W=R[4],H=R[5],$=R[6],G=R[7],X=R[8],K=R[9],J=R[10],Z=R[11],et=R[12],nt=R[13],ot=R[14],it=R[15],rt=O[0],st=O[1],at=O[2],ut=O[3],pt=O[4],lt=O[5],ht=O[6],dt=O[7],ft=O[8],gt=O[9],mt=O[10],yt=O[11],wt=O[12],vt=O[13],bt=O[14],xt=O[15];return A[E]=V*rt+z*pt+U*ft+Q*wt,A[E+1]=V*st+z*lt+U*gt+Q*vt,A[E+2]=V*at+z*ht+U*mt+Q*bt,A[E+3]=V*ut+z*dt+U*yt+Q*xt,A[E+4]=W*rt+H*pt+$*ft+G*wt,A[E+5]=W*st+H*lt+$*gt+G*vt,A[E+6]=W*at+H*ht+$*mt+G*bt,A[E+7]=W*ut+H*dt+$*yt+G*xt,A[E+8]=X*rt+K*pt+J*ft+Z*wt,A[E+9]=X*st+K*lt+J*gt+Z*vt,A[E+10]=X*at+K*ht+J*mt+Z*bt,A[E+11]=X*ut+K*dt+J*yt+Z*xt,A[E+12]=et*rt+nt*pt+ot*ft+it*wt,A[E+13]=et*st+nt*lt+ot*gt+it*vt,A[E+14]=et*at+nt*ht+ot*mt+it*bt,A[E+15]=et*ut+nt*dt+ot*yt+it*xt,this},t.prototype.equals=function(x){var A=x;if(!A)return!1;if((this._isIdentity||A._isIdentity)&&!this._isIdentityDirty&&!A._isIdentityDirty)return this._isIdentity&&A._isIdentity;var E=this.m,R=A.m;return E[0]===R[0]&&E[1]===R[1]&&E[2]===R[2]&&E[3]===R[3]&&E[4]===R[4]&&E[5]===R[5]&&E[6]===R[6]&&E[7]===R[7]&&E[8]===R[8]&&E[9]===R[9]&&E[10]===R[10]&&E[11]===R[11]&&E[12]===R[12]&&E[13]===R[13]&&E[14]===R[14]&&E[15]===R[15]},t.prototype.clone=function(){var x=new t;return x.copyFrom(this),x},t.prototype.getClassName=function(){return"Matrix"},t.prototype.getHashCode=function(){for(var x=this._m[0]||0,A=1;A<16;A++)x=397*x^(this._m[A]||0);return x},t.prototype.decompose=function(x,A,E){if(this._isIdentity)return E&&E.setAll(0),x&&x.setAll(1),A&&A.copyFromFloats(0,0,0,1),!0;var R=this._m;E&&E.copyFromFloats(R[12],R[13],R[14]);var O=x||Ut.Vector3[0];if(O.x=Math.sqrt(R[0]*R[0]+R[1]*R[1]+R[2]*R[2]),O.y=Math.sqrt(R[4]*R[4]+R[5]*R[5]+R[6]*R[6]),O.z=Math.sqrt(R[8]*R[8]+R[9]*R[9]+R[10]*R[10]),this.determinant()<=0&&(O.y*=-1),0===O.x||0===O.y||0===O.z)return A&&A.copyFromFloats(0,0,0,1),!1;if(A){var V=1/O.x,z=1/O.y,U=1/O.z;t.FromValuesToRef(R[0]*V,R[1]*V,R[2]*V,0,R[4]*z,R[5]*z,R[6]*z,0,R[8]*U,R[9]*U,R[10]*U,0,0,0,0,1,Ut.Matrix[0]),Mt.FromRotationMatrixToRef(Ut.Matrix[0],A)}return!0},t.prototype.getRow=function(x){if(x<0||x>3)return null;var A=4*x;return new Ft(this._m[A+0],this._m[A+1],this._m[A+2],this._m[A+3])},t.prototype.setRow=function(x,A){return this.setRowFromFloats(x,A.x,A.y,A.z,A.w)},t.prototype.transpose=function(){return t.Transpose(this)},t.prototype.transposeToRef=function(x){return t.TransposeToRef(this,x),this},t.prototype.setRowFromFloats=function(x,A,E,R,O){if(x<0||x>3)return this;var V=4*x;return this._m[V+0]=A,this._m[V+1]=E,this._m[V+2]=R,this._m[V+3]=O,this._markAsUpdated(),this},t.prototype.scale=function(x){var A=new t;return this.scaleToRef(x,A),A},t.prototype.scaleToRef=function(x,A){for(var E=0;E<16;E++)A._m[E]=this._m[E]*x;return A._markAsUpdated(),this},t.prototype.scaleAndAddToRef=function(x,A){for(var E=0;E<16;E++)A._m[E]+=this._m[E]*x;return A._markAsUpdated(),this},t.prototype.toNormalMatrix=function(x){var A=Ut.Matrix[0];this.invertToRef(A),A.transposeToRef(x);var E=x._m;t.FromValuesToRef(E[0],E[1],E[2],0,E[4],E[5],E[6],0,E[8],E[9],E[10],0,0,0,0,1,x)},t.prototype.getRotationMatrix=function(){var x=new t;return this.getRotationMatrixToRef(x),x},t.prototype.getRotationMatrixToRef=function(x){var A=Ut.Vector3[0];if(!this.decompose(A))return t.IdentityToRef(x),this;var E=this._m,R=1/A.x,O=1/A.y,V=1/A.z;return t.FromValuesToRef(E[0]*R,E[1]*R,E[2]*R,0,E[4]*O,E[5]*O,E[6]*O,0,E[8]*V,E[9]*V,E[10]*V,0,0,0,0,1,x),this},t.prototype.toggleModelMatrixHandInPlace=function(){var x=this._m;x[2]*=-1,x[6]*=-1,x[8]*=-1,x[9]*=-1,x[14]*=-1,this._markAsUpdated()},t.prototype.toggleProjectionMatrixHandInPlace=function(){var x=this._m;x[8]*=-1,x[9]*=-1,x[10]*=-1,x[11]*=-1,this._markAsUpdated()},t.prototype._updateIdentityStatus=function(x,A,E,R){void 0===A&&(A=!1),void 0===E&&(E=!1),void 0===R&&(R=!0),this.updateFlag=t._updateFlagSeed++,this._isIdentity=x,this._isIdentity3x2=x||E,this._isIdentityDirty=!this._isIdentity&&A,this._isIdentity3x2Dirty=!this._isIdentity3x2&&R},t._updateFlagSeed=0,t._identityReadOnly=t.Identity(),t}(),Mt=function(){function t(x,A,E,R){void 0===x&&(x=0),void 0===A&&(A=0),void 0===E&&(E=0),void 0===R&&(R=1),this.x=x,this.y=A,this.z=E,this.w=R}return t.FromRotationMatrix=function(x){var A=new t;return t.FromRotationMatrixToRef(x,A),A},t.FromRotationMatrixToRef=function(x,A){var E,R=x.m,O=R[0],V=R[4],z=R[8],U=R[1],Q=R[5],W=R[9],H=R[2],$=R[6],G=R[10],X=O+Q+G;X>0?(E=.5/Math.sqrt(X+1),A.w=.25/E,A.x=($-W)*E,A.y=(z-H)*E,A.z=(U-V)*E):O>Q&&O>G?(E=2*Math.sqrt(1+O-Q-G),A.w=($-W)/E,A.x=.25*E,A.y=(V+U)/E,A.z=(z+H)/E):Q>G?(E=2*Math.sqrt(1+Q-O-G),A.w=(z-H)/E,A.x=(V+U)/E,A.y=.25*E,A.z=(W+$)/E):(E=2*Math.sqrt(1+G-O-Q),A.w=(U-V)/E,A.x=(z+H)/E,A.y=(W+$)/E,A.z=.25*E)},t.Dot=function(x,A){return x.x*A.x+x.y*A.y+x.z*A.z+x.w*A.w},t.AreClose=function(x,A){return t.Dot(x,A)>=0},t.Zero=function(){return new t(0,0,0,0)},t.Inverse=function(x){return new t(-x.x,-x.y,-x.z,x.w)},t.IsIdentity=function(x){return x&&0===x.x&&0===x.y&&0===x.z&&1===x.w},t.RotationAxis=function(x,A){var E=A*Dt;return t.RotationAxisToRef(x,E,new t)},t.RotationAxisToRef=function(x,A,E){var R=A*Dt,O=Math.sin(R/2);return x.normalize(),E.w=Math.cos(R/2),E.x=x.x*O,E.y=x.y*O,E.z=x.z*O,E},t.FromArray=function(x,A){return void 0===A&&(A=0),new t(x[A],x[A+1],x[A+2],x[A+3])},t.FromEulerAnglesRef=function(x,A,E,R){return t.RotationYawPitchRollToRef(A*Dt,x*Dt,E*Dt,R)},t.RotationYawPitchRoll=function(x,A,E){var R=new t;return t.RotationYawPitchRollToRef(x,A,E,R),R},t.RotationYawPitchRollToRef=function(x,A,E,R){var O=.5*A,V=.5*x,z=.5*E,U=Math.cos(O),Q=Math.cos(V),W=Math.cos(z),H=Math.sin(O),$=Math.sin(V),G=Math.sin(z);R.x=Q*H*W+$*U*G,R.y=$*U*W-Q*H*G,R.z=Q*U*G-$*H*W,R.w=Q*U*W+$*H*G},t.RotationAlphaBetaGamma=function(x,A,E){var R=new t;return t.RotationAlphaBetaGammaToRef(x,A,E,R),R},t.RotationAlphaBetaGammaToRef=function(x,A,E,R){var O=.5*(E+x),V=.5*(E-x),z=.5*A;R.x=Math.cos(V)*Math.sin(z),R.y=Math.sin(V)*Math.sin(z),R.z=Math.sin(O)*Math.cos(z),R.w=Math.cos(O)*Math.cos(z)},t.RotationQuaternionFromAxis=function(x,A,E){var R=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(x,A,E,R),R},t.RotationQuaternionFromAxisToRef=function(x,A,E,R){var O=Ut.Matrix[0];Nt.FromXYZAxesToRef(x.normalize(),A.normalize(),E.normalize(),O),t.FromRotationMatrixToRef(O,R)},t.Slerp=function(x,A,E){var R=t.Identity;return t.SlerpToRef(x,A,E,R),R},t.SlerpToRef=function(x,A,E,R){var O,V,z=x.x*A.x+x.y*A.y+x.z*A.z+x.w*A.w,U=!1;if(z<0&&(U=!0,z=-z),z>.999999)V=1-E,O=U?-E:E;else{var Q=Math.acos(z),W=1/Math.sin(Q);V=Math.sin((1-E)*Q)*W,O=U?-Math.sin(E*Q)*W:Math.sin(E*Q)*W}R.x=V*x.x+O*A.x,R.y=V*x.y+O*A.y,R.z=V*x.z+O*A.z,R.w=V*x.w+O*A.w},t.Hermite=function(x,A,E,R,O){var V=O*O,z=O*V,U=2*z-3*V+1,Q=-2*z+3*V,W=z-2*V+O,H=z-V;return new t(x.x*U+E.x*Q+A.x*W+R.x*H,x.y*U+E.y*Q+A.y*W+R.y*H,x.z*U+E.z*Q+A.z*W+R.z*H,x.w*U+E.w*Q+A.w*W+R.w*H)},Object.defineProperty(t,"Identity",{get:function(){return new t(0,0,0,1)},enumerable:!1,configurable:!0}),t.Angle=function(x,A){var E=t.Dot(x,A);return 2*Math.acos(Math.min(Math.abs(E),1))*Lt},t.Euler=function(x,A,E){return t.RotationYawPitchRoll(A*Dt,x*Dt,E*Dt)},t.LookRotation=function(x,A){void 0===A&&(A=Ut.staticUp);var E=jt.Normalize(x),R=jt.Normalize(jt.Cross(A,E)),O=jt.Cross(E,R),V=R.x,z=R.y,U=R.z,Q=O.x,W=O.y,H=O.z,$=E.x,G=E.y,X=E.z,K=V+W+X,J=new t;if(K>0){var Z=Math.sqrt(K+1);return J.w=.5*Z,Z=.5/Z,J.x=(H-G)*Z,J.y=($-U)*Z,J.z=(z-Q)*Z,J}if(V>=W&&V>=X){var et=Math.sqrt(1+V-W-X),nt=.5/et;return J.x=.5*et,J.y=(z+Q)*nt,J.z=(U+$)*nt,J.w=(H-G)*nt,J}if(W>X){var ot=Math.sqrt(1+W-V-X),it=.5/ot;return J.x=(Q+z)*it,J.y=.5*ot,J.z=(G+H)*it,J.w=($-U)*it,J}var rt=Math.sqrt(1+X-V-W),st=.5/rt;return J.x=($+U)*st,J.y=(G+H)*st,J.z=.5*rt,J.w=(z-Q)*st,J},t.RotateTowards=function(x,A,E){var R=t.Angle(x,A);if(0===R)return A;var O=Math.min(1,E/R);return t.Slerp(x,A,O)},t.FromToRotation=function(x,A,E){void 0===E&&(E=Ut.staticUp);var R=x.normalize(),O=A.normalize(),V=jt.Cross(R,O),z=Math.sqrt(R.lengthSquared()*O.lengthSquared())+jt.Dot(R,O);return V.lengthSquared()<1e-4?Math.abs(z)<1e-4?new t(E.x,E.y,E.z,0).normalized:t.Identity:new t(V.x,V.y,V.z,z).normalized},Object.defineProperty(t.prototype,"normalized",{get:function(){return this.normalize()},enumerable:!1,configurable:!0}),t.prototype.setFromToRotation=function(x,A,E){void 0===E&&(E=Ut.staticUp);var R=t.FromToRotation(x,A,E);this.x=R.x,this.y=R.y,this.z=R.z,this.w=R.w},Object.defineProperty(t.prototype,"eulerAngles",{get:function(){var x=new jt,A=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w,E=this.x*this.w-this.y*this.z;return E>.4995*A?(x.x=Math.PI/2,x.y=2*Math.atan2(this.y,this.x),x.z=0):E<-.4995*A?(x.x=-Math.PI/2,x.y=-2*Math.atan2(this.y,this.x),x.z=0):(x.x=Math.asin(2*(this.w*this.x-this.y*this.z)),x.y=Math.atan2(2*this.w*this.y+2*this.z*this.x,1-2*(this.x*this.x+this.y*this.y)),x.z=Math.atan2(2*this.w*this.z+2*this.x*this.y,1-2*(this.z*this.z+this.x*this.x))),x.x*=Lt,x.y*=Lt,x.z*=Lt,x.x=Bt.Repeat(x.x,360),x.y=Bt.Repeat(x.y,360),x.z=Bt.Repeat(x.z,360),x},set:function(x){this.setEuler(x.x,x.y,x.z)},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},enumerable:!1,configurable:!0}),t.prototype.getClassName=function(){return"Quaternion"},t.prototype.getHashCode=function(){var x=this.x||0;return 397*(x=397*(x=397*x^(this.y||0))^(this.z||0))^(this.w||0)},t.prototype.asArray=function(){return[this.x,this.y,this.z,this.w]},t.prototype.equals=function(x){return x&&this.x===x.x&&this.y===x.y&&this.z===x.z&&this.w===x.w},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(x){return this.x=x.x,this.y=x.y,this.z=x.z,this.w=x.w,this},t.prototype.copyFromFloats=function(x,A,E,R){return this.x=x,this.y=A,this.z=E,this.w=R,this},t.prototype.set=function(x,A,E,R){return this.copyFromFloats(x,A,E,R)},t.prototype.setEuler=function(x,A,E){return t.RotationYawPitchRollToRef(A*Dt,x*Dt,E*Dt,this),this},t.prototype.add=function(x){return new t(this.x+x.x,this.y+x.y,this.z+x.z,this.w+x.w)},t.prototype.addInPlace=function(x){return this.x+=x.x,this.y+=x.y,this.z+=x.z,this.w+=x.w,this},t.prototype.subtract=function(x){return new t(this.x-x.x,this.y-x.y,this.z-x.z,this.w-x.w)},t.prototype.scale=function(x){return new t(this.x*x,this.y*x,this.z*x,this.w*x)},t.prototype.scaleToRef=function(x,A){return A.x=this.x*x,A.y=this.y*x,A.z=this.z*x,A.w=this.w*x,this},t.prototype.scaleInPlace=function(x){return this.x*=x,this.y*=x,this.z*=x,this.w*=x,this},t.prototype.scaleAndAddToRef=function(x,A){return A.x+=this.x*x,A.y+=this.y*x,A.z+=this.z*x,A.w+=this.w*x,this},t.prototype.multiply=function(x){var A=new t(0,0,0,1);return this.multiplyToRef(x,A),A},t.prototype.multiplyToRef=function(x,A){var E=this.x*x.w+this.y*x.z-this.z*x.y+this.w*x.x,R=-this.x*x.z+this.y*x.w+this.z*x.x+this.w*x.y,O=this.x*x.y-this.y*x.x+this.z*x.w+this.w*x.z,V=-this.x*x.x-this.y*x.y-this.z*x.z+this.w*x.w;return A.copyFromFloats(E,R,O,V),this},t.prototype.multiplyInPlace=function(x){return this.multiplyToRef(x,this),this},t.prototype.conjugateToRef=function(x){return x.copyFromFloats(-this.x,-this.y,-this.z,this.w),this},t.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.prototype.conjugate=function(){return new t(-this.x,-this.y,-this.z,this.w)},t.prototype.normalize=function(){var x=1/this.length;return this.x*=x,this.y*=x,this.z*=x,this.w*=x,this},t.prototype.angleAxis=function(x,A){if(0===A.lengthSquared())return t.Identity;var E=t.Identity,R=x*Dt;R*=.5;var O=A.normalize();return O=A.scaleInPlace(Math.sin(R)),E.x=O.x,E.y=O.y,E.z=O.z,E.w=Math.cos(R),E.normalize()},t.prototype.toRotationMatrix=function(x){return Nt.FromQuaternionToRef(this,x),this},t.prototype.fromRotationMatrix=function(x){return t.FromRotationMatrixToRef(x,this),this},t}(),jt=function(){function t(x,A,E){void 0===x&&(x=0),void 0===A&&(A=0),void 0===E&&(E=0),this.x=x,this.y=A,this.z=E}return Object.defineProperty(t.prototype,"isNonUniform",{get:function(){var x=Math.abs(this.x),A=Math.abs(this.y);if(x!==A)return!0;var E=Math.abs(this.z);return x!==E||A!==E},enumerable:!1,configurable:!0}),t.Add=function(x,A){return new t(x.x,x.y,x.z).addInPlace(A)},t.GetClipFactor=function(x,A,E,R){var O=t.Dot(x,E)-R;return O/(O-(t.Dot(A,E)-R))},t.GetAngleBetweenVectors=function(x,A,E){var R=x.normalizeToRef(Ut.Vector3[1]),O=A.normalizeToRef(Ut.Vector3[2]),V=t.Dot(R,O),z=Ut.Vector3[3];return t.CrossToRef(R,O,z),t.Dot(z,E)>0?Math.acos(V):-Math.acos(V)},t.FromArray=function(x,A){return void 0===A&&(A=0),new t(x[A],x[A+1],x[A+2])},t.FromFloatArray=function(x,A){return t.FromArray(x,A)},t.FromArrayToRef=function(x,A,E){E.x=x[A],E.y=x[A+1],E.z=x[A+2]},t.FromFloatArrayToRef=function(x,A,E){return t.FromArrayToRef(x,A,E)},t.FromFloatsToRef=function(x,A,E,R){R.copyFromFloats(x,A,E)},t.Zero=function(){return new t(0,0,0)},t.One=function(){return new t(1,1,1)},t.Up=function(){return new t(0,1,0)},t.Down=function(){return new t(0,-1,0)},t.Forward=function(){return new t(0,0,1)},t.Backward=function(){return new t(0,0,-1)},t.Right=function(){return new t(1,0,0)},t.Left=function(){return new t(-1,0,0)},t.TransformCoordinates=function(x,A){var E=t.Zero();return t.TransformCoordinatesToRef(x,A,E),E},t.TransformCoordinatesToRef=function(x,A,E){return t.TransformCoordinatesFromFloatsToRef(x.x,x.y,x.z,A,E)},t.TransformCoordinatesFromFloatsToRef=function(x,A,E,R,O){var V=R.m,z=x*V[0]+A*V[4]+E*V[8]+V[12],U=x*V[1]+A*V[5]+E*V[9]+V[13],Q=x*V[2]+A*V[6]+E*V[10]+V[14],W=1/(x*V[3]+A*V[7]+E*V[11]+V[15]);O.x=z*W,O.y=U*W,O.z=Q*W},t.TransformNormal=function(x,A){var E=t.Zero();return t.TransformNormalToRef(x,A,E),E},t.TransformNormalToRef=function(x,A,E){this.TransformNormalFromFloatsToRef(x.x,x.y,x.z,A,E)},t.TransformNormalFromFloatsToRef=function(x,A,E,R,O){var V=R.m;O.x=x*V[0]+A*V[4]+E*V[8],O.y=x*V[1]+A*V[5]+E*V[9],O.z=x*V[2]+A*V[6]+E*V[10]},t.CatmullRom=function(x,A,E,R,O){var V=O*O,z=O*V;return new t(.5*(2*A.x+(-x.x+E.x)*O+(2*x.x-5*A.x+4*E.x-R.x)*V+(-x.x+3*A.x-3*E.x+R.x)*z),.5*(2*A.y+(-x.y+E.y)*O+(2*x.y-5*A.y+4*E.y-R.y)*V+(-x.y+3*A.y-3*E.y+R.y)*z),.5*(2*A.z+(-x.z+E.z)*O+(2*x.z-5*A.z+4*E.z-R.z)*V+(-x.z+3*A.z-3*E.z+R.z)*z))},t.Clamp=function(x,A,E){var R=new t;return t.ClampToRef(x,A,E,R),R},t.ClampToRef=function(x,A,E,R){var O=x.x;O=(O=O>E.x?E.x:O)<A.x?A.x:O;var V=x.y;V=(V=V>E.y?E.y:V)<A.y?A.y:V;var z=x.z;z=(z=z>E.z?E.z:z)<A.z?A.z:z,R.copyFromFloats(O,V,z)},t.Hermite=function(x,A,E,R,O){var V=O*O,z=O*V,U=2*z-3*V+1,Q=-2*z+3*V,W=z-2*V+O,H=z-V;return new t(x.x*U+E.x*Q+A.x*W+R.x*H,x.y*U+E.y*Q+A.y*W+R.y*H,x.z*U+E.z*Q+A.z*W+R.z*H)},t.Lerp=function(x,A,E){var R=new t(0,0,0);return t.LerpToRef(x,A,E,R),R},t.LerpToRef=function(x,A,E,R){R.x=x.x+(A.x-x.x)*E,R.y=x.y+(A.y-x.y)*E,R.z=x.z+(A.z-x.z)*E},t.Dot=function(x,A){return x.x*A.x+x.y*A.y+x.z*A.z},t.Cross=function(x,A){var E=t.Zero();return t.CrossToRef(x,A,E),E},t.CrossToRef=function(x,A,E){var R=x.y*A.z-x.z*A.y,O=x.z*A.x-x.x*A.z,V=x.x*A.y-x.y*A.x;E.copyFromFloats(R,O,V)},t.Normalize=function(x){var A=t.Zero();return t.NormalizeToRef(x,A),A},t.NormalizeToRef=function(x,A){x.normalizeToRef(A)},t.Minimize=function(x,A){var E=new t(x.x,x.y,x.z);return E.minimizeInPlace(A),E},t.Maximize=function(x,A){var E=new t(x.x,x.y,x.z);return E.maximizeInPlace(A),E},t.Distance=function(x,A){return Math.sqrt(t.DistanceSquared(x,A))},t.DistanceSquared=function(x,A){var E=x.x-A.x,R=x.y-A.y,O=x.z-A.z;return E*E+R*R+O*O},t.Center=function(x,A){var E=t.Add(x,A);return E.scaleInPlace(.5),E},t.RotationFromAxis=function(x,A,E){var R=t.Zero();return t.RotationFromAxisToRef(x,A,E,R),R},t.RotationFromAxisToRef=function(x,A,E,R){var O=Ut.Quaternion[0];Mt.RotationQuaternionFromAxisToRef(x,A,E,O),R.copyFrom(O.eulerAngles)},t.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},t.prototype.getClassName=function(){return"Vector3"},t.prototype.getHashCode=function(){var x=this.x||0;return 397*(x=397*x^(this.y||0))^(this.z||0)},t.prototype.asArray=function(){var x=[];return this.toArray(x,0),x},t.prototype.toArray=function(x,A){return void 0===A&&(A=0),x[A]=this.x,x[A+1]=this.y,x[A+2]=this.z,this},t.prototype.toQuaternion=function(){return Mt.Identity.setEuler(this.y,this.x,this.z)},t.prototype.addInPlace=function(x){return this.addInPlaceFromFloats(x.x,x.y,x.z)},t.prototype.addInPlaceFromFloats=function(x,A,E){return this.x+=x,this.y+=A,this.z+=E,this},t.prototype.add=function(x){return new t(this.x+x.x,this.y+x.y,this.z+x.z)},t.prototype.addToRef=function(x,A){return A.copyFromFloats(this.x+x.x,this.y+x.y,this.z+x.z)},t.prototype.subtractInPlace=function(x){return this.x-=x.x,this.y-=x.y,this.z-=x.z,this},t.prototype.subtract=function(x){return new t(this.x-x.x,this.y-x.y,this.z-x.z)},t.prototype.subtractToRef=function(x,A){return this.subtractFromFloatsToRef(x.x,x.y,x.z,A)},t.prototype.subtractFromFloats=function(x,A,E){return new t(this.x-x,this.y-A,this.z-E)},t.prototype.subtractFromFloatsToRef=function(x,A,E,R){return R.copyFromFloats(this.x-x,this.y-A,this.z-E)},t.prototype.applyMatrix4=function(x){this.applyMatrix4ToRef(x,this)},t.prototype.applyMatrix4ToRef=function(x,A){var E=this,R=E.x,O=E.y,V=E.z,z=x.m,U=1/(z[3]*R+z[7]*O+z[11]*V+z[15]);return A.x=(z[0]*R+z[4]*O+z[8]*V+z[12])*U,A.y=(z[1]*R+z[5]*O+z[9]*V+z[13])*U,A.z=(z[2]*R+z[6]*O+z[10]*V+z[14])*U,A},t.prototype.rotate=function(x){return this.rotateToRef(x,this)},t.prototype.rotateToRef=function(x,A){var E=this,R=E.x,O=E.y,V=E.z,z=x.x,U=x.y,Q=x.z,W=x.w,H=W*R+U*V-Q*O,$=W*O+Q*R-z*V,G=W*V+z*O-U*R,X=-z*R-U*O-Q*V;return A.x=H*W+X*-z+$*-Q-G*-U,A.y=$*W+X*-U+G*-z-H*-Q,A.z=G*W+X*-Q+H*-U-$*-z,A},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z)},t.prototype.scaleInPlace=function(x){return this.x*=x,this.y*=x,this.z*=x,this},t.prototype.scale=function(x){return new t(this.x*x,this.y*x,this.z*x)},t.prototype.scaleToRef=function(x,A){return A.copyFromFloats(this.x*x,this.y*x,this.z*x)},t.prototype.scaleAndAddToRef=function(x,A){return A.addInPlaceFromFloats(this.x*x,this.y*x,this.z*x)},t.prototype.equals=function(x){return x&&this.x===x.x&&this.y===x.y&&this.z===x.z},t.prototype.equalsWithEpsilon=function(x,A){return void 0===A&&(A=kt),x&&Bt.WithinEpsilon(this.x,x.x,A)&&Bt.WithinEpsilon(this.y,x.y,A)&&Bt.WithinEpsilon(this.z,x.z,A)},t.prototype.equalsToFloats=function(x,A,E){return this.x===x&&this.y===A&&this.z===E},t.prototype.multiplyInPlace=function(x){return this.x*=x.x,this.y*=x.y,this.z*=x.z,this},t.prototype.multiply=function(x){return this.multiplyByFloats(x.x,x.y,x.z)},t.prototype.multiplyToRef=function(x,A){return A.copyFromFloats(this.x*x.x,this.y*x.y,this.z*x.z)},t.prototype.multiplyByFloats=function(x,A,E){return new t(this.x*x,this.y*A,this.z*E)},t.prototype.divide=function(x){return new t(this.x/x.x,this.y/x.y,this.z/x.z)},t.prototype.divideToRef=function(x,A){return A.copyFromFloats(this.x/x.x,this.y/x.y,this.z/x.z)},t.prototype.divideInPlace=function(x){return this.divideToRef(x,this)},t.prototype.minimizeInPlace=function(x){return this.minimizeInPlaceFromFloats(x.x,x.y,x.z)},t.prototype.maximizeInPlace=function(x){return this.maximizeInPlaceFromFloats(x.x,x.y,x.z)},t.prototype.minimizeInPlaceFromFloats=function(x,A,E){return x<this.x&&(this.x=x),A<this.y&&(this.y=A),E<this.z&&(this.z=E),this},t.prototype.maximizeInPlaceFromFloats=function(x,A,E){return x>this.x&&(this.x=x),A>this.y&&(this.y=A),E>this.z&&(this.z=E),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.prototype.normalize=function(){return this.normalizeFromLength(this.length())},t.prototype.normalizeFromLength=function(x){return 0===x||1===x?this:this.scaleInPlace(1/x)},t.prototype.normalizeToNew=function(){var x=new t(0,0,0);return this.normalizeToRef(x),x},t.prototype.normalizeToRef=function(x){var A=this.length();return 0===A||1===A?x.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/A,x)},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.copyFrom=function(x){return this.copyFromFloats(x.x,x.y,x.z)},t.prototype.copyFromFloats=function(x,A,E){return this.x=x,this.y=A,this.z=E,this},t.prototype.set=function(x,A,E){return this.copyFromFloats(x,A,E)},t.prototype.setAll=function(x){return this.x=this.y=this.z=x,this},t}(),Ut={Vector3:v(6,jt.Zero),Matrix:v(2,Nt.Identity),Quaternion:v(3,Mt.Zero),staticUp:jt.Up(),tmpMatrix:Nt.Zero()},Qt=function(){function t(x){this._radians=x,this._radians<0&&(this._radians+=2*Math.PI)}return t.BetweenTwoPoints=function(x,A){var E=A.subtract(x);return new t(Math.atan2(E.y,E.x))},t.FromRadians=function(x){return new t(x)},t.FromDegrees=function(x){return new t(x*Math.PI/180)},t.prototype.degrees=function(){return 180*this._radians/Math.PI},t.prototype.radians=function(){return this._radians},t}(),qt=function(){function t(x,A){void 0===x&&(x=0),void 0===A&&(A=0),this.x=x,this.y=A}return t.Zero=function(){return new t(0,0)},t.One=function(){return new t(1,1)},t.Add=function(x,A){return new t(x.x,x.y).addInPlace(A)},t.FromArray=function(x,A){return void 0===A&&(A=0),new t(x[A],x[A+1])},t.FromArrayToRef=function(x,A,E){E.x=x[A],E.y=x[A+1]},t.CatmullRom=function(x,A,E,R,O){var V=O*O,z=O*V;return new t(.5*(2*A.x+(-x.x+E.x)*O+(2*x.x-5*A.x+4*E.x-R.x)*V+(-x.x+3*A.x-3*E.x+R.x)*z),.5*(2*A.y+(-x.y+E.y)*O+(2*x.y-5*A.y+4*E.y-R.y)*V+(-x.y+3*A.y-3*E.y+R.y)*z))},t.Clamp=function(x,A,E){var R=x.x;R=(R=R>E.x?E.x:R)<A.x?A.x:R;var O=x.y;return new t(R,O=(O=O>E.y?E.y:O)<A.y?A.y:O)},t.Hermite=function(x,A,E,R,O){var V=O*O,z=O*V,U=2*z-3*V+1,Q=-2*z+3*V,W=z-2*V+O,H=z-V;return new t(x.x*U+E.x*Q+A.x*W+R.x*H,x.y*U+E.y*Q+A.y*W+R.y*H)},t.Lerp=function(x,A,E){return new t(x.x+(A.x-x.x)*E,x.y+(A.y-x.y)*E)},t.Dot=function(x,A){return x.x*A.x+x.y*A.y},t.Normalize=function(x){var A=new t(x.x,x.y);return A.normalize(),A},t.Minimize=function(x,A){return new t(x.x<A.x?x.x:A.x,x.y<A.y?x.y:A.y)},t.Maximize=function(x,A){return new t(x.x>A.x?x.x:A.x,x.y>A.y?x.y:A.y)},t.Transform=function(x,A){var E=t.Zero();return t.TransformToRef(x,A,E),E},t.TransformToRef=function(x,A,E){var R=A.m,O=x.x*R[0]+x.y*R[4]+R[12],V=x.x*R[1]+x.y*R[5]+R[13];E.x=O,E.y=V},t.PointInTriangle=function(x,A,E,R){var O=.5*(-E.y*R.x+A.y*(-E.x+R.x)+A.x*(E.y-R.y)+E.x*R.y),V=O<0?-1:1,z=(A.y*R.x-A.x*R.y+(R.y-A.y)*x.x+(A.x-R.x)*x.y)*V,U=(A.x*E.y-A.y*E.x+(A.y-E.y)*x.x+(E.x-A.x)*x.y)*V;return z>0&&U>0&&z+U<2*O*V},t.Distance=function(x,A){return Math.sqrt(t.DistanceSquared(x,A))},t.DistanceSquared=function(x,A){var E=x.x-A.x,R=x.y-A.y;return E*E+R*R},t.Center=function(x,A){var E=t.Add(x,A);return E.scaleInPlace(.5),E},t.DistanceOfPointFromSegment=function(x,A,E){var R=t.DistanceSquared(A,E);if(0===R)return t.Distance(x,A);var O=E.subtract(A),V=Math.max(0,Math.min(1,t.Dot(x.subtract(A),O)/R)),z=A.add(O.multiplyByFloats(V,V));return t.Distance(x,z)},t.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+"}"},t.prototype.getClassName=function(){return"Vector2"},t.prototype.getHashCode=function(){return 397*(this.x||0)^(this.y||0)},t.prototype.toArray=function(x,A){return void 0===A&&(A=0),x[A]=this.x,x[A+1]=this.y,this},t.prototype.asArray=function(){var x=new Array;return this.toArray(x,0),x},t.prototype.copyFrom=function(x){return this.x=x.x,this.y=x.y,this},t.prototype.copyFromFloats=function(x,A){return this.x=x,this.y=A,this},t.prototype.set=function(x,A){return this.copyFromFloats(x,A)},t.prototype.add=function(x){return new t(this.x+x.x,this.y+x.y)},t.prototype.addToRef=function(x,A){return A.x=this.x+x.x,A.y=this.y+x.y,this},t.prototype.addInPlace=function(x){return this.x+=x.x,this.y+=x.y,this},t.prototype.addVector3=function(x){return new t(this.x+x.x,this.y+x.y)},t.prototype.subtract=function(x){return new t(this.x-x.x,this.y-x.y)},t.prototype.subtractToRef=function(x,A){return A.x=this.x-x.x,A.y=this.y-x.y,this},t.prototype.subtractInPlace=function(x){return this.x-=x.x,this.y-=x.y,this},t.prototype.multiplyInPlace=function(x){return this.x*=x.x,this.y*=x.y,this},t.prototype.multiply=function(x){return new t(this.x*x.x,this.y*x.y)},t.prototype.multiplyToRef=function(x,A){return A.x=this.x*x.x,A.y=this.y*x.y,this},t.prototype.multiplyByFloats=function(x,A){return new t(this.x*x,this.y*A)},t.prototype.divide=function(x){return new t(this.x/x.x,this.y/x.y)},t.prototype.divideToRef=function(x,A){return A.x=this.x/x.x,A.y=this.y/x.y,this},t.prototype.divideInPlace=function(x){return this.divideToRef(x,this)},t.prototype.negate=function(){return new t(-this.x,-this.y)},t.prototype.scaleInPlace=function(x){return this.x*=x,this.y*=x,this},t.prototype.scale=function(x){var A=new t(0,0);return this.scaleToRef(x,A),A},t.prototype.scaleToRef=function(x,A){return A.x=this.x*x,A.y=this.y*x,this},t.prototype.scaleAndAddToRef=function(x,A){return A.x+=this.x*x,A.y+=this.y*x,this},t.prototype.equals=function(x){return x&&this.x===x.x&&this.y===x.y},t.prototype.equalsWithEpsilon=function(x,A){return void 0===A&&(A=kt),x&&Bt.WithinEpsilon(this.x,x.x,A)&&Bt.WithinEpsilon(this.y,x.y,A)},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var x=this.length();if(0===x)return this;var A=1/x;return this.x*=A,this.y*=A,this},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),zt=function(A,E,R){this.startPoint=A,this.midPoint=E,this.endPoint=R;var O=Math.pow(E.x,2)+Math.pow(E.y,2),V=(Math.pow(A.x,2)+Math.pow(A.y,2)-O)/2,z=(O-Math.pow(R.x,2)-Math.pow(R.y,2))/2,U=(A.x-E.x)*(E.y-R.y)-(E.x-R.x)*(A.y-E.y);this.centerPoint=new qt((V*(E.y-R.y)-z*(A.y-E.y))/U,((A.x-E.x)*z-(E.x-R.x)*V)/U),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=Qt.BetweenTwoPoints(this.centerPoint,this.startPoint);var Q=this.startAngle.degrees(),W=Qt.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),H=Qt.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();W-Q>180&&(W-=360),W-Q<-180&&(W+=360),H-W>180&&(H-=360),H-W<-180&&(H+=360),this.orientation=W-Q<0?x.Orientation.CW:x.Orientation.CCW,this.angle=Qt.FromDegrees(this.orientation===x.Orientation.CW?Q-H:H-Q)},Wt=function(){function t(){}return t.X=new jt(1,0,0),t.Y=new jt(0,1,0),t.Z=new jt(0,0,1),t}(),Ht=function(){function t(){}return t.Interpolate=function(x,A,E,R,O){for(var V=1-3*R+3*A,z=3*R-6*A,U=3*A,Q=x,W=0;W<5;W++){var H=Q*Q;Q-=1/(3*V*H+2*z*Q+U)*(V*(H*Q)+z*H+U*Q-x),Q=Math.min(1,Math.max(0,Q))}return 3*Math.pow(1-Q,2)*Q*E+3*(1-Q)*Math.pow(Q,2)*O+Math.pow(Q,3)},t}(),$t=function(){function t(x,A,E,R){void 0===x&&(x=0),void 0===A&&(A=0),void 0===E&&(E=0),void 0===R&&(R=1),this.r=x,this.g=A,this.b=E,this.a=R}return t.FromHexString=function(x){if("#"!==x.substring(0,1)||9!==x.length)return new t(0,0,0,0);var A=parseInt(x.substring(1,3),16),E=parseInt(x.substring(3,5),16),R=parseInt(x.substring(5,7),16),O=parseInt(x.substring(7,9),16);return t.FromInts(A,E,R,O)},t.Lerp=function(x,A,E){var R=new t(0,0,0,0);return t.LerpToRef(x,A,E,R),R},t.LerpToRef=function(x,A,E,R){R.r=x.r+(A.r-x.r)*E,R.g=x.g+(A.g-x.g)*E,R.b=x.b+(A.b-x.b)*E,R.a=x.a+(A.a-x.a)*E},t.Red=function(){return new t(1,0,0,1)},t.Green=function(){return new t(0,1,0,1)},t.Blue=function(){return new t(0,0,1,1)},t.Black=function(){return new t(0,0,0,1)},t.White=function(){return new t(1,1,1,1)},t.Purple=function(){return new t(.5,0,.5,1)},t.Magenta=function(){return new t(1,0,1,1)},t.Yellow=function(){return new t(1,1,0,1)},t.Gray=function(){return new t(.5,.5,.5,1)},t.Teal=function(){return new t(0,1,1,1)},t.Clear=function(){return new t(0,0,0,0)},t.FromColor3=function(x,A){return void 0===A&&(A=1),new t(x.r,x.g,x.b,A)},t.FromArray=function(x,A){return void 0===A&&(A=0),new t(x[A],x[A+1],x[A+2],x[A+3])},t.FromInts=function(x,A,E,R){return new t(x/255,A/255,E/255,R/255)},t.CheckColors4=function(x,A){if(x.length===3*A){for(var E=[],R=0;R<x.length;R+=3){var O=R/3*4;E[O]=x[R],E[O+1]=x[R+1],E[O+2]=x[R+2],E[O+3]=1}return E}return x},t.prototype.addInPlace=function(x){return this.r+=x.r,this.g+=x.g,this.b+=x.b,this.a+=x.a,this},t.prototype.asArray=function(){var x=new Array;return this.toArray(x,0),x},t.prototype.toArray=function(x,A){return void 0===A&&(A=0),x[A]=this.r,x[A+1]=this.g,x[A+2]=this.b,x[A+3]=this.a,this},t.prototype.add=function(x){return new t(this.r+x.r,this.g+x.g,this.b+x.b,this.a+x.a)},t.prototype.subtract=function(x){return new t(this.r-x.r,this.g-x.g,this.b-x.b,this.a-x.a)},t.prototype.subtractToRef=function(x,A){return A.r=this.r-x.r,A.g=this.g-x.g,A.b=this.b-x.b,A.a=this.a-x.a,this},t.prototype.scale=function(x){return new t(this.r*x,this.g*x,this.b*x,this.a*x)},t.prototype.scaleToRef=function(x,A){return A.r=this.r*x,A.g=this.g*x,A.b=this.b*x,A.a=this.a*x,this},t.prototype.scaleAndAddToRef=function(x,A){return A.r+=this.r*x,A.g+=this.g*x,A.b+=this.b*x,A.a+=this.a*x,this},t.prototype.clampToRef=function(x,A,E){return void 0===x&&(x=0),void 0===A&&(A=1),E.r=Bt.Clamp(this.r,x,A),E.g=Bt.Clamp(this.g,x,A),E.b=Bt.Clamp(this.b,x,A),E.a=Bt.Clamp(this.a,x,A),this},t.prototype.multiply=function(x){return new t(this.r*x.r,this.g*x.g,this.b*x.b,this.a*x.a)},t.prototype.multiplyToRef=function(x,A){return A.r=this.r*x.r,A.g=this.g*x.g,A.b=this.b*x.b,A.a=this.a*x.a,A},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"},t.prototype.getClassName=function(){return"Color4"},t.prototype.getHashCode=function(){var x=this.r||0;return 397*(x=397*(x=397*x^(this.g||0))^(this.b||0))^(this.a||0)},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.copyFrom=function(x){return this.r=x.r,this.g=x.g,this.b=x.b,this.a=x.a,this},t.prototype.copyFromFloats=function(x,A,E,R){return this.r=x,this.g=A,this.b=E,this.a=R,this},t.prototype.set=function(x,A,E,R){return this.copyFromFloats(x,A,E,R)},t.prototype.toHexString=function(){var x=255*this.r|0,A=255*this.g|0,E=255*this.b|0,R=255*this.a|0;return"#"+Bt.ToHex(x)+Bt.ToHex(A)+Bt.ToHex(E)+Bt.ToHex(R)},t.prototype.toLinearSpace=function(){var x=new t;return this.toLinearSpaceToRef(x),x},t.prototype.toLinearSpaceToRef=function(x){return x.r=Math.pow(this.r,Pt),x.g=Math.pow(this.g,Pt),x.b=Math.pow(this.b,Pt),x.a=this.a,this},t.prototype.toGammaSpace=function(){var x=new t;return this.toGammaSpaceToRef(x),x},t.prototype.toGammaSpaceToRef=function(x){return x.r=Math.pow(this.r,Vt),x.g=Math.pow(this.g,Vt),x.b=Math.pow(this.b,Vt),x.a=this.a,this},t}(),Gt=function(){function t(x,A,E){void 0===x&&(x=0),void 0===A&&(A=0),void 0===E&&(E=0),this.r=x,this.g=A,this.b=E}return t.FromHexString=function(x){if("#"!==x.substring(0,1)||7!==x.length)return new t(0,0,0);var A=parseInt(x.substring(1,3),16),E=parseInt(x.substring(3,5),16),R=parseInt(x.substring(5,7),16);return t.FromInts(A,E,R)},t.FromArray=function(x,A){return void 0===A&&(A=0),new t(x[A],x[A+1],x[A+2])},t.FromInts=function(x,A,E){return new t(x/255,A/255,E/255)},t.Lerp=function(x,A,E){var R=new t(0,0,0);return t.LerpToRef(x,A,E,R),R},t.LerpToRef=function(x,A,E,R){R.r=x.r+(A.r-x.r)*E,R.g=x.g+(A.g-x.g)*E,R.b=x.b+(A.b-x.b)*E},t.Red=function(){return new t(1,0,0)},t.Green=function(){return new t(0,1,0)},t.Blue=function(){return new t(0,0,1)},t.Black=function(){return new t(0,0,0)},t.White=function(){return new t(1,1,1)},t.Purple=function(){return new t(.5,0,.5)},t.Magenta=function(){return new t(1,0,1)},t.Yellow=function(){return new t(1,1,0)},t.Gray=function(){return new t(.5,.5,.5)},t.Teal=function(){return new t(0,1,1)},t.Random=function(){return new t(Math.random(),Math.random(),Math.random())},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"},t.prototype.getClassName=function(){return"Color3"},t.prototype.getHashCode=function(){var x=this.r||0;return 397*(x=397*x^(this.g||0))^(this.b||0)},t.prototype.toArray=function(x,A){return void 0===A&&(A=0),x[A]=this.r,x[A+1]=this.g,x[A+2]=this.b,this},t.prototype.toColor4=function(x){return void 0===x&&(x=1),new $t(this.r,this.g,this.b,x)},t.prototype.asArray=function(){var x=new Array;return this.toArray(x,0),x},t.prototype.toLuminance=function(){return.3*this.r+.59*this.g+.11*this.b},t.prototype.multiply=function(x){return new t(this.r*x.r,this.g*x.g,this.b*x.b)},t.prototype.multiplyToRef=function(x,A){return A.r=this.r*x.r,A.g=this.g*x.g,A.b=this.b*x.b,this},t.prototype.equals=function(x){return x&&this.r===x.r&&this.g===x.g&&this.b===x.b},t.prototype.equalsFloats=function(x,A,E){return this.r===x&&this.g===A&&this.b===E},t.prototype.scale=function(x){return new t(this.r*x,this.g*x,this.b*x)},t.prototype.scaleToRef=function(x,A){return A.r=this.r*x,A.g=this.g*x,A.b=this.b*x,this},t.prototype.scaleAndAddToRef=function(x,A){return A.r+=this.r*x,A.g+=this.g*x,A.b+=this.b*x,this},t.prototype.clampToRef=function(x,A,E){return void 0===x&&(x=0),void 0===A&&(A=1),E.r=Bt.Clamp(this.r,x,A),E.g=Bt.Clamp(this.g,x,A),E.b=Bt.Clamp(this.b,x,A),this},t.prototype.add=function(x){return new t(this.r+x.r,this.g+x.g,this.b+x.b)},t.prototype.addToRef=function(x,A){return A.r=this.r+x.r,A.g=this.g+x.g,A.b=this.b+x.b,this},t.prototype.subtract=function(x){return new t(this.r-x.r,this.g-x.g,this.b-x.b)},t.prototype.subtractToRef=function(x,A){return A.r=this.r-x.r,A.g=this.g-x.g,A.b=this.b-x.b,this},t.prototype.clone=function(){return new t(this.r,this.g,this.b)},t.prototype.copyFrom=function(x){return this.r=x.r,this.g=x.g,this.b=x.b,this},t.prototype.copyFromFloats=function(x,A,E){return this.r=x,this.g=A,this.b=E,this},t.prototype.set=function(x,A,E){return this.copyFromFloats(x,A,E)},t.prototype.toHexString=function(){var x=255*this.r|0,A=255*this.g|0,E=255*this.b|0;return"#"+Bt.ToHex(x)+Bt.ToHex(A)+Bt.ToHex(E)},t.prototype.toLinearSpace=function(){var x=new t;return this.toLinearSpaceToRef(x),x},t.prototype.toLinearSpaceToRef=function(x){return x.r=Math.pow(this.r,Pt),x.g=Math.pow(this.g,Pt),x.b=Math.pow(this.b,Pt),this},t.prototype.toGammaSpace=function(){var x=new t;return this.toGammaSpaceToRef(x),x},t.prototype.toGammaSpaceToRef=function(x){return x.r=Math.pow(this.r,Vt),x.g=Math.pow(this.g,Vt),x.b=Math.pow(this.b,Vt),this},t.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},t}(),Xt=function(){function t(x){this._length=0,this._points=x,this._length=this._computeLength(x)}return t.CreateQuadraticBezier=function(x,A,E,R){R=R>2?R:3;for(var O=new Array,s=function(x,A,E,R){return(1-x)*(1-x)*A+2*x*(1-x)*E+x*x*R},V=0;V<=R;V++)O.push(new jt(s(V/R,x.x,A.x,E.x),s(V/R,x.y,A.y,E.y),s(V/R,x.z,A.z,E.z)));return new t(O)},t.CreateCubicBezier=function(x,A,E,R,O){O=O>3?O:4;for(var V=new Array,a=function(x,A,E,R,O){return(1-x)*(1-x)*(1-x)*A+3*x*(1-x)*(1-x)*E+3*x*x*(1-x)*R+x*x*x*O},z=0;z<=O;z++)V.push(new jt(a(z/O,x.x,A.x,E.x,R.x),a(z/O,x.y,A.y,E.y,R.y),a(z/O,x.z,A.z,E.z,R.z)));return new t(V)},t.CreateHermiteSpline=function(x,A,E,R,O){for(var V=new Array,z=1/O,U=0;U<=O;U++)V.push(jt.Hermite(x,A,E,R,U*z));return new t(V)},t.CreateCatmullRomSpline=function(x,A,E){var R=new Array,O=1/A,V=0;if(E){for(var z=x.length,U=0;U<z;U++){V=0;for(var Q=0;Q<A;Q++)R.push(jt.CatmullRom(x[U%z],x[(U+1)%z],x[(U+2)%z],x[(U+3)%z],V)),V+=O}R.push(R[0])}else{var W=new Array;for(W.push(x[0].clone()),Array.prototype.push.apply(W,x),W.push(x[x.length-1].clone()),U=0,U=0;U<W.length-3;U++)for(V=0,Q=0;Q<A;Q++)R.push(jt.CatmullRom(W[U],W[U+1],W[U+2],W[U+3],V)),V+=O;U--,R.push(jt.CatmullRom(W[U],W[U+1],W[U+2],W[U+3],V))}return new t(R)},t.prototype.getPoints=function(){return this._points},t.prototype.length=function(){return this._length},t.prototype.continue=function(x){for(var A=this._points[this._points.length-1],E=this._points.slice(),R=x.getPoints(),O=1;O<R.length;O++)E.push(R[O].subtract(R[0]).add(A));return new t(E)},t.prototype._computeLength=function(x){for(var A=0,E=1;E<x.length;E++)A+=x[E].subtract(x[E-1]).length();return A},t}(),Kt=function(){function t(x,A,E,R){this.normal=new jt(x,A,E),this.d=R}return t.FromArray=function(x){return new t(x[0],x[1],x[2],x[3])},t.FromPoints=function(x,A,E){var R=new t(0,0,0,0);return R.copyFromPoints(x,A,E),R},t.FromPositionAndNormal=function(x,A){var E=new t(0,0,0,0);return A.normalize(),E.normal=A,E.d=-(A.x*x.x+A.y*x.y+A.z*x.z),E},t.SignedDistanceToPlaneFromPositionAndNormal=function(x,A,E){var R=-(A.x*x.x+A.y*x.y+A.z*x.z);return jt.Dot(E,A)+R},t.prototype.asArray=function(){return[this.normal.x,this.normal.y,this.normal.z,this.d]},t.prototype.clone=function(){return new t(this.normal.x,this.normal.y,this.normal.z,this.d)},t.prototype.getClassName=function(){return"Plane"},t.prototype.getHashCode=function(){return 397*this.normal.getHashCode()^(this.d||0)},t.prototype.normalize=function(){var x=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z),A=0;return 0!==x&&(A=1/x),this.normal.x*=A,this.normal.y*=A,this.normal.z*=A,this.d*=A,this},t.prototype.transform=function(x){var A=Ut.Matrix[0];Nt.TransposeToRef(x,A);var E=A.m,R=this.normal.x,O=this.normal.y,V=this.normal.z,z=this.d;return new t(R*E[0]+O*E[1]+V*E[2]+z*E[3],R*E[4]+O*E[5]+V*E[6]+z*E[7],R*E[8]+O*E[9]+V*E[10]+z*E[11],R*E[12]+O*E[13]+V*E[14]+z*E[15])},t.prototype.dotCoordinate=function(x){return this.normal.x*x.x+this.normal.y*x.y+this.normal.z*x.z+this.d},t.prototype.copyFromPoints=function(x,A,E){var R,O=A.x-x.x,V=A.y-x.y,z=A.z-x.z,U=E.x-x.x,Q=E.y-x.y,W=E.z-x.z,H=V*W-z*Q,$=z*U-O*W,G=O*Q-V*U,X=Math.sqrt(H*H+$*$+G*G);return R=0!==X?1/X:0,this.normal.x=H*R,this.normal.y=$*R,this.normal.z=G*R,this.d=-(this.normal.x*x.x+this.normal.y*x.y+this.normal.z*x.z),this},t.prototype.isFrontFacingTo=function(x,A){return jt.Dot(this.normal,x)<=A},t.prototype.signedDistanceTo=function(x){return jt.Dot(x,this.normal)+this.d},t}(),Zt=function(){function t(){}return t.GetPlanes=function(x){for(var A=[],E=0;E<6;E++)A.push(new Kt(0,0,0,0));return t.GetPlanesToRef(x,A),A},t.GetNearPlaneToRef=function(x,A){var E=x.m;A.normal.x=E[3]+E[2],A.normal.y=E[7]+E[6],A.normal.z=E[11]+E[10],A.d=E[15]+E[14],A.normalize()},t.GetFarPlaneToRef=function(x,A){var E=x.m;A.normal.x=E[3]-E[2],A.normal.y=E[7]-E[6],A.normal.z=E[11]-E[10],A.d=E[15]-E[14],A.normalize()},t.GetLeftPlaneToRef=function(x,A){var E=x.m;A.normal.x=E[3]+E[0],A.normal.y=E[7]+E[4],A.normal.z=E[11]+E[8],A.d=E[15]+E[12],A.normalize()},t.GetRightPlaneToRef=function(x,A){var E=x.m;A.normal.x=E[3]-E[0],A.normal.y=E[7]-E[4],A.normal.z=E[11]-E[8],A.d=E[15]-E[12],A.normalize()},t.GetTopPlaneToRef=function(x,A){var E=x.m;A.normal.x=E[3]-E[1],A.normal.y=E[7]-E[5],A.normal.z=E[11]-E[9],A.d=E[15]-E[13],A.normalize()},t.GetBottomPlaneToRef=function(x,A){var E=x.m;A.normal.x=E[3]+E[1],A.normal.y=E[7]+E[5],A.normal.z=E[11]+E[9],A.d=E[15]+E[13],A.normalize()},t.GetPlanesToRef=function(x,A){t.GetNearPlaneToRef(x,A[0]),t.GetFarPlaneToRef(x,A[1]),t.GetLeftPlaneToRef(x,A[2]),t.GetRightPlaneToRef(x,A[3]),t.GetTopPlaneToRef(x,A[4]),t.GetBottomPlaneToRef(x,A[5])},t}(),te=function(){function e(x,A){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new qt(x,A))}return e.StartingAt=function(x,A){return new e(x,A)},e.prototype.addLineTo=function(x,A){if(this.closed)return this;var E=new qt(x,A),R=this._points[this._points.length-1];return this._points.push(E),this._length+=E.subtract(R).length(),this},e.prototype.addArcTo=function(A,E,R,O,V){if(void 0===V&&(V=36),this.closed)return this;var z=this._points[this._points.length-1],U=new qt(A,E),Q=new qt(R,O),W=new zt(z,U,Q),H=W.angle.radians()/V;W.orientation===x.Orientation.CW&&(H*=-1);for(var $=W.startAngle.radians()+H,G=0;G<V;G++){var X=Math.cos($)*W.radius+W.centerPoint.x,K=Math.sin($)*W.radius+W.centerPoint.y;this.addLineTo(X,K),$+=H}return this},e.prototype.close=function(){return this.closed=!0,this},e.prototype.length=function(){var x=this._length;if(!this.closed){var A=this._points[this._points.length-1];x+=this._points[0].subtract(A).length()}return x},e.prototype.getPoints=function(){return this._points},e.prototype.getPointAtLengthPosition=function(x){if(x<0||x>1)return qt.Zero();for(var A=x*this.length(),E=0,R=0;R<this._points.length;R++){var O=(R+1)%this._points.length,V=this._points[R],z=this._points[O].subtract(V),U=z.length()+E;if(A>=E&&A<=U){var Q=z.normalize(),W=A-E;return new qt(V.x+Q.x*W,V.y+Q.y*W)}E=U}return qt.Zero()},e}(),ee=function(){function t(x,A,E){void 0===A&&(A=null),this.path=x,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(var R=0;R<x.length;R++)this._curve[R]=x[R].clone();this._raw=E||!1,this._compute(A)}return t.prototype.getCurve=function(){return this._curve},t.prototype.getTangents=function(){return this._tangents},t.prototype.getNormals=function(){return this._normals},t.prototype.getBinormals=function(){return this._binormals},t.prototype.getDistances=function(){return this._distances},t.prototype.update=function(x,A){void 0===A&&(A=null);for(var E=0;E<x.length;E++)this._curve[E].x=x[E].x,this._curve[E].y=x[E].y,this._curve[E].z=x[E].z;return this._compute(A),this},t.prototype._compute=function(x){var A=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[A-1]=this._curve[A-1].subtract(this._curve[A-2]),this._raw||this._tangents[A-1].normalize();var E,R,O,V,z=this._tangents[0],U=this._normalVector(this._curve[0],z,x);this._normals[0]=U,this._raw||this._normals[0].normalize(),this._binormals[0]=jt.Cross(z,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(var Q=1;Q<A;Q++)E=this._getLastNonNullVector(Q),Q<A-1&&(R=this._getFirstNonNullVector(Q),this._tangents[Q]=E.add(R),this._tangents[Q].normalize()),this._distances[Q]=this._distances[Q-1]+E.length(),O=this._tangents[Q],V=this._binormals[Q-1],this._normals[Q]=jt.Cross(V,O),this._raw||this._normals[Q].normalize(),this._binormals[Q]=jt.Cross(O,this._normals[Q]),this._raw||this._binormals[Q].normalize()},t.prototype._getFirstNonNullVector=function(x){for(var A=1,E=this._curve[x+A].subtract(this._curve[x]);0===E.length()&&x+A+1<this._curve.length;)A++,E=this._curve[x+A].subtract(this._curve[x]);return E},t.prototype._getLastNonNullVector=function(x){for(var A=1,E=this._curve[x].subtract(this._curve[x-A]);0===E.length()&&x>A+1;)A++,E=this._curve[x].subtract(this._curve[x-A]);return E},t.prototype._normalVector=function(x,A,E){var R,O,V=A.length();(0===V&&(V=1),null==E)?(O=Bt.WithinEpsilon(Math.abs(A.y)/V,1,kt)?Bt.WithinEpsilon(Math.abs(A.x)/V,1,kt)?Bt.WithinEpsilon(Math.abs(A.z)/V,1,kt)?jt.Zero():new jt(0,0,1):new jt(1,0,0):new jt(0,-1,0),R=jt.Cross(A,O)):(R=jt.Cross(A,E),jt.CrossToRef(R,A,R));return R.normalize(),R},t}(),ne=function(){function t(x,A){this.width=x,this.height=A}return Object.defineProperty(t.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!1,configurable:!0}),t.Zero=function(){return new t(0,0)},t.Lerp=function(x,A,E){return new t(x.width+(A.width-x.width)*E,x.height+(A.height-x.height)*E)},t.prototype.toString=function(){return"{W: "+this.width+", H: "+this.height+"}"},t.prototype.getClassName=function(){return"Size"},t.prototype.getHashCode=function(){return 397*(this.width||0)^(this.height||0)},t.prototype.copyFrom=function(x){this.width=x.width,this.height=x.height},t.prototype.copyFromFloats=function(x,A){return this.width=x,this.height=A,this},t.prototype.set=function(x,A){return this.copyFromFloats(x,A)},t.prototype.multiplyByFloats=function(x,A){return new t(this.width*x,this.height*A)},t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(x){return!!x&&this.width===x.width&&this.height===x.height},t.prototype.add=function(x){return new t(this.width+x.width,this.height+x.height)},t.prototype.subtract=function(x){return new t(this.width-x.width,this.height-x.height)},t}(),oe={looping:!0,speed:1,weight:1,layer:0},ie=function(x){function e(A,E){void 0===E&&(E=oe);var R=x.call(this)||this;return R.isAnimationClip=!0,R.looping=oe.looping,R.weight=oe.weight,R.playing=!1,R.shouldReset=!1,R.speed=oe.speed,R.name=f("AnimClip"),R.layer=oe.layer,R.clip=A,R.setParams(i({},E)),R}return o(e,x),e.prototype.setParams=function(x){return this.looping=void 0!==x.looping?x.looping:this.looping,this.speed=x.speed||this.speed,this.weight=x.weight||this.weight,this.layer=x.layer||this.layer,this},e.prototype.toJSON=function(){var A=JSON.parse(JSON.stringify(x.prototype.toJSON.call(this)));return this.shouldReset&&(this.shouldReset=!1),A},e.prototype.play=function(x){var A;void 0===x&&(x=!1),null===(A=this.owner)||void 0===A||A.play(this,x)},e.prototype.pause=function(){var x;null===(x=this.owner)||void 0===x||x.pause(this)},e.prototype.reset=function(){this.shouldReset=!0},e.prototype.stop=function(){var x;null===(x=this.owner)||void 0===x||x.stop(this)},r([Z.readonly],e.prototype,"clip",void 0),r([Z.field],e.prototype,"looping",void 0),r([Z.field],e.prototype,"weight",void 0),r([Z.field],e.prototype,"playing",void 0),r([Z.field],e.prototype,"shouldReset",void 0),r([Z.field],e.prototype,"speed",void 0),r([Z.readonly],e.prototype,"name",void 0),e}(Z);x.InputEventType=void 0,(_t=x.InputEventType||(x.InputEventType={}))[_t.DOWN=0]="DOWN",_t[_t.UP=1]="UP",x.CameraMode=void 0,(It=x.CameraMode||(x.CameraMode={}))[It.FirstPerson=0]="FirstPerson",It[It.ThirdPerson=1]="ThirdPerson",It[It.BuildingToolGodMode=2]="BuildingToolGodMode",x.LandRole=void 0,(Rt=x.LandRole||(x.LandRole={})).OWNER="owner",Rt.OPERATOR="operator",x.ActionButton=void 0,(Ot=x.ActionButton||(x.ActionButton={})).POINTER="POINTER",Ot.PRIMARY="PRIMARY",Ot.SECONDARY="SECONDARY",Ot.ANY="ANY";var re,se,Yt=function(x){if(this.callback=x,!x||!("apply"in x)||!("call"in x))throw new Error("Callback is not a function");ce.ensureInstance()},ae=function(x){function e(){return null!==x&&x.apply(this,arguments)||this}return o(e,x),r([M("pointerDown")],e)}(Yt),ue=function(x){function e(){return null!==x&&x.apply(this,arguments)||this}return o(e,x),r([M("pointerUp")],e)}(Yt),Jt=function(x,A){this.fn=x,this.useRaycast=A},ce=function(){function e(){var A,E;this.subscriptions=((A={})[x.ActionButton.POINTER]={BUTTON_DOWN:[],BUTTON_UP:[]},A[x.ActionButton.PRIMARY]={BUTTON_DOWN:[],BUTTON_UP:[]},A[x.ActionButton.SECONDARY]={BUTTON_DOWN:[],BUTTON_UP:[]},A[x.ActionButton.ANY]={BUTTON_DOWN:[],BUTTON_UP:[]},A),this.internalState=((E={})[x.ActionButton.POINTER]={BUTTON_DOWN:!1},E[x.ActionButton.PRIMARY]={BUTTON_DOWN:!1},E[x.ActionButton.SECONDARY]={BUTTON_DOWN:!1},E[x.ActionButton.ANY]={BUTTON_DOWN:!1},E)}return Object.defineProperty(e,"instance",{get:function(){return e.ensureInstance(),e._instance},enumerable:!1,configurable:!0}),e.ensureInstance=function(){e._instance||(e._instance=new e)},e.prototype.isButtonPressed=function(x){return this.internalState[x]},e.prototype.subscribe=function(x,A,E,R){var O=this;return this.subscriptions[A][x].push(new Jt(R,E)),function(){O.unsubscribe(x,A,R)}},e.prototype.unsubscribe=function(x,A,E){var R=this.getSubscriptionId(x,A,E);return R>-1&&this.subscriptions[A][x].splice(R,1)},e.prototype.handlePointerEvent=function(A){var E=this.getPointerById(A.buttonId),R=i(i({},A),{button:E,direction:(new jt).copyFrom(A.direction),origin:(new jt).copyFrom(A.origin),hit:void 0}),O=A.hit?i(i({},A.hit),{hitPoint:(new jt).copyFrom(A.hit.hitPoint),normal:(new jt).copyFrom(A.hit.normal),worldNormal:(new jt).copyFrom(A.hit.worldNormal)}):void 0;if(A.type===x.InputEventType.DOWN){this.internalState[E].BUTTON_DOWN=!0;for(var V=0;V<this.subscriptions[E].BUTTON_DOWN.length;V++)(z=this.subscriptions[E].BUTTON_DOWN[V]).useRaycast?R.hit=O:R.hit=void 0,z.fn(R);O&&O.entityId&&F.engine&&(Q=(U=F.engine.entities[O.entityId])&&U.getComponentOrNull(ae))&&(R.hit=O,Q.callback(R))}else{for(this.internalState[E].BUTTON_DOWN=!1,V=0;V<this.subscriptions[E].BUTTON_UP.length;V++){var z;(z=this.subscriptions[E].BUTTON_UP[V]).useRaycast?R.hit=O:R.hit=void 0,z.fn(R)}var U,Q;O&&O.entityId&&F.engine&&(Q=(U=F.engine.entities[O.entityId])&&U.getComponentOrNull(ue))&&(R.hit=O,Q.callback(R))}},e.prototype.getSubscriptionId=function(x,A,E){for(var R=0;R<this.subscriptions[A][x].length;R++)if(this.subscriptions[A][x][R].fn===E)return R;return-1},e.prototype.getPointerById=function(A){return 0===A?x.ActionButton.POINTER:1===A?x.ActionButton.PRIMARY:x.ActionButton.SECONDARY},e}();x.CLASS_ID=void 0,(re=x.CLASS_ID||(x.CLASS_ID={}))[re.TRANSFORM=1]="TRANSFORM",re[re.UUID_CALLBACK=8]="UUID_CALLBACK",re[re.BOX_SHAPE=16]="BOX_SHAPE",re[re.SPHERE_SHAPE=17]="SPHERE_SHAPE",re[re.PLANE_SHAPE=18]="PLANE_SHAPE",re[re.CONE_SHAPE=19]="CONE_SHAPE",re[re.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",re[re.TEXT_SHAPE=21]="TEXT_SHAPE",re[re.NFT_SHAPE=22]="NFT_SHAPE",re[re.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",re[re.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",re[re.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",re[re.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",re[re.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",re[re.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",re[re.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",re[re.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",re[re.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",re[re.BILLBOARD=32]="BILLBOARD",re[re.ANIMATION=33]="ANIMATION",re[re.FONT=34]="FONT",re[re.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",re[re.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",re[re.GLTF_SHAPE=54]="GLTF_SHAPE",re[re.OBJ_SHAPE=55]="OBJ_SHAPE",re[re.AVATAR_SHAPE=56]="AVATAR_SHAPE",re[re.BASIC_MATERIAL=64]="BASIC_MATERIAL",re[re.PBR_MATERIAL=65]="PBR_MATERIAL",re[re.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",re[re.SOUND=67]="SOUND",re[re.TEXTURE=68]="TEXTURE",re[re.VIDEO_CLIP=70]="VIDEO_CLIP",re[re.VIDEO_TEXTURE=71]="VIDEO_TEXTURE",re[re.AUDIO_CLIP=200]="AUDIO_CLIP",re[re.AUDIO_SOURCE=201]="AUDIO_SOURCE",re[re.AUDIO_STREAM=202]="AUDIO_STREAM",re[re.GIZMOS=203]="GIZMOS",re[re.SMART_ITEM=204]="SMART_ITEM",re[re.AVATAR_MODIFIER_AREA=205]="AVATAR_MODIFIER_AREA",re[re.NAME=300]="NAME",re[re.LOCKED_ON_EDIT=301]="LOCKED_ON_EDIT",re[re.VISIBLE_ON_EDIT=302]="VISIBLE_ON_EDIT",x.AvatarModifiers=void 0,(se=x.AvatarModifiers||(x.AvatarModifiers={})).HIDE_AVATARS="HIDE_AVATARS",se.DISABLE_PASSPORTS="DISABLE_PASSPORTS";var pe,le=function(A){function n(x){var E=A.call(this)||this;return E.area=x.area,E.modifiers=x.modifiers,E}return o(n,A),r([Z.field],n.prototype,"area",void 0),r([Z.field],n.prototype,"modifiers",void 0),r([M("engine.avatarModifierArea",x.CLASS_ID.AVATAR_MODIFIER_AREA)],n)}(Z),he=function(A){function n(x){void 0===x&&(x={});var E=A.call(this)||this;return E.position=x.position||jt.Zero(),E.rotation=x.rotation||Mt.Identity,E.scale=x.scale||new jt(1,1,1),E}return o(n,A),Object.defineProperty(n.prototype,"eulerAngles",{get:function(){return this.rotation.eulerAngles},enumerable:!1,configurable:!0}),n.prototype.lookAt=function(x,A){void 0===A&&(A=Ut.staticUp);var E=new Nt;return Nt.LookAtLHToRef(this.position,x,A,E),E.invert(),Mt.FromRotationMatrixToRef(E,this.rotation),this},n.prototype.rotate=function(x,A){return this.rotation.multiplyInPlace(this.rotation.angleAxis(A,x)),this},n.prototype.translate=function(x){return this.position.addInPlace(x),this},r([Z.field],n.prototype,"position",void 0),r([Z.field],n.prototype,"rotation",void 0),r([Z.field],n.prototype,"scale",void 0),r([M("engine.transform",x.CLASS_ID.TRANSFORM)],n)}(Z),de=function(A){function n(x,E,R){void 0===x&&(x=!0),void 0===E&&(E=!0),void 0===R&&(R=!0);var O=A.call(this)||this;return O.x=!0,O.y=!0,O.z=!0,O.x=x,O.y=E,O.z=R,O}return o(n,A),r([Z.field],n.prototype,"x",void 0),r([Z.field],n.prototype,"y",void 0),r([Z.field],n.prototype,"z",void 0),r([M("engine.billboard",x.CLASS_ID.BILLBOARD)],n)}(Z),fe=function(x){function e(){var A=null!==x&&x.apply(this,arguments)||this;return A.withCollisions=!0,A.isPointerBlocker=!0,A.visible=!0,A}return o(e,x),r([Z.field],e.prototype,"withCollisions",void 0),r([Z.field],e.prototype,"isPointerBlocker",void 0),r([Z.field],e.prototype,"visible",void 0),e}(Z),ge=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return o(n,A),r([Z.field],n.prototype,"uvs",void 0),r([F("engine.shape",x.CLASS_ID.BOX_SHAPE)],n)}(fe),me=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return o(n,A),r([F("engine.shape",x.CLASS_ID.SPHERE_SHAPE)],n)}(fe),ye=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return o(n,A),r([Z.field],n.prototype,"segments",void 0),r([Z.field],n.prototype,"arc",void 0),r([F("engine.shape",x.CLASS_ID.CIRCLE_SHAPE)],n)}(fe),we=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.width=1,x.height=1,x}return o(n,A),r([Z.field],n.prototype,"width",void 0),r([Z.field],n.prototype,"height",void 0),r([Z.field],n.prototype,"uvs",void 0),r([F("engine.shape",x.CLASS_ID.PLANE_SHAPE)],n)}(fe),ve=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.radiusTop=0,x.radiusBottom=1,x.segmentsHeight=1,x.segmentsRadial=36,x.openEnded=!1,x.radius=null,x.arc=360,x}return o(n,A),r([Z.field],n.prototype,"radiusTop",void 0),r([Z.field],n.prototype,"radiusBottom",void 0),r([Z.field],n.prototype,"segmentsHeight",void 0),r([Z.field],n.prototype,"segmentsRadial",void 0),r([Z.field],n.prototype,"openEnded",void 0),r([Z.field],n.prototype,"radius",void 0),r([Z.field],n.prototype,"arc",void 0),r([F("engine.shape",x.CLASS_ID.CONE_SHAPE)],n)}(fe),be=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.radiusTop=1,x.radiusBottom=1,x.segmentsHeight=1,x.segmentsRadial=36,x.openEnded=!1,x.radius=null,x.arc=360,x}return o(n,A),r([Z.field],n.prototype,"radiusTop",void 0),r([Z.field],n.prototype,"radiusBottom",void 0),r([Z.field],n.prototype,"segmentsHeight",void 0),r([Z.field],n.prototype,"segmentsRadial",void 0),r([Z.field],n.prototype,"openEnded",void 0),r([Z.field],n.prototype,"radius",void 0),r([Z.field],n.prototype,"arc",void 0),r([F("engine.shape",x.CLASS_ID.CYLINDER_SHAPE)],n)}(fe),xe=function(A){function n(x){var E=A.call(this)||this;return E.src=x,E}return o(n,A),r([fe.readonly],n.prototype,"src",void 0),r([F("engine.shape",x.CLASS_ID.GLTF_SHAPE)],n)}(fe);x.PictureFrameStyle=void 0,(pe=x.PictureFrameStyle||(x.PictureFrameStyle={}))[pe.Classic=0]="Classic",pe[pe.Baroque_Ornament=1]="Baroque_Ornament",pe[pe.Diamond_Ornament=2]="Diamond_Ornament",pe[pe.Minimal_Wide=3]="Minimal_Wide",pe[pe.Minimal_Grey=4]="Minimal_Grey",pe[pe.Blocky=5]="Blocky",pe[pe.Gold_Edges=6]="Gold_Edges",pe[pe.Gold_Carved=7]="Gold_Carved",pe[pe.Gold_Wide=8]="Gold_Wide",pe[pe.Gold_Rounded=9]="Gold_Rounded",pe[pe.Metal_Medium=10]="Metal_Medium",pe[pe.Metal_Wide=11]="Metal_Wide",pe[pe.Metal_Slim=12]="Metal_Slim",pe[pe.Metal_Rounded=13]="Metal_Rounded",pe[pe.Pins=14]="Pins",pe[pe.Minimal_Black=15]="Minimal_Black",pe[pe.Minimal_White=16]="Minimal_White",pe[pe.Tape=17]="Tape",pe[pe.Wood_Slim=18]="Wood_Slim",pe[pe.Wood_Wide=19]="Wood_Wide",pe[pe.Wood_Twigs=20]="Wood_Twigs",pe[pe.Canvas=21]="Canvas",pe[pe.None=22]="None";var Te,Ae=function(A){function n(E,R){void 0===R&&(R={});var O=A.call(this)||this;O.src=E;var V=new Gt(.6404918,.611472,.8584906),z=x.PictureFrameStyle.Classic;return"r"in R?V=R:null!=R&&(R.color&&(V=R.color),R.style&&(z=R.style)),O.color=V,O.style=z,O}return o(n,A),r([fe.readonly],n.prototype,"src",void 0),r([fe.readonly],n.prototype,"style",void 0),r([Z.field],n.prototype,"color",void 0),r([F("engine.shape",x.CLASS_ID.NFT_SHAPE)],n)}(fe),Ee=function(A){function n(x,E){var R=A.call(this)||this;if(R.src=x,E)for(var O in E)R[O]=E[O];return R}return o(n,A),r([Z.readonly],n.prototype,"src",void 0),r([Z.readonly],n.prototype,"samplingMode",void 0),r([Z.readonly],n.prototype,"wrap",void 0),r([Z.readonly],n.prototype,"hasAlpha",void 0),r([F("engine.texture",x.CLASS_ID.TEXTURE)],n)}(Z),Ce=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.states=[],x}return o(n,A),n.prototype.addClip=function(x){var A=this;return this.states.push(x),x.onChange((function(){A.dirty=!0})),x.owner=this,this},n.prototype.getClip=function(x){for(var A=0;A<this.states.length;A++){var E=this.states[A];if(E.clip===x)return E}var R=new ie(x);return this.addClip(R),R},n.prototype.stop=function(x){if(x)x.playing=!1,x.shouldReset=!0;else for(var A=0;A<this.states.length;A++){var E=this.states[A];this.stop(E)}},n.prototype.play=function(x,A){void 0===A&&(A=!1);for(var E=0;E<this.states.length;E++){var R=this.states[E];R.layer===x.layer&&x!==R&&this.pause(R)}A&&(x.shouldReset=!0),x.playing=!0,x.dirty=!0,x.data.nonce=Math.random()},n.prototype.pause=function(x){if(x)x.playing=!1;else for(var A=0;A<this.states.length;A++){var E=this.states[A];this.pause(E)}},r([Z.readonly],n.prototype,"states",void 0),r([M("engine.animator",x.CLASS_ID.ANIMATION)],n)}(fe),Se=function(A){function n(x){var E=A.call(this)||this;return E.src=x,E}return o(n,A),r([Z.readonly],n.prototype,"src",void 0),r([F("engine.shape",x.CLASS_ID.OBJ_SHAPE)],n)}(fe),_e=function(A){function n(x){void 0===x&&(x="");var E=A.call(this)||this;return E.src=x,E}return o(n,A),r([Z.readonly],n.prototype,"src",void 0),r([F("engine.font",x.CLASS_ID.FONT)],n)}(Z);x.Fonts=void 0,(Te=x.Fonts||(x.Fonts={})).SanFrancisco="builtin:SF-UI-Text-Regular SDF",Te.SanFrancisco_Heavy="builtin:SF-UI-Text-Heavy SDF",Te.SanFrancisco_Semibold="builtin:SF-UI-Text-Semibold SDF",Te.LiberationSans="builtin:LiberationSans SDF",Te.SansSerif="SansSerif",Te.SansSerif_Heavy="SansSerif_Heavy",Te.SansSerif_Bold="SansSerif_Bold",Te.SansSerif_SemiBold="SansSerif_SemiBold";var Ie,Re=function(A){function n(x){var E=A.call(this)||this;return E.outlineWidth=0,E.outlineColor=new Gt(1,1,1),E.color=new Gt(1,1,1),E.fontSize=10,E.fontWeight="normal",E.opacity=1,E.value="",E.lineSpacing="0px",E.lineCount=0,E.resizeToFit=!1,E.textWrapping=!1,E.shadowBlur=0,E.shadowOffsetX=0,E.shadowOffsetY=0,E.shadowColor=new Gt(1,1,1),E.zIndex=0,E.hTextAlign="center",E.vTextAlign="center",E.width=1,E.height=1,E.paddingTop=0,E.paddingRight=0,E.paddingBottom=0,E.paddingLeft=0,E.isPickable=!1,E.billboard=!1,E.visible=!0,x&&(E.value=x),E}return o(n,A),r([Z.field],n.prototype,"outlineWidth",void 0),r([Z.field],n.prototype,"outlineColor",void 0),r([Z.field],n.prototype,"color",void 0),r([Z.field],n.prototype,"fontSize",void 0),r([Z.field],n.prototype,"fontWeight",void 0),r([Z.component],n.prototype,"font",void 0),r([Z.field],n.prototype,"opacity",void 0),r([Z.field],n.prototype,"value",void 0),r([Z.field],n.prototype,"lineSpacing",void 0),r([Z.field],n.prototype,"lineCount",void 0),r([Z.field],n.prototype,"resizeToFit",void 0),r([Z.field],n.prototype,"textWrapping",void 0),r([Z.field],n.prototype,"shadowBlur",void 0),r([Z.field],n.prototype,"shadowOffsetX",void 0),r([Z.field],n.prototype,"shadowOffsetY",void 0),r([Z.field],n.prototype,"shadowColor",void 0),r([Z.field],n.prototype,"zIndex",void 0),r([Z.field],n.prototype,"hTextAlign",void 0),r([Z.field],n.prototype,"vTextAlign",void 0),r([Z.field],n.prototype,"width",void 0),r([Z.field],n.prototype,"height",void 0),r([Z.field],n.prototype,"paddingTop",void 0),r([Z.field],n.prototype,"paddingRight",void 0),r([Z.field],n.prototype,"paddingBottom",void 0),r([Z.field],n.prototype,"paddingLeft",void 0),r([Z.field],n.prototype,"isPickable",void 0),r([Z.field],n.prototype,"billboard",void 0),r([Z.field],n.prototype,"visible",void 0),r([M("engine.text",x.CLASS_ID.TEXT_SHAPE)],n)}(Z);x.TransparencyMode=void 0,(Ie=x.TransparencyMode||(x.TransparencyMode={}))[Ie.OPAQUE=0]="OPAQUE",Ie[Ie.ALPHA_TEST=1]="ALPHA_TEST",Ie[Ie.ALPHA_BLEND=2]="ALPHA_BLEND",Ie[Ie.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",Ie[Ie.AUTO=4]="AUTO";var Oe,Ve=function(A){function n(){var E=null!==A&&A.apply(this,arguments)||this;return E.alphaTest=.5,E.castShadows=!0,E.transparencyMode=x.TransparencyMode.AUTO,E}return o(n,A),r([Z.field],n.prototype,"alphaTest",void 0),r([Z.field],n.prototype,"albedoColor",void 0),r([Z.field],n.prototype,"emissiveColor",void 0),r([Z.field],n.prototype,"metallic",void 0),r([Z.field],n.prototype,"roughness",void 0),r([Z.field],n.prototype,"ambientColor",void 0),r([Z.field],n.prototype,"reflectionColor",void 0),r([Z.field],n.prototype,"reflectivityColor",void 0),r([Z.field],n.prototype,"directIntensity",void 0),r([Z.field],n.prototype,"microSurface",void 0),r([Z.field],n.prototype,"emissiveIntensity",void 0),r([Z.field],n.prototype,"environmentIntensity",void 0),r([Z.field],n.prototype,"specularIntensity",void 0),r([Z.component],n.prototype,"albedoTexture",void 0),r([Z.component],n.prototype,"alphaTexture",void 0),r([Z.component],n.prototype,"emissiveTexture",void 0),r([Z.component],n.prototype,"bumpTexture",void 0),r([Z.component],n.prototype,"refractionTexture",void 0),r([Z.field],n.prototype,"castShadows",void 0),r([Z.field],n.prototype,"transparencyMode",void 0),r([F("engine.material",x.CLASS_ID.PBR_MATERIAL)],n)}(Z),Pe=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.alphaTest=.5,x.castShadows=!0,x}return o(n,A),r([Z.component],n.prototype,"texture",void 0),r([Z.field],n.prototype,"alphaTest",void 0),r([Z.field],n.prototype,"castShadows",void 0),r([F("engine.material",x.CLASS_ID.BASIC_MATERIAL)],n)}(Z),ke=function(x){function e(A){var E=x.call(this)||this;if(E.uuid=f("UUID"),!A||!("apply"in A)||!("call"in A))throw new Error("Callback is not a function");return E.callback=A,E}return o(e,x),e.uuidEvent=function(x,A){if(delete x[A]){var E=A+"_"+Math.random();x[E]=void 0,Object.defineProperty(x,E,i(i({},Object.getOwnPropertyDescriptor(x,E)),{enumerable:!1})),Object.defineProperty(x,A.toString(),{get:function(){return this[E]},set:function(x){var R=this[E];if(x){if(!(x instanceof e))throw new Error("value is not an OnUUIDEvent");this.data[A]=x.uuid}else this.data[A]=null;if(this[E]=x,x!==R){this.dirty=!0;for(var O=0;O<this.subscriptions.length;O++)this.subscriptions[O](A,x,R)}},enumerable:!0})}},e.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type}},r([Z.field],e.prototype,"callback",void 0),e}(Z),ze=function(A){function n(){var E=null!==A&&A.apply(this,arguments)||this;return E.button=x.ActionButton.ANY,E.hoverText="Interact",E.distance=10,E.showFeedback=!0,E}return o(n,A),n.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type,button:this.button,hoverText:this.hoverText,distance:this.distance,showFeedback:this.showFeedback}},r([Z.field],n.prototype,"button",void 0),r([Z.field],n.prototype,"hoverText",void 0),r([Z.field],n.prototype,"distance",void 0),r([Z.field],n.prototype,"showFeedback",void 0),n}(ke),De=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.type="onPointerLock",x}return o(n,A),r([Z.readonly],n.prototype,"type",void 0),r([M("engine.onPointerLock",x.CLASS_ID.UUID_CALLBACK)],n)}(ke),Le=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.type="onAnimationEnd",x}return o(n,A),r([Z.readonly],n.prototype,"type",void 0),r([M("engine.onAnimationEnd",x.CLASS_ID.UUID_CALLBACK)],n)}(ke),Be=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return o(n,A),r([M("engine.smartItem",x.CLASS_ID.SMART_ITEM)],n)}(Z),Fe=function(A){function n(x){var E=A.call(this)||this;return E.url=x,E}return o(n,A),r([Z.readonly],n.prototype,"url",void 0),r([F("engine.VideoClip",x.CLASS_ID.VIDEO_CLIP)],n)}(Z);x.VideoStatus=void 0,(Oe=x.VideoStatus||(x.VideoStatus={}))[Oe.NONE=0]="NONE",Oe[Oe.ERROR=1]="ERROR",Oe[Oe.LOADING=2]="LOADING",Oe[Oe.READY=3]="READY",Oe[Oe.PLAYING=4]="PLAYING",Oe[Oe.BUFFERING=5]="BUFFERING";var Ne,Me=function(A){function n(E,R){var O=A.call(this)||this;if(O.volume=1,O.playbackRate=1,O.loop=!1,O.seek=-1,O._position=-1,O._videoLength=-1,O._status=x.VideoStatus.NONE,O.playing=!1,!(E instanceof Fe))throw new Error("Trying to create VideoTexture(VideoClip) with an invalid VideoClip");if(O.videoClipId=D(E),R)for(var V in R)O[V]=R[V];return O}return o(n,A),n.prototype.play=function(){this.playing=!0},n.prototype.pause=function(){this.playing=!1},n.prototype.reset=function(){this.seekTime(0),this.pause()},n.prototype.seekTime=function(x){this.seek=x,this.dirty=!0,this.data.nonce=Math.random()},n.prototype.toJSON=function(){if(this.seek>=0){var x=JSON.parse(JSON.stringify(A.prototype.toJSON.call(this)));return this.seek=-1,x}return A.prototype.toJSON.call(this)},n.prototype.update=function(A){A.videoClipId==this.videoClipId&&(this._status=A.videoStatus||x.VideoStatus.NONE,this._videoLength=A.totalVideoLength,this._position=A.currentOffset)},Object.defineProperty(n.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"videoLength",{get:function(){return this._videoLength},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),r([Z.readonly],n.prototype,"videoClipId",void 0),r([Z.readonly],n.prototype,"samplingMode",void 0),r([Z.readonly],n.prototype,"wrap",void 0),r([Z.field],n.prototype,"volume",void 0),r([Z.field],n.prototype,"playbackRate",void 0),r([Z.field],n.prototype,"loop",void 0),r([Z.field],n.prototype,"seek",void 0),r([Z.field],n.prototype,"playing",void 0),r([F("engine.VideoTexture",x.CLASS_ID.VIDEO_TEXTURE)],n)}(Z),je=function(){function e(){var A=this;this.position=new jt,this.rotation=new Mt,this.feetPosition=new jt,this.worldPosition=new jt,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,this._cameraMode=x.CameraMode.FirstPerson,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.subscribe("cameraModeChanged"),dcl.onEvent((function(x){switch(x.type){case"positionChanged":A.positionChanged(x.data);break;case"rotationChanged":A.rotationChanged(x.data);break;case"cameraModeChanged":A.cameraModeChanged(x.data)}}))),Object.defineProperty(this.position,"x",{get:function(){return A.lastEventPosition.x}}),Object.defineProperty(this.position,"y",{get:function(){return A.lastEventPosition.y}}),Object.defineProperty(this.position,"z",{get:function(){return A.lastEventPosition.z}}),Object.defineProperty(this.worldPosition,"x",{get:function(){return A.lastEventWorldPosition.x}}),Object.defineProperty(this.worldPosition,"y",{get:function(){return A.lastEventWorldPosition.y}}),Object.defineProperty(this.worldPosition,"z",{get:function(){return A.lastEventWorldPosition.z}}),Object.defineProperty(this.feetPosition,"x",{get:function(){return A.lastEventPosition.x}}),Object.defineProperty(this.feetPosition,"y",{get:function(){return A.lastEventPosition.y-A.playerHeight}}),Object.defineProperty(this.feetPosition,"z",{get:function(){return A.lastEventPosition.z}}),Object.defineProperty(this.rotation,"x",{get:function(){return A.lastEventRotation.x}}),Object.defineProperty(this.rotation,"y",{get:function(){return A.lastEventRotation.y}}),Object.defineProperty(this.rotation,"z",{get:function(){return A.lastEventRotation.z}}),Object.defineProperty(this.rotation,"w",{get:function(){return A.lastEventRotation.w}})}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerHeight",{get:function(){return this._playerHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cameraMode",{get:function(){return this._cameraMode},enumerable:!1,configurable:!0}),e.prototype.positionChanged=function(x){this.lastEventPosition=x.position,this.lastEventWorldPosition=x.cameraPosition,this._playerHeight=x.playerHeight},e.prototype.rotationChanged=function(x){this.lastEventRotation=x.quaternion},e.prototype.cameraModeChanged=function(x){this._cameraMode=x.cameraMode},e}();!function(x){x.HitFirst="rqhf",x.HitAll="rqha"}(Ne||(Ne={}));var Ue,Qe=function(){function t(){this.queries={}}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!1,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.getRayFromCamera=function(x){var A=je.instance.rotation,E=Nt.Identity();A.toRotationMatrix(E);var R=jt.TransformCoordinates(jt.Forward(),E);return{origin:je.instance.position,direction:R,distance:x}},t.prototype.getRayFromPositions=function(x,A){var E=A.subtract(x),R=E.length();return{origin:x,direction:E.normalize(),distance:R}},t.prototype.hitFirst=function(x,A,E){var R="number"==typeof E?Ne.HitFirst+E:y();this.queries[R]=A,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:R,queryType:"HitFirst",ray:x})},t.prototype.hitAll=function(x,A,E){var R="number"==typeof E?Ne.HitAll+E:y();this.queries[R]=A,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:R,queryType:"HitAll",ray:x})},t.prototype.hitFirstAvatar=function(x,A){d("not implemented yet")},t.prototype.hitAllAvatars=function(x,A){d("not implemented yet")},t.prototype.handleRaycastHitFirstResponse=function(x){this.queries[x.payload.queryId](x.payload.payload),delete this.queries[x.payload.queryId]},t.prototype.handleRaycastHitAllResponse=function(x){this.queries[x.payload.queryId](x.payload.payload),delete this.queries[x.payload.queryId]},t}(),qe=function(){function t(){}return t.prototype.activate=function(x){x.eventManager.addListener(ht,this,(function(x){"HitFirst"===x.payload.queryType?Qe.instance.handleRaycastHitFirstResponse(x):"HitAll"===x.payload.queryType&&Qe.instance.handleRaycastHitAllResponse(x)})),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")},t}(),We=function(){function t(){}return t.prototype.activate=function(x){x.eventManager.addListener(dt,this,(function(x){ce.instance.handlePointerEvent(x.payload)})),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("pointerEvent"))},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("pointerEvent"))},t}(),He=function(){function t(){this.handlerMap={}}return t.prototype.activate=function(x){x.eventManager.addListener(lt,this,this.handleEvent),x.eventManager.addListener(U,this,this.componentAdded),x.eventManager.addListener(z,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")},t.prototype.onAddEntity=function(x){for(var A in x.components){var E=x.components[A];E instanceof ke&&(this.handlerMap[E.uuid]=E)}},t.prototype.onRemoveEntity=function(x){for(var A in x.components){var E=x.components[A];E instanceof ke&&delete this.handlerMap[E.uuid]}},t.prototype.componentAdded=function(x){if(x.entity.isAddedToEngine()){var A=x.entity.components[x.componentName];A instanceof ke&&(this.handlerMap[A.uuid]=A)}},t.prototype.componentRemoved=function(x){x.entity.isAddedToEngine()&&x.component instanceof ke&&delete this.handlerMap[x.component.uuid]},t.prototype.handleEvent=function(x){if(x.uuid in this.handlerMap){var A=this.handlerMap[x.uuid];A&&A.callback&&"call"in A.callback&&A.callback(x.payload)}},t}(),$e=new qe,Ge=new We,Ye=new He,Xe=function(A){function n(x){var E=A.call(this)||this;return E.loop=!1,E.volume=1,E.url=x,E}return o(n,A),r([Z.readonly],n.prototype,"url",void 0),r([Z.field],n.prototype,"loop",void 0),r([Z.field],n.prototype,"loadingCompleteEventId",void 0),r([Z.field],n.prototype,"volume",void 0),r([F("engine.AudioClip",x.CLASS_ID.AUDIO_CLIP)],n)}(Z),Ke=function(A){function n(x){var E=A.call(this)||this;if(E.audioClip=x,E.loop=!1,E.volume=1,E.playing=!1,E.pitch=1,E.playedAtTimestamp=Date.now(),!(x instanceof Xe))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");return E.audioClipId=D(x),E}return o(n,A),n.prototype.playOnce=function(){return this.playing=!0,this.dirty=!0,this.playedAtTimestamp=Date.now(),this.data.nonce=Math.random(),this},r([Z.readonly],n.prototype,"audioClipId",void 0),r([Z.field],n.prototype,"loop",void 0),r([Z.field],n.prototype,"volume",void 0),r([Z.field],n.prototype,"playing",void 0),r([Z.field],n.prototype,"pitch",void 0),r([Z.field],n.prototype,"playedAtTimestamp",void 0),r([M("engine.AudioSource",x.CLASS_ID.AUDIO_SOURCE)],n)}(Z),Je=function(A){function n(x){var E=A.call(this)||this;return E.playing=!1,E.volume=1,E.url=x,E.playing=!0,E}return o(n,A),r([Z.readonly],n.prototype,"url",void 0),r([Z.field],n.prototype,"playing",void 0),r([Z.field],n.prototype,"volume",void 0),r([M("engine.AudioStream",x.CLASS_ID.AUDIO_STREAM)],n)}(Z);x.Gizmo=void 0,(Ue=x.Gizmo||(x.Gizmo={})).MOVE="MOVE",Ue.ROTATE="ROTATE",Ue.SCALE="SCALE",Ue.NONE="NONE";var Ze,tn=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.type="gizmoEvent",x}return o(n,A),r([Z.readonly],n.prototype,"type",void 0),r([M("engine.gizmoEvent",x.CLASS_ID.UUID_CALLBACK)],n)}(ke),en=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.position=!0,x.rotation=!0,x.scale=!0,x.cycle=!0,x.localReference=!1,x}return o(n,A),r([Z.field],n.prototype,"position",void 0),r([Z.field],n.prototype,"rotation",void 0),r([Z.field],n.prototype,"scale",void 0),r([Z.field],n.prototype,"cycle",void 0),r([Z.field],n.prototype,"selectedGizmo",void 0),r([Z.field],n.prototype,"localReference",void 0),r([M("engine.gizmos",x.CLASS_ID.GIZMOS)],n)}(Z),nn=function(x){function e(A){var E=x.call(this)||this;return E.name=null,E.visible=!0,E.opacity=1,E.hAlign="center",E.vAlign="center",E.width="100px",E.height="50px",E.positionX="0px",E.positionY="0px",E.isPointerBlocker=!0,A&&(E._parent=A,E.data.parentComponent=D(A)),E}return o(e,x),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentComponent",{get:function(){return this.data.parentComponent},enumerable:!1,configurable:!0}),r([Z.field],e.prototype,"name",void 0),r([Z.field],e.prototype,"visible",void 0),r([Z.field],e.prototype,"opacity",void 0),r([Z.field],e.prototype,"hAlign",void 0),r([Z.field],e.prototype,"vAlign",void 0),r([Z.uiValue],e.prototype,"width",void 0),r([Z.uiValue],e.prototype,"height",void 0),r([Z.uiValue],e.prototype,"positionX",void 0),r([Z.uiValue],e.prototype,"positionY",void 0),r([Z.field],e.prototype,"isPointerBlocker",void 0),e}(Z),on=function(A){function n(){return A.call(this,null)||this}return o(n,A),r([F("engine.shape",x.CLASS_ID.UI_FULLSCREEN_SHAPE)],n)}(nn),rn=function(A){function n(){return A.call(this,null)||this}return o(n,A),r([F("engine.shape",x.CLASS_ID.UI_WORLD_SPACE_SHAPE)],n)}(nn),sn=function(A){function n(){return A.call(this,null)||this}return o(n,A),r([F("engine.shape",x.CLASS_ID.UI_SCREEN_SPACE_SHAPE)],n)}(nn),an=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.adaptWidth=!1,x.adaptHeight=!1,x.thickness=0,x.color=$t.Clear(),x.alignmentUsesSize=!0,x}return o(n,A),r([Z.field],n.prototype,"adaptWidth",void 0),r([Z.field],n.prototype,"adaptHeight",void 0),r([Z.field],n.prototype,"thickness",void 0),r([Z.field],n.prototype,"color",void 0),r([Z.field],n.prototype,"alignmentUsesSize",void 0),r([F("engine.shape",x.CLASS_ID.UI_CONTAINER_RECT)],n)}(nn);x.UIStackOrientation=void 0,(Ze=x.UIStackOrientation||(x.UIStackOrientation={}))[Ze.VERTICAL=0]="VERTICAL",Ze[Ze.HORIZONTAL=1]="HORIZONTAL";var un=function(A){function n(){var E=null!==A&&A.apply(this,arguments)||this;return E.adaptWidth=!0,E.adaptHeight=!0,E.color=$t.Clear(),E.stackOrientation=x.UIStackOrientation.VERTICAL,E.spacing=0,E}return o(n,A),r([Z.field],n.prototype,"adaptWidth",void 0),r([Z.field],n.prototype,"adaptHeight",void 0),r([Z.field],n.prototype,"color",void 0),r([Z.field],n.prototype,"stackOrientation",void 0),r([Z.field],n.prototype,"spacing",void 0),r([F("engine.shape",x.CLASS_ID.UI_CONTAINER_STACK)],n)}(nn),cn=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.fontSize=10,x.fontWeight="normal",x.thickness=0,x.cornerRadius=0,x.color=$t.White(),x.background=$t.White(),x.paddingTop=0,x.paddingRight=0,x.paddingBottom=0,x.paddingLeft=0,x.shadowBlur=0,x.shadowOffsetX=0,x.shadowOffsetY=0,x.shadowColor=$t.Black(),x.text="button",x}return o(n,A),r([Z.field],n.prototype,"fontSize",void 0),r([Z.field],n.prototype,"fontWeight",void 0),r([Z.field],n.prototype,"thickness",void 0),r([Z.field],n.prototype,"cornerRadius",void 0),r([Z.field],n.prototype,"color",void 0),r([Z.field],n.prototype,"background",void 0),r([Z.field],n.prototype,"paddingTop",void 0),r([Z.field],n.prototype,"paddingRight",void 0),r([Z.field],n.prototype,"paddingBottom",void 0),r([Z.field],n.prototype,"paddingLeft",void 0),r([Z.field],n.prototype,"shadowBlur",void 0),r([Z.field],n.prototype,"shadowOffsetX",void 0),r([Z.field],n.prototype,"shadowOffsetY",void 0),r([Z.field],n.prototype,"shadowColor",void 0),r([Z.field],n.prototype,"text",void 0),r([F("engine.shape",x.CLASS_ID.UI_BUTTON_SHAPE)],n)}(nn),pn=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.outlineWidth=0,x.outlineColor=$t.White(),x.color=$t.White(),x.fontSize=10,x.fontAutoSize=!1,x.fontWeight="normal",x.value="",x.lineSpacing=0,x.lineCount=0,x.adaptWidth=!1,x.adaptHeight=!1,x.textWrapping=!1,x.shadowBlur=0,x.shadowOffsetX=0,x.shadowOffsetY=0,x.shadowColor=$t.Black(),x.hTextAlign="left",x.vTextAlign="bottom",x.paddingTop=0,x.paddingRight=0,x.paddingBottom=0,x.paddingLeft=0,x}return o(n,A),r([Z.field],n.prototype,"outlineWidth",void 0),r([Z.field],n.prototype,"outlineColor",void 0),r([Z.field],n.prototype,"color",void 0),r([Z.field],n.prototype,"fontSize",void 0),r([Z.field],n.prototype,"fontAutoSize",void 0),r([Z.field],n.prototype,"fontWeight",void 0),r([Z.component],n.prototype,"font",void 0),r([Z.field],n.prototype,"value",void 0),r([Z.field],n.prototype,"lineSpacing",void 0),r([Z.field],n.prototype,"lineCount",void 0),r([Z.field],n.prototype,"adaptWidth",void 0),r([Z.field],n.prototype,"adaptHeight",void 0),r([Z.field],n.prototype,"textWrapping",void 0),r([Z.field],n.prototype,"shadowBlur",void 0),r([Z.field],n.prototype,"shadowOffsetX",void 0),r([Z.field],n.prototype,"shadowOffsetY",void 0),r([Z.field],n.prototype,"shadowColor",void 0),r([Z.field],n.prototype,"hTextAlign",void 0),r([Z.field],n.prototype,"vTextAlign",void 0),r([Z.field],n.prototype,"paddingTop",void 0),r([Z.field],n.prototype,"paddingRight",void 0),r([Z.field],n.prototype,"paddingBottom",void 0),r([Z.field],n.prototype,"paddingLeft",void 0),r([F("engine.shape",x.CLASS_ID.UI_TEXT_SHAPE)],n)}(nn),ln=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.outlineWidth=0,x.outlineColor=$t.Black(),x.color=$t.Clear(),x.thickness=1,x.fontSize=10,x.fontWeight="normal",x.value="",x.placeholderColor=$t.White(),x.placeholder="",x.margin=10,x.maxWidth=100,x.hTextAlign="left",x.vTextAlign="bottom",x.autoStretchWidth=!0,x.background=$t.Black(),x.focusedBackground=$t.Black(),x.textWrapping=!1,x.shadowBlur=0,x.shadowOffsetX=0,x.shadowOffsetY=0,x.shadowColor=$t.White(),x.paddingTop=0,x.paddingRight=0,x.paddingBottom=0,x.paddingLeft=0,x.onTextSubmit=null,x.onChanged=null,x.onFocus=null,x.onBlur=null,x}return o(n,A),r([Z.field],n.prototype,"outlineWidth",void 0),r([Z.field],n.prototype,"outlineColor",void 0),r([Z.field],n.prototype,"color",void 0),r([Z.field],n.prototype,"thickness",void 0),r([Z.field],n.prototype,"fontSize",void 0),r([Z.field],n.prototype,"fontWeight",void 0),r([Z.component],n.prototype,"font",void 0),r([Z.field],n.prototype,"value",void 0),r([Z.field],n.prototype,"placeholderColor",void 0),r([Z.field],n.prototype,"placeholder",void 0),r([Z.field],n.prototype,"margin",void 0),r([Z.field],n.prototype,"maxWidth",void 0),r([Z.field],n.prototype,"hTextAlign",void 0),r([Z.field],n.prototype,"vTextAlign",void 0),r([Z.field],n.prototype,"autoStretchWidth",void 0),r([Z.field],n.prototype,"background",void 0),r([Z.field],n.prototype,"focusedBackground",void 0),r([Z.field],n.prototype,"textWrapping",void 0),r([Z.field],n.prototype,"shadowBlur",void 0),r([Z.field],n.prototype,"shadowOffsetX",void 0),r([Z.field],n.prototype,"shadowOffsetY",void 0),r([Z.field],n.prototype,"shadowColor",void 0),r([Z.field],n.prototype,"paddingTop",void 0),r([Z.field],n.prototype,"paddingRight",void 0),r([Z.field],n.prototype,"paddingBottom",void 0),r([Z.field],n.prototype,"paddingLeft",void 0),r([ke.uuidEvent],n.prototype,"onTextSubmit",void 0),r([ke.uuidEvent],n.prototype,"onChanged",void 0),r([ke.uuidEvent],n.prototype,"onFocus",void 0),r([ke.uuidEvent],n.prototype,"onBlur",void 0),r([F("engine.shape",x.CLASS_ID.UI_INPUT_TEXT_SHAPE)],n)}(nn),hn=function(A){function n(x,E){var R=A.call(this,x)||this;return R.sourceLeft=0,R.sourceTop=0,R.sourceWidth=1,R.sourceHeight=1,R.paddingTop=0,R.paddingRight=0,R.paddingBottom=0,R.paddingLeft=0,R.sizeInPixels=!0,R.onClick=null,R.source=E,R}return o(n,A),r([Z.field],n.prototype,"sourceLeft",void 0),r([Z.field],n.prototype,"sourceTop",void 0),r([Z.field],n.prototype,"sourceWidth",void 0),r([Z.field],n.prototype,"sourceHeight",void 0),r([Z.component],n.prototype,"source",void 0),r([Z.field],n.prototype,"paddingTop",void 0),r([Z.field],n.prototype,"paddingRight",void 0),r([Z.field],n.prototype,"paddingBottom",void 0),r([Z.field],n.prototype,"paddingLeft",void 0),r([Z.field],n.prototype,"sizeInPixels",void 0),r([ke.uuidEvent],n.prototype,"onClick",void 0),r([F("engine.shape",x.CLASS_ID.UI_IMAGE_SHAPE)],n)}(nn),dn=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.valueX=0,x.valueY=0,x.borderColor=$t.White(),x.backgroundColor=$t.Clear(),x.isHorizontal=!1,x.isVertical=!1,x.paddingTop=0,x.paddingRight=0,x.paddingBottom=0,x.paddingLeft=0,x.onChanged=null,x}return o(n,A),r([Z.field],n.prototype,"valueX",void 0),r([Z.field],n.prototype,"valueY",void 0),r([Z.field],n.prototype,"borderColor",void 0),r([Z.field],n.prototype,"backgroundColor",void 0),r([Z.field],n.prototype,"isHorizontal",void 0),r([Z.field],n.prototype,"isVertical",void 0),r([Z.field],n.prototype,"paddingTop",void 0),r([Z.field],n.prototype,"paddingRight",void 0),r([Z.field],n.prototype,"paddingBottom",void 0),r([Z.field],n.prototype,"paddingLeft",void 0),r([ke.uuidEvent],n.prototype,"onChanged",void 0),r([F("engine.shape",x.CLASS_ID.UI_SLIDER_SHAPE)],n)}(nn),gn=function(A){function n(){var x=null!==A&&A.apply(this,arguments)||this;return x.useDummyModel=!1,x.talking=!1,x}var E;return o(n,A),E=n,n.Dummy=function(){var x=new E;return x.useDummyModel=!0,x},r([Z.field],n.prototype,"id",void 0),r([Z.field],n.prototype,"name",void 0),r([Z.field],n.prototype,"expressionTriggerId",void 0),r([Z.field],n.prototype,"expressionTriggerTimestamp",void 0),r([Z.field],n.prototype,"bodyShape",void 0),r([Z.field],n.prototype,"wearables",void 0),r([Z.field],n.prototype,"skinColor",void 0),r([Z.field],n.prototype,"hairColor",void 0),r([Z.field],n.prototype,"eyeColor",void 0),r([Z.field],n.prototype,"useDummyModel",void 0),r([Z.field],n.prototype,"talking",void 0),E=r([M("engine.avatarShape",x.CLASS_ID.AVATAR_SHAPE)],n)}(Z),mn=function(A){function n(x){var E=A.call(this,x)||this;return E.type="onFocus",Ye.handlerMap[E.uuid]=E,E}return o(n,A),r([Z.readonly],n.prototype,"type",void 0),r([M("engine.onFocus",x.CLASS_ID.UUID_CALLBACK)],n)}(ke),yn=function(A){function n(x){var E=A.call(this,x)||this;return E.type="onTextSubmit",Ye.handlerMap[E.uuid]=E,E}return o(n,A),r([Z.readonly],n.prototype,"type",void 0),r([M("engine.onTextSubmit",x.CLASS_ID.UUID_CALLBACK)],n)}(ke),wn=function(A){function n(x){var E=A.call(this,x)||this;return E.type="onBlur",Ye.handlerMap[E.uuid]=E,E}return o(n,A),r([Z.readonly],n.prototype,"type",void 0),r([M("engine.onBlur",x.CLASS_ID.UUID_CALLBACK)],n)}(ke),vn=function(A){function n(x){var E=A.call(this,x)||this;return E.type="onEnter",Ye.handlerMap[E.uuid]=E,E}return o(n,A),r([Z.readonly],n.prototype,"type",void 0),r([M("engine.onEnter",x.CLASS_ID.UUID_CALLBACK)],n)}(ke),bn=function(A){function n(x){var E=A.call(this,x)||this;return E.type="onChange",Ye.handlerMap[E.uuid]=E,E}return o(n,A),r([Z.readonly],n.prototype,"type",void 0),r([M("engine.onChange",x.CLASS_ID.UUID_CALLBACK)],n)}(ke),xn=function(A){function n(x,E){var R=A.call(this,x)||this;return R.type="onClick",Ye.handlerMap[R.uuid]=R,E&&(R.showFeedback=!(!1===E.showFeedback),E.button&&(R.button=E.button),E.hoverText&&(R.hoverText=E.hoverText),E.distance&&(R.distance=E.distance)),R}return o(n,A),r([Z.readonly],n.prototype,"type",void 0),r([M("engine.onClick",x.CLASS_ID.UUID_CALLBACK)],n)}(ze),Tn=function(A){function n(x,E){var R=A.call(this,x)||this;return R.type="pointerDown",Ye.handlerMap[R.uuid]=R,E&&(R.showFeedback=!(!1===E.showFeedback),E.button&&(R.button=E.button),E.hoverText&&(R.hoverText=E.hoverText),E.distance&&(R.distance=E.distance)),R}return o(n,A),r([Z.readonly],n.prototype,"type",void 0),r([M("engine.pointerDown",x.CLASS_ID.UUID_CALLBACK)],n)}(ze),An=function(A){function n(x,E){var R=A.call(this,x)||this;return R.type="pointerUp",Ye.handlerMap[R.uuid]=R,E&&(R.showFeedback=!(!1===E.showFeedback),E.button&&(R.button=E.button),E.hoverText&&(R.hoverText=E.hoverText),E.distance&&(R.distance=E.distance)),R}return o(n,A),r([Z.readonly],n.prototype,"type",void 0),r([M("engine.pointerUp",x.CLASS_ID.UUID_CALLBACK)],n)}(ze),En=null,Cn=null,Sn=null;function fn(){return Sn||(Sn=new pt),Sn}var _n=function(){function t(){var x=this;this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!Cn){(Cn=dcl.loadModule("@decentraland/CommunicationsController",{})).then((function(x){En=x}));var x=fn();dcl.subscribe("comms"),dcl.onEvent((function(A){"comms"===A.type&&x.notifyObservers(A.data)}))}return Cn}().then((function(A){x.connected=!0,x.flush()}))}return t.prototype.on=function(x,A){return fn().add((function(E){try{var R=JSON.parse(E.message);R.message===x&&A(R.payload,E.sender)}catch(E){dcl.error("Error parsing comms message "+(E.message||""),E)}}))},t.prototype.sendRaw=function(x){this.messageQueue.push(x),this.connected&&this.flush()},t.prototype.emit=function(x,A){var E=JSON.stringify({message:x,payload:A});this.sendRaw(E),fn().notifyObservers({message:E,sender:"self"})},t.prototype.flush=function(){var x=this;if(0!==this.messageQueue.length&&this.connected&&En&&!this.flushing){var A=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(En.rpcHandle,"send",[A]).then((function(A){x.flushing=!1,x.flush()}),(function(A){x.flushing=!1,l("Error flushing MessageBus",A)}))}},t}(),In=new nt("scene");In.uuid="0";var Rn=new ot(In);F.engine=Rn,"undefined"!=typeof dcl&&(Rn.addSystem(new St(dcl),1/0),ct(dcl)),Rn.addSystem(Ye),Rn.addSystem(Ge),Rn.addSystem($e),x.AVATAR_OBSERVABLE="AVATAR_OBSERVABLE",x.Angle=Qt,x.AnimationState=ie,x.Animator=Ce,x.Arc2=zt,x.Attachable=A,x.AudioClip=Xe,x.AudioSource=Ke,x.AudioStream=Je,x.AvatarModifierArea=le,x.AvatarShape=gn,x.Axis=Wt,x.BasicMaterial=Pe,x.BezierCurve=Ht,x.Billboard=de,x.BoxShape=ge,x.Camera=je,x.CircleShape=ye,x.Color3=Gt,x.Color4=$t,x.Component=M,x.ComponentAdded=U,x.ComponentGroup=et,x.ComponentRemoved=z,x.ConeShape=ve,x.Curve3=Xt,x.CylinderShape=be,x.DEG2RAD=Dt,x.DisposableComponent=F,x.DisposableComponentCreated=X,x.DisposableComponentRemoved=K,x.DisposableComponentUpdated=J,x.Engine=ot,x.Entity=nt,x.Epsilon=kt,x.EventConstructor=w,x.EventManager=O,x.Font=_e,x.Frustum=Zt,x.GLTFShape=xe,x.Gizmos=en,x.GlobalPointerDown=ae,x.GlobalPointerUp=ue,x.Input=ce,x.Material=Ve,x.MathTmp=Ut,x.Matrix=Nt,x.MessageBus=_n,x.MultiObserver=ut,x.NFTShape=Ae,x.OBJShape=Se,x.Observable=pt,x.ObservableComponent=Z,x.Observer=Y,x.ObserverEventState=at,x.OnAnimationEnd=Le,x.OnBlur=wn,x.OnChanged=bn,x.OnClick=xn,x.OnEnter=vn,x.OnFocus=mn,x.OnGizmoEvent=tn,x.OnPointerDown=Tn,x.OnPointerLock=De,x.OnPointerUUIDEvent=ze,x.OnPointerUp=An,x.OnTextSubmit=yn,x.OnUUIDEvent=ke,x.ParentChanged=Q,x.Path2=te,x.Path3D=ee,x.PhysicsCast=Qe,x.Plane=Kt,x.PlaneShape=we,x.PointerEvent=dt,x.PointerEventComponent=Yt,x.PointerEventSystem=We,x.Quaternion=Mt,x.RAD2DEG=Lt,x.RaycastEventSystem=qe,x.RaycastResponse=ht,x.Scalar=Bt,x.Shape=fe,x.Size=ne,x.SmartItem=Be,x.SphereShape=me,x.Subscription=Jt,x.TextShape=Re,x.Texture=Ee,x.ToGammaSpace=Vt,x.ToLinearSpace=Pt,x.Transform=he,x.UIButton=cn,x.UICanvas=sn,x.UIContainerRect=an,x.UIContainerStack=un,x.UIFullScreen=on,x.UIImage=hn,x.UIInputText=ln,x.UIScrollRect=dn,x.UIShape=nn,x.UIText=pn,x.UIValue=W,x.UIWorldSpace=rn,x.UUIDEvent=lt,x.UUIDEventSystem=He,x.Vector2=qt,x.Vector3=jt,x.Vector4=Ft,x.VideoClip=Fe,x.VideoTexture=Me,x._initEventObservables=ct,x.buildArray=v,x.engine=Rn,x.error=l,x.executeTask=q,x.getComponentClassId=N,x.getComponentId=D,x.getComponentName=L,x.getMessageObserver=fn,x.isDisposableComponent=B,x.log=d,x.newId=f,x.onCameraModeChangedObservable=ft,x.onEnterScene=yt,x.onEnterSceneObservable=mt,x.onIdleStateChangedObservable=gt,x.onLeaveScene=vt,x.onLeaveSceneObservable=wt,x.onPlayerExpressionObservable=xt,x.onProfileChanged=At,x.onSceneReadyObservable=bt,x.onVideoEvent=Tt,x.openExternalURL=function(x){"undefined"!=typeof dcl?dcl.openExternalUrl(x):l("ERROR: openExternalURL dcl is undefined")},x.openNFTDialog=function(x,A){if(void 0===A&&(A=null),"undefined"!=typeof dcl){var E=x.match(/ethereum:\/\/(.+)\/(.+)/);if(!E||E.length<3)return;dcl.openNFTDialog(E[1],E[2],A)}else l("ERROR: openNFTDialog dcl is undefined")},x.pointerEventSystem=Ge,x.raycastEventSystem=$e,x.teleportTo=function(x){var A;A=[x],void 0===rt&&"undefined"!=typeof dcl&&(rt=dcl.loadModule("@decentraland/UserActionModule",{})),void 0!==rt&&"undefined"!=typeof dcl&&rt.then((function(x){dcl.callRpc(x.rpcHandle,"requestTeleport",A)}))},x.uuid=y,x.uuidEventSystem=Ye,Object.defineProperty(x,"__esModule",{value:!0})}(this.self=this.self||{}),function(global,x){"object"==typeof exports&&"undefined"!=typeof module?x(exports):"function"==typeof define&&define.amd?define("colyseus.js",["exports"],x):x((global="undefined"!=typeof globalThis?globalThis:global||self).Colyseus={})}(this,(function(x){ArrayBuffer.isView||(ArrayBuffer.isView=function(x){return null!==x&&"object"==typeof x&&x.buffer instanceof ArrayBuffer}),"undefined"==typeof globalThis&&"undefined"!=typeof window&&(window.globalThis=window)
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */;var extendStatics=function(x,A){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,A){x.__proto__=A}||function(x,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(x[E]=A[E])},extendStatics(x,A)};function __extends(x,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function __(){this.constructor=x}extendStatics(x,A),x.prototype=null===A?Object.create(A):(__.prototype=A.prototype,new __)}function __awaiter(x,A,E,R){return new(E||(E=Promise))((function(O,V){function fulfilled(x){try{step(R.next(x))}catch(x){V(x)}}function rejected(x){try{step(R.throw(x))}catch(x){V(x)}}function step(x){var A;x.done?O(x.value):(A=x.value,A instanceof E?A:new E((function(x){x(A)}))).then(fulfilled,rejected)}step((R=R.apply(x,A||[])).next())}))}function __generator(x,A){var E,R,O,V,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return V={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function verb(V){return function(U){return function(V){if(E)throw new TypeError("Generator is already executing.");for(;z;)try{if(E=1,R&&(O=2&V[0]?R.return:V[0]?R.throw||((O=R.return)&&O.call(R),0):R.next)&&!(O=O.call(R,V[1])).done)return O;switch(R=0,O&&(V=[2&V[0],O.value]),V[0]){case 0:case 1:O=V;break;case 4:return z.label++,{value:V[1],done:!1};case 5:z.label++,R=V[1],V=[0];continue;case 7:V=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==V[0]&&2!==V[0])){z=0;continue}if(3===V[0]&&(!O||V[1]>O[0]&&V[1]<O[3])){z.label=V[1];break}if(6===V[0]&&z.label<O[1]){z.label=O[1],O=V;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(V);break}O[2]&&z.ops.pop(),z.trys.pop();continue}V=A.call(x,z)}catch(x){V=[6,x],R=0}finally{E=O=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,U])}}}function apply(x,A){A.headers=x.headers||{},A.statusMessage=x.statusText,A.statusCode=x.status,A.data=x.response}function send(x,A,E){return new Promise((function(R,O){E=E||{};var V,z,U,Q=new XMLHttpRequest,W=E.body,H=E.headers||{};for(V in E.timeout&&(Q.timeout=E.timeout),Q.ontimeout=Q.onerror=function(x){x.timeout="timeout"==x.type,O(x)},Q.open(x,A.href||A),Q.onload=function(){for(U=Q.getAllResponseHeaders().trim().split(/[\r\n]+/),apply(Q,Q);z=U.shift();)z=z.split(": "),Q.headers[z.shift().toLowerCase()]=z.join(": ");if((z=Q.headers["content-type"])&&~z.indexOf("application/json"))try{Q.data=JSON.parse(Q.data,E.reviver)}catch(x){return apply(Q,x),O(x)}(Q.status>=400?O:R)(Q)},typeof FormData<"u"&&W instanceof FormData||W&&"object"==typeof W&&(H["content-type"]="application/json",W=JSON.stringify(W)),Q.withCredentials=!!E.withCredentials,H)Q.setRequestHeader(V,H[V]);Q.send(W)}))}var A=send.bind(send,"GET"),E=send.bind(send,"POST"),R=send.bind(send,"PATCH"),O=send.bind(send,"DELETE"),V=A,z=R,U=E,Q=send.bind(send,"PUT"),W=send,H={del:O,get:V,patch:z,post:U,put:Q,send:W},$=Object.freeze(Object.assign(Object.create(null),H,{default:H,del:O,get:V,patch:z,post:U,put:Q,send:W})),G=function(x){function ServerError(A,E){var R=x.call(this,E)||this;return R.name="ServerError",R.code=A,R}return __extends(ServerError,x),ServerError}(Error);function Decoder(x,A){if(this._offset=A,x instanceof ArrayBuffer)this._buffer=x,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(x))throw new Error("Invalid argument");this._buffer=x.buffer,this._view=new DataView(this._buffer,x.byteOffset,x.byteLength)}}function utf8Write(x,A,E){for(var R=0,O=0,V=E.length;O<V;O++)(R=E.charCodeAt(O))<128?x.setUint8(A++,R):R<2048?(x.setUint8(A++,192|R>>6),x.setUint8(A++,128|63&R)):R<55296||R>=57344?(x.setUint8(A++,224|R>>12),x.setUint8(A++,128|R>>6&63),x.setUint8(A++,128|63&R)):(O++,R=65536+((1023&R)<<10|1023&E.charCodeAt(O)),x.setUint8(A++,240|R>>18),x.setUint8(A++,128|R>>12&63),x.setUint8(A++,128|R>>6&63),x.setUint8(A++,128|63&R))}function _encode(x,A,E){var R=typeof E,O=0,V=0,z=0,U=0,Q=0,W=0;if("string"===R){if(Q=function(x){for(var A=0,E=0,R=0,O=x.length;R<O;R++)(A=x.charCodeAt(R))<128?E+=1:A<2048?E+=2:A<55296||A>=57344?E+=3:(R++,E+=4);return E}(E),Q<32)x.push(160|Q),W=1;else if(Q<256)x.push(217,Q),W=2;else if(Q<65536)x.push(218,Q>>8,Q),W=3;else{if(!(Q<4294967296))throw new Error("String too long");x.push(219,Q>>24,Q>>16,Q>>8,Q),W=5}return A.push({_str:E,_length:Q,_offset:x.length}),W+Q}if("number"===R)return Math.floor(E)===E&&isFinite(E)?E>=0?E<128?(x.push(E),1):E<256?(x.push(204,E),2):E<65536?(x.push(205,E>>8,E),3):E<4294967296?(x.push(206,E>>24,E>>16,E>>8,E),5):(z=E/Math.pow(2,32)>>0,U=E>>>0,x.push(207,z>>24,z>>16,z>>8,z,U>>24,U>>16,U>>8,U),9):E>=-32?(x.push(E),1):E>=-128?(x.push(208,E),2):E>=-32768?(x.push(209,E>>8,E),3):E>=-2147483648?(x.push(210,E>>24,E>>16,E>>8,E),5):(z=Math.floor(E/Math.pow(2,32)),U=E>>>0,x.push(211,z>>24,z>>16,z>>8,z,U>>24,U>>16,U>>8,U),9):(x.push(203),A.push({_float:E,_length:8,_offset:x.length}),9);if("object"===R){if(null===E)return x.push(192),1;if(Array.isArray(E)){if((Q=E.length)<16)x.push(144|Q),W=1;else if(Q<65536)x.push(220,Q>>8,Q),W=3;else{if(!(Q<4294967296))throw new Error("Array too large");x.push(221,Q>>24,Q>>16,Q>>8,Q),W=5}for(O=0;O<Q;O++)W+=_encode(x,A,E[O]);return W}if(E instanceof Date){var H=E.getTime();return z=Math.floor(H/Math.pow(2,32)),U=H>>>0,x.push(215,0,z>>24,z>>16,z>>8,z,U>>24,U>>16,U>>8,U),10}if(E instanceof ArrayBuffer){if((Q=E.byteLength)<256)x.push(196,Q),W=2;else if(Q<65536)x.push(197,Q>>8,Q),W=3;else{if(!(Q<4294967296))throw new Error("Buffer too large");x.push(198,Q>>24,Q>>16,Q>>8,Q),W=5}return A.push({_bin:E,_length:Q,_offset:x.length}),W+Q}if("function"==typeof E.toJSON)return _encode(x,A,E.toJSON());var $=[],G="",X=Object.keys(E);for(O=0,V=X.length;O<V;O++)"function"!=typeof E[G=X[O]]&&$.push(G);if((Q=$.length)<16)x.push(128|Q),W=1;else if(Q<65536)x.push(222,Q>>8,Q),W=3;else{if(!(Q<4294967296))throw new Error("Object too large");x.push(223,Q>>24,Q>>16,Q>>8,Q),W=5}for(O=0;O<Q;O++)W+=_encode(x,A,G=$[O]),W+=_encode(x,A,E[G]);return W}if("boolean"===R)return x.push(E?195:194),1;if("undefined"===R)return x.push(212,0,0),3;throw new Error("Could not encode")}function encode(x){var A=[],E=[],R=_encode(A,E,x),O=new ArrayBuffer(R),V=new DataView(O),z=0,U=0,Q=-1;E.length>0&&(Q=E[0]._offset);for(var W,H=0,$=0,G=0,X=A.length;G<X;G++)if(V.setUint8(U+G,A[G]),G+1===Q){if(H=(W=E[z])._length,$=U+Q,W._bin)for(var K=new Uint8Array(W._bin),J=0;J<H;J++)V.setUint8($+J,K[J]);else W._str?utf8Write(V,$,W._str):void 0!==W._float&&V.setFloat64($,W._float);U+=H,E[++z]&&(Q=E[z]._offset)}return O}Decoder.prototype._array=function(x){for(var A=new Array(x),E=0;E<x;E++)A[E]=this._parse();return A},Decoder.prototype._map=function(x){for(var A={},E=0;E<x;E++)A[this._parse()]=this._parse();return A},Decoder.prototype._str=function(x){var A=function(x,A,E){for(var R="",O=0,V=A,z=A+E;V<z;V++){var U=x.getUint8(V);if(0!=(128&U))if(192!=(224&U))if(224!=(240&U)){if(240!=(248&U))throw new Error("Invalid byte "+U.toString(16));(O=(7&U)<<18|(63&x.getUint8(++V))<<12|(63&x.getUint8(++V))<<6|(63&x.getUint8(++V))<<0)>=65536?(O-=65536,R+=String.fromCharCode(55296+(O>>>10),56320+(1023&O))):R+=String.fromCharCode(O)}else R+=String.fromCharCode((15&U)<<12|(63&x.getUint8(++V))<<6|(63&x.getUint8(++V))<<0);else R+=String.fromCharCode((31&U)<<6|63&x.getUint8(++V));else R+=String.fromCharCode(U)}return R}(this._view,this._offset,x);return this._offset+=x,A},Decoder.prototype._bin=function(x){var A=this._buffer.slice(this._offset,this._offset+x);return this._offset+=x,A},Decoder.prototype._parse=function(){var x,A=this._view.getUint8(this._offset++),E=0,R=0,O=0,V=0;if(A<192)return A<128?A:A<144?this._map(15&A):A<160?this._array(15&A):this._str(31&A);if(A>223)return-1*(255-A+1);switch(A){case 192:return null;case 194:return!1;case 195:return!0;case 196:return E=this._view.getUint8(this._offset),this._offset+=1,this._bin(E);case 197:return E=this._view.getUint16(this._offset),this._offset+=2,this._bin(E);case 198:return E=this._view.getUint32(this._offset),this._offset+=4,this._bin(E);case 199:return E=this._view.getUint8(this._offset),R=this._view.getInt8(this._offset+1),this._offset+=2,[R,this._bin(E)];case 200:return E=this._view.getUint16(this._offset),R=this._view.getInt8(this._offset+2),this._offset+=3,[R,this._bin(E)];case 201:return E=this._view.getUint32(this._offset),R=this._view.getInt8(this._offset+4),this._offset+=5,[R,this._bin(E)];case 202:return x=this._view.getFloat32(this._offset),this._offset+=4,x;case 203:return x=this._view.getFloat64(this._offset),this._offset+=8,x;case 204:return x=this._view.getUint8(this._offset),this._offset+=1,x;case 205:return x=this._view.getUint16(this._offset),this._offset+=2,x;case 206:return x=this._view.getUint32(this._offset),this._offset+=4,x;case 207:return O=this._view.getUint32(this._offset)*Math.pow(2,32),V=this._view.getUint32(this._offset+4),this._offset+=8,O+V;case 208:return x=this._view.getInt8(this._offset),this._offset+=1,x;case 209:return x=this._view.getInt16(this._offset),this._offset+=2,x;case 210:return x=this._view.getInt32(this._offset),this._offset+=4,x;case 211:return O=this._view.getInt32(this._offset)*Math.pow(2,32),V=this._view.getUint32(this._offset+4),this._offset+=8,O+V;case 212:return R=this._view.getInt8(this._offset),this._offset+=1,0===R?void(this._offset+=1):[R,this._bin(1)];case 213:return R=this._view.getInt8(this._offset),this._offset+=1,[R,this._bin(2)];case 214:return R=this._view.getInt8(this._offset),this._offset+=1,[R,this._bin(4)];case 215:return R=this._view.getInt8(this._offset),this._offset+=1,0===R?(O=this._view.getInt32(this._offset)*Math.pow(2,32),V=this._view.getUint32(this._offset+4),this._offset+=8,new Date(O+V)):[R,this._bin(8)];case 216:return R=this._view.getInt8(this._offset),this._offset+=1,[R,this._bin(16)];case 217:return E=this._view.getUint8(this._offset),this._offset+=1,this._str(E);case 218:return E=this._view.getUint16(this._offset),this._offset+=2,this._str(E);case 219:return E=this._view.getUint32(this._offset),this._offset+=4,this._str(E);case 220:return E=this._view.getUint16(this._offset),this._offset+=2,this._array(E);case 221:return E=this._view.getUint32(this._offset),this._offset+=4,this._array(E);case 222:return E=this._view.getUint16(this._offset),this._offset+=2,this._map(E);case 223:return E=this._view.getUint32(this._offset),this._offset+=4,this._map(E)}throw new Error("Could not parse")};var X,K,J=globalThis.WebSocket||function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},Z=function(){function WebSocketTransport(x){this.events=x}return WebSocketTransport.prototype.send=function(x){x instanceof ArrayBuffer?this.ws.send(x):Array.isArray(x)&&this.ws.send(new Uint8Array(x).buffer)},WebSocketTransport.prototype.connect=function(x){this.ws=new J(x,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror},WebSocketTransport.prototype.close=function(x,A){this.ws.close(x,A)},WebSocketTransport}(),et=function(){function Connection(){this.events={},this.transport=new Z(this.events)}return Connection.prototype.send=function(x){this.transport.send(x)},Connection.prototype.connect=function(x){this.transport.connect(x)},Connection.prototype.close=function(x,A){this.transport.close(x,A)},Connection}(),nt={};function registerSerializer(x,A){nt[x]=A}function getSerializer(x){var A=nt[x];if(!A)throw new Error("missing serializer: "+x);return A}x.Protocol=void 0,(X=x.Protocol||(x.Protocol={}))[X.HANDSHAKE=9]="HANDSHAKE",X[X.JOIN_ROOM=10]="JOIN_ROOM",X[X.ERROR=11]="ERROR",X[X.LEAVE_ROOM=12]="LEAVE_ROOM",X[X.ROOM_DATA=13]="ROOM_DATA",X[X.ROOM_STATE=14]="ROOM_STATE",X[X.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",X[X.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",x.ErrorCode=void 0,(K=x.ErrorCode||(x.ErrorCode={}))[K.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",K[K.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",K[K.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",K[K.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",K[K.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",K[K.AUTH_FAILED=4215]="AUTH_FAILED",K[K.APPLICATION_ERROR=4216]="APPLICATION_ERROR";let createNanoEvents=()=>({events:{},emit(x,...A){(this.events[x]||[]).forEach((x=>x(...A)))},on(x,A){return(this.events[x]=this.events[x]||[]).push(A),()=>this.events[x]=(this.events[x]||[]).filter((x=>x!==A))}});var ot=function(){function EventEmitter(){this.handlers=[]}return EventEmitter.prototype.register=function(x,A){return this.handlers.push(x),this},EventEmitter.prototype.invoke=function(){for(var x=this,A=[],E=0;E<arguments.length;E++)A[E]=arguments[E];this.handlers.forEach((function(E){return E.apply(x,A)}))},EventEmitter.prototype.invokeAsync=function(){for(var x=this,A=[],E=0;E<arguments.length;E++)A[E]=arguments[E];return Promise.all(this.handlers.map((function(E){return E.apply(x,A)})))},EventEmitter.prototype.remove=function(x){var A=this.handlers.indexOf(x);this.handlers[A]=this.handlers[this.handlers.length-1],this.handlers.pop()},EventEmitter.prototype.clear=function(){this.handlers=[]},EventEmitter}();function createSignal(){var x=new ot;function register(A){return x.register(A,null===this)}return register.once=function(A){var callback=function(){for(var E=[],R=0;R<arguments.length;R++)E[R]=arguments[R];A.apply(this,E),x.remove(callback)};x.register(callback)},register.remove=function(A){return x.remove(A)},register.invoke=function(){for(var A=[],E=0;E<arguments.length;E++)A[E]=arguments[E];return x.invoke.apply(x,A)},register.invokeAsync=function(){for(var A=[],E=0;E<arguments.length;E++)A[E]=arguments[E];return x.invokeAsync.apply(x,A)},register.clear=function(){return x.clear()},register}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var it,rt=function(x){var A={exports:{}};return function(x,A){!function(x){
/*! *****************************************************************************
        Copyright (c) Microsoft Corporation.

        Permission to use, copy, modify, and/or distribute this software for any
        purpose with or without fee is hereby granted.

        THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
        REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
        AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
        INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
        LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
        OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
        PERFORMANCE OF THIS SOFTWARE.
        ***************************************************************************** */
var extendStatics=function(x,A){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,A){x.__proto__=A}||function(x,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(x[E]=A[E])},extendStatics(x,A)};function __extends(x,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function __(){this.constructor=x}extendStatics(x,A),x.prototype=null===A?Object.create(A):(__.prototype=A.prototype,new __)}function __decorate(x,A,E,R){var O,V=arguments.length,z=V<3?A:null===R?R=Object.getOwnPropertyDescriptor(A,E):R;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(x,A,E,R);else for(var U=x.length-1;U>=0;U--)(O=x[U])&&(z=(V<3?O(z):V>3?O(A,E,z):O(A,E))||z);return V>3&&z&&Object.defineProperty(A,E,z),z}function __spreadArray(x,A){for(var E=0,R=A.length,O=x.length;E<R;E++,O++)x[O]=A[E];return x}var A,E=255,R=213;x.OPERATION=void 0,(A=x.OPERATION||(x.OPERATION={}))[A.ADD=128]="ADD",A[A.REPLACE=0]="REPLACE",A[A.DELETE=64]="DELETE",A[A.DELETE_AND_ADD=192]="DELETE_AND_ADD",A[A.TOUCH=1]="TOUCH",A[A.CLEAR=10]="CLEAR";var O=function(){function Root(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return Root.prototype.getNextUniqueId=function(){return this.nextUniqueId++},Root.prototype.addRef=function(x,A,E){void 0===E&&(E=!0),this.refs.set(x,A),E&&(this.refCounts[x]=(this.refCounts[x]||0)+1)},Root.prototype.removeRef=function(x){this.refCounts[x]=this.refCounts[x]-1,this.deletedRefs.add(x)},Root.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},Root.prototype.garbageCollectDeletedRefs=function(){var x=this;this.deletedRefs.forEach((function(A){if(x.refCounts[A]<=0){var E=x.refs.get(A);if(E instanceof pt)for(var R in E._definition.schema)"string"!=typeof E._definition.schema[R]&&E[R]&&E[R].$changes&&x.removeRef(E[R].$changes.refId);else{var O=E.$changes.parent._definition,V=O.schema[O.fieldsByIndex[E.$changes.parentIndex]];"function"==typeof Object.values(V)[0]&&Array.from(E.values()).forEach((function(A){return x.removeRef(A.$changes.refId)}))}x.refs.delete(A),delete x.refCounts[A]}})),this.deletedRefs.clear()},Root}(),V=function(){function ChangeTree(x,A,E){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=x,this.setParent(A,E)}return ChangeTree.prototype.setParent=function(x,A,E){var R=this;if(this.indexes||(this.indexes=this.ref instanceof pt?this.ref._definition.indexes:{}),this.parent=x,this.parentIndex=E,A)if(this.root=A,this.ref instanceof pt){var O=this.ref._definition;for(var V in O.schema){var z=this.ref[V];if(z&&z.$changes){var U=O.indexes[V];z.$changes.setParent(this.ref,A,U)}}}else"object"==typeof this.ref&&this.ref.forEach((function(x,A){if(x instanceof pt){var E=x.$changes,O=R.ref.$changes.indexes[A];E.setParent(R.ref,R.root,O)}}))},ChangeTree.prototype.operation=function(x){this.changes.set(--this.currentCustomOperation,x)},ChangeTree.prototype.change=function(A,E){void 0===E&&(E=x.OPERATION.ADD);var R="number"==typeof A?A:this.indexes[A];this.assertValidIndex(R,A);var O=this.changes.get(R);O&&O.op!==x.OPERATION.DELETE&&O.op!==x.OPERATION.TOUCH||this.changes.set(R,{op:O&&O.op===x.OPERATION.DELETE?x.OPERATION.DELETE_AND_ADD:E,index:R}),this.allChanges.add(R),this.changed=!0,this.touchParents()},ChangeTree.prototype.touch=function(A){var E="number"==typeof A?A:this.indexes[A];this.assertValidIndex(E,A),this.changes.has(E)||this.changes.set(E,{op:x.OPERATION.TOUCH,index:E}),this.allChanges.add(E),this.touchParents()},ChangeTree.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},ChangeTree.prototype.getType=function(x){if(this.ref._definition)return(A=this.ref._definition).schema[A.fieldsByIndex[x]];var A,E=(A=this.parent._definition).schema[A.fieldsByIndex[this.parentIndex]];return Object.values(E)[0]},ChangeTree.prototype.getChildrenFilter=function(){var x=this.parent._definition.childFilters;return x&&x[this.parentIndex]},ChangeTree.prototype.getValue=function(x){return this.ref.getByIndex(x)},ChangeTree.prototype.delete=function(A){var E="number"==typeof A?A:this.indexes[A];if(void 0!==E){var R=this.getValue(E);this.changes.set(E,{op:x.OPERATION.DELETE,index:E}),this.allChanges.delete(E),delete this.caches[E],R&&R.$changes&&(R.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema "+this.ref.constructor.name+": trying to delete non-existing index: "+A+" ("+E+")")},ChangeTree.prototype.discard=function(A,E){var R=this;void 0===A&&(A=!1),void 0===E&&(E=!1),this.ref instanceof pt||this.changes.forEach((function(A){if(A.op===x.OPERATION.DELETE){var E=R.ref.getIndex(A.index);delete R.indexes[E]}})),this.changes.clear(),this.changed=A,E&&this.allChanges.clear(),this.currentCustomOperation=0},ChangeTree.prototype.discardAll=function(){var x=this;this.changes.forEach((function(A){var E=x.getValue(A.index);E&&E.$changes&&E.$changes.discardAll()})),this.discard()},ChangeTree.prototype.cache=function(x,A){this.caches[x]=A},ChangeTree.prototype.clone=function(){return new ChangeTree(this.ref,this.parent,this.root)},ChangeTree.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},ChangeTree.prototype.assertValidIndex=function(x,A){if(void 0===x)throw new Error('ChangeTree: missing index for field "'+A+'"')},ChangeTree}(),DEFAULT_SORT=function(x,A){var E=x.toString(),R=A.toString();return E<R?-1:E>R?1:0};function getArrayProxy(x){return x.$proxy=!0,new Proxy(x,{get:function(x,A){return"symbol"==typeof A||isNaN(A)?x[A]:x.at(A)},set:function(x,A,E){if("symbol"==typeof A||isNaN(A))x[A]=E;else{var R=Array.from(x.$items.keys()),O=parseInt(R[A]||A);null==E?x.deleteAt(O):x.setAt(O,E)}return!0},deleteProperty:function(x,A){return"number"==typeof A?x.deleteAt(A):delete x[A],!0}})}var z=function(){function ArraySchema(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];this.$changes=new V(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,x)}return ArraySchema.is=function(x){return Array.isArray(x)||void 0!==x.array},Object.defineProperty(ArraySchema.prototype,"length",{get:function(){return this.$items.size},set:function(x){0===x?this.clear():this.splice(x,this.length-x)},enumerable:!1,configurable:!0}),ArraySchema.prototype.push=function(){for(var x,A=this,E=[],R=0;R<arguments.length;R++)E[R]=arguments[R];return E.forEach((function(E){x=A.$refId++,A.setAt(x,E)})),x},ArraySchema.prototype.pop=function(){var x=Array.from(this.$indexes.values()).pop();if(void 0!==x){this.$changes.delete(x),this.$indexes.delete(x);var A=this.$items.get(x);return this.$items.delete(x),A}},ArraySchema.prototype.at=function(x){var A=Array.from(this.$items.keys())[x];return this.$items.get(A)},ArraySchema.prototype.setAt=function(A,E){var R,O;void 0!==E.$changes&&E.$changes.setParent(this,this.$changes.root,A);var V=null!==(O=null===(R=this.$changes.indexes[A])||void 0===R?void 0:R.op)&&void 0!==O?O:x.OPERATION.ADD;this.$changes.indexes[A]=A,this.$indexes.set(A,A),this.$items.set(A,E),this.$changes.change(A,V)},ArraySchema.prototype.deleteAt=function(x){var A=Array.from(this.$items.keys())[x];return void 0!==A&&this.$deleteAt(A)},ArraySchema.prototype.$deleteAt=function(x){return this.$changes.delete(x),this.$indexes.delete(x),this.$items.delete(x)},ArraySchema.prototype.clear=function(A){var E=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),A&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(x){E.$changes.root.removeRef(x.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:x.OPERATION.CLEAR}),this.$changes.touchParents()},ArraySchema.prototype.concat=function(){for(var x,A=[],E=0;E<arguments.length;E++)A[E]=arguments[E];return new(ArraySchema.bind.apply(ArraySchema,__spreadArray([void 0],(x=Array.from(this.$items.values())).concat.apply(x,A))))},ArraySchema.prototype.join=function(x){return Array.from(this.$items.values()).join(x)},ArraySchema.prototype.reverse=function(){var x=this,A=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach((function(E,R){x.setAt(A[R],E)})),this},ArraySchema.prototype.shift=function(){var x=Array.from(this.$items.keys()).shift();if(void 0!==x){var A=this.$items.get(x);return this.$deleteAt(x),A}},ArraySchema.prototype.slice=function(x,A){return new(ArraySchema.bind.apply(ArraySchema,__spreadArray([void 0],Array.from(this.$items.values()).slice(x,A))))},ArraySchema.prototype.sort=function(x){var A=this;void 0===x&&(x=DEFAULT_SORT);var E=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(x).forEach((function(x,R){A.setAt(E[R],x)})),this},ArraySchema.prototype.splice=function(x,A){void 0===A&&(A=this.length-x);for(var E=[],R=2;R<arguments.length;R++)E[R-2]=arguments[R];for(var O=Array.from(this.$items.keys()),V=[],z=x;z<x+A;z++)V.push(this.$items.get(O[z])),this.$deleteAt(O[z]);return V},ArraySchema.prototype.unshift=function(){for(var x=this,A=[],E=0;E<arguments.length;E++)A[E]=arguments[E];var R=this.length,O=A.length,V=Array.from(this.$items.values());return A.forEach((function(A,E){x.setAt(E,A)})),V.forEach((function(A,E){x.setAt(O+E,A)})),R+O},ArraySchema.prototype.indexOf=function(x,A){return Array.from(this.$items.values()).indexOf(x,A)},ArraySchema.prototype.lastIndexOf=function(x,A){return void 0===A&&(A=this.length-1),Array.from(this.$items.values()).lastIndexOf(x,A)},ArraySchema.prototype.every=function(x,A){return Array.from(this.$items.values()).every(x,A)},ArraySchema.prototype.some=function(x,A){return Array.from(this.$items.values()).some(x,A)},ArraySchema.prototype.forEach=function(x,A){Array.from(this.$items.values()).forEach(x,A)},ArraySchema.prototype.map=function(x,A){return Array.from(this.$items.values()).map(x,A)},ArraySchema.prototype.filter=function(x,A){return Array.from(this.$items.values()).filter(x,A)},ArraySchema.prototype.reduce=function(x,A){return Array.from(this.$items.values()).reduce(x,A)},ArraySchema.prototype.reduceRight=function(x,A){return Array.from(this.$items.values()).reduceRight(x,A)},ArraySchema.prototype.find=function(x,A){return Array.from(this.$items.values()).find(x,A)},ArraySchema.prototype.findIndex=function(x,A){return Array.from(this.$items.values()).findIndex(x,A)},ArraySchema.prototype.fill=function(x,A,E){throw new Error("ArraySchema#fill() not implemented")},ArraySchema.prototype.copyWithin=function(x,A,E){throw new Error("ArraySchema#copyWithin() not implemented")},ArraySchema.prototype.toString=function(){return this.$items.toString()},ArraySchema.prototype.toLocaleString=function(){return this.$items.toLocaleString()},ArraySchema.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},ArraySchema.prototype[Symbol.unscopables]=function(){return this.$items[Symbol.unscopables]()},ArraySchema.prototype.entries=function(){return this.$items.entries()},ArraySchema.prototype.keys=function(){return this.$items.keys()},ArraySchema.prototype.values=function(){return this.$items.values()},ArraySchema.prototype.includes=function(x,A){return Array.from(this.$items.values()).includes(x,A)},ArraySchema.prototype.flatMap=function(x,A){throw new Error("ArraySchema#flatMap() is not supported.")},ArraySchema.prototype.flat=function(x){throw new Error("ArraySchema#flat() is not supported.")},ArraySchema.prototype.setIndex=function(x,A){this.$indexes.set(x,A)},ArraySchema.prototype.getIndex=function(x){return this.$indexes.get(x)},ArraySchema.prototype.getByIndex=function(x){return this.$items.get(this.$indexes.get(x))},ArraySchema.prototype.deleteByIndex=function(x){var A=this.$indexes.get(x);this.$items.delete(A),this.$indexes.delete(x)},ArraySchema.prototype.toArray=function(){return Array.from(this.$items.values())},ArraySchema.prototype.toJSON=function(){return this.toArray().map((function(x){return"function"==typeof x.toJSON?x.toJSON():x}))},ArraySchema.prototype.clone=function(x){return x?new(ArraySchema.bind.apply(ArraySchema,__spreadArray([void 0],Array.from(this.$items.values())))):new(ArraySchema.bind.apply(ArraySchema,__spreadArray([void 0],this.map((function(x){return x.$changes?x.clone():x})))))},ArraySchema.prototype.triggerAll=function(){pt.prototype.triggerAll.apply(this)},ArraySchema}();function getMapProxy(x){return x.$proxy=!0,new Proxy(x,{get:function(x,A){return"symbol"!=typeof A&&void 0===x[A]?x.get(A):x[A]},set:function(x,A,E){return"symbol"!=typeof A&&-1===A.indexOf("$")&&"onAdd"!==A&&"onRemove"!==A&&"onChange"!==A?x.set(A,E):x[A]=E,!0},deleteProperty:function(x,A){return x.delete(A),!0}})}var U=function(){function MapSchema(x){var A=this;if(this.$changes=new V(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,x)if(x instanceof Map)x.forEach((function(x,E){return A.set(E,x)}));else for(var E in x)this.set(E,x[E])}return MapSchema.is=function(x){return void 0!==x.map},MapSchema.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(MapSchema.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),MapSchema.prototype.set=function(A,E){if(null==E)throw new Error("MapSchema#set('"+A+"', "+E+"): trying to set "+E+" value on '"+A+"'.");var R=void 0!==this.$changes.indexes[A],O=R?this.$changes.indexes[A]:this.$refId++,V=R?x.OPERATION.REPLACE:x.OPERATION.ADD,z=void 0!==E.$changes;return z&&E.$changes.setParent(this,this.$changes.root,O),R?z&&this.$items.get(A)!==E&&(V=x.OPERATION.ADD):(this.$changes.indexes[A]=O,this.$indexes.set(O,A)),this.$items.set(A,E),this.$changes.change(A,V),this},MapSchema.prototype.get=function(x){return this.$items.get(x)},MapSchema.prototype.delete=function(x){return this.$changes.delete(x),this.$items.delete(x)},MapSchema.prototype.clear=function(A){var E=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),A&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(x){E.$changes.root.removeRef(x.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:x.OPERATION.CLEAR}),this.$changes.touchParents()},MapSchema.prototype.has=function(x){return this.$items.has(x)},MapSchema.prototype.forEach=function(x){this.$items.forEach(x)},MapSchema.prototype.entries=function(){return this.$items.entries()},MapSchema.prototype.keys=function(){return this.$items.keys()},MapSchema.prototype.values=function(){return this.$items.values()},Object.defineProperty(MapSchema.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),MapSchema.prototype.setIndex=function(x,A){this.$indexes.set(x,A)},MapSchema.prototype.getIndex=function(x){return this.$indexes.get(x)},MapSchema.prototype.getByIndex=function(x){return this.$items.get(this.$indexes.get(x))},MapSchema.prototype.deleteByIndex=function(x){var A=this.$indexes.get(x);this.$items.delete(A),this.$indexes.delete(x)},MapSchema.prototype.toJSON=function(){var x={};return this.forEach((function(A,E){x[E]="function"==typeof A.toJSON?A.toJSON():A})),x},MapSchema.prototype.clone=function(x){var A;return x?A=Object.assign(new MapSchema,this):(A=new MapSchema,this.forEach((function(x,E){x.$changes?A.set(E,x.clone()):A.set(E,x)}))),A},MapSchema.prototype.triggerAll=function(){pt.prototype.triggerAll.apply(this)},MapSchema}(),Q={};function registerType(x,A){Q[x]=A}function getType(x){return Q[x]}var W=function(){function SchemaDefinition(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return SchemaDefinition.create=function(x){var A=new SchemaDefinition;return A.schema=Object.assign({},x&&x.schema||{}),A.indexes=Object.assign({},x&&x.indexes||{}),A.fieldsByIndex=Object.assign({},x&&x.fieldsByIndex||{}),A.descriptors=Object.assign({},x&&x.descriptors||{}),A.deprecated=Object.assign({},x&&x.deprecated||{}),A},SchemaDefinition.prototype.addField=function(x,A){var E=this.getNextFieldIndex();this.fieldsByIndex[E]=x,this.indexes[x]=E,this.schema[x]=Array.isArray(A)?{array:A[0]}:A},SchemaDefinition.prototype.addFilter=function(x,A){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[x]]=A,this.indexesWithFilters.push(this.indexes[x]),!0},SchemaDefinition.prototype.addChildrenFilter=function(x,A){var E=this.indexes[x],R=this.schema[x];if(getType(Object.keys(R)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[E]=A,!0;console.warn("@filterChildren: field '"+x+"' can't have children. Ignoring filter.")},SchemaDefinition.prototype.getChildrenFilter=function(x){return this.childFilters&&this.childFilters[this.indexes[x]]},SchemaDefinition.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},SchemaDefinition}();function hasFilter(x){return x._context&&x._context.useFilters}var H=function(){function Context(){this.types={},this.schemas=new Map,this.useFilters=!1}return Context.prototype.has=function(x){return this.schemas.has(x)},Context.prototype.get=function(x){return this.types[x]},Context.prototype.add=function(x,A){void 0===A&&(A=this.schemas.size),x._definition=W.create(x._definition),x._typeid=A,this.types[A]=x,this.schemas.set(x,A)},Context.create=function(x){return void 0===x&&(x=new Context),function(A){return type(A,x)}},Context}(),$=new H;function type(x,A){return void 0===A&&(A=$),function(E,R){var O=E.constructor;O._context=A,A.has(O)||A.add(O);var V=O._definition;if(V.addField(R,x),V.descriptors[R]){if(V.deprecated[R])return;try{throw new Error("@colyseus/schema: Duplicate '"+R+"' definition on '"+O.name+"'.\nCheck @type() annotation")}catch(x){var Q=x.stack.split("\n")[4].trim();throw new Error(x.message+" "+Q)}}var W=z.is(x),H=!W&&U.is(x);if("string"!=typeof x&&!pt.is(x)){var $=Object.values(x)[0];"string"==typeof $||A.has($)||A.add($)}var G="_"+R;V.descriptors[G]={enumerable:!1,configurable:!1,writable:!0},V.descriptors[R]={get:function(){return this[G]},set:function(x){x!==this[G]&&(null!=x?(!W||x instanceof z||(x=new(z.bind.apply(z,__spreadArray([void 0],x)))),!H||x instanceof U||(x=new U(x)),void 0===x.$proxy&&(H?x=getMapProxy(x):W&&(x=getArrayProxy(x))),this.$changes.change(R),x.$changes&&x.$changes.setParent(this,this.$changes.root,this._definition.indexes[R])):this.$changes.delete(R),this[G]=x)},enumerable:!0,configurable:!0}}}function filter(x){return function(A,E){var R=A.constructor;R._definition.addFilter(E,x)&&(R._context.useFilters=!0)}}function filterChildren(x){return function(A,E){var R=A.constructor;R._definition.addChildrenFilter(E,x)&&(R._context.useFilters=!0)}}function deprecated(x,A){return void 0===x&&(x=!0),function(A,E){var R=A.constructor._definition;R.deprecated[E]=!0,x&&(R.descriptors[E]={get:function(){throw new Error(E+" is deprecated.")},set:function(x){},enumerable:!1,configurable:!0})}}function defineTypes(x,A,E){for(var R in void 0===E&&(E=x._context||$),A)type(A[R],E)(x.prototype,R);return x}function utf8Length(x){for(var A=0,E=0,R=0,O=x.length;R<O;R++)(A=x.charCodeAt(R))<128?E+=1:A<2048?E+=2:A<55296||A>=57344?E+=3:(R++,E+=4);return E}function utf8Write(x,A,E){for(var R=0,O=0,V=E.length;O<V;O++)(R=E.charCodeAt(O))<128?x[A++]=R:R<2048?(x[A++]=192|R>>6,x[A++]=128|63&R):R<55296||R>=57344?(x[A++]=224|R>>12,x[A++]=128|R>>6&63,x[A++]=128|63&R):(O++,R=65536+((1023&R)<<10|1023&E.charCodeAt(O)),x[A++]=240|R>>18,x[A++]=128|R>>12&63,x[A++]=128|R>>6&63,x[A++]=128|63&R)}function int8$1(x,A){x.push(255&A)}function uint8$1(x,A){x.push(255&A)}function int16$1(x,A){x.push(255&A),x.push(A>>8&255)}function uint16$1(x,A){x.push(255&A),x.push(A>>8&255)}function int32$1(x,A){x.push(255&A),x.push(A>>8&255),x.push(A>>16&255),x.push(A>>24&255)}function uint32$1(x,A){var E=A>>24,R=A>>16,O=A>>8,V=A;x.push(255&V),x.push(255&O),x.push(255&R),x.push(255&E)}function int64$1(x,A){var E=Math.floor(A/Math.pow(2,32));uint32$1(x,A>>>0),uint32$1(x,E)}function uint64$1(x,A){var E=A/Math.pow(2,32)>>0;uint32$1(x,A>>>0),uint32$1(x,E)}function float32$1(x,A){writeFloat32(x,A)}function float64$1(x,A){writeFloat64(x,A)}var G=new Int32Array(2),X=new Float32Array(G.buffer),K=new Float64Array(G.buffer);function writeFloat32(x,A){X[0]=A,int32$1(x,G[0])}function writeFloat64(x,A){K[0]=A,int32$1(x,G[0]),int32$1(x,G[1])}function boolean$1(x,A){return uint8$1(x,A?1:0)}function string$1(x,A){A||(A="");var E=utf8Length(A),R=0;if(E<32)x.push(160|E),R=1;else if(E<256)x.push(217),uint8$1(x,E),R=2;else if(E<65536)x.push(218),uint16$1(x,E),R=3;else{if(!(E<4294967296))throw new Error("String too long");x.push(219),uint32$1(x,E),R=5}return utf8Write(x,x.length,A),R+E}function number$1(x,A){return isNaN(A)?number$1(x,0):isFinite(A)?A!==(0|A)?(x.push(203),writeFloat64(x,A),9):A>=0?A<128?(uint8$1(x,A),1):A<256?(x.push(204),uint8$1(x,A),2):A<65536?(x.push(205),uint16$1(x,A),3):A<4294967296?(x.push(206),uint32$1(x,A),5):(x.push(207),uint64$1(x,A),9):A>=-32?(x.push(224|A+32),1):A>=-128?(x.push(208),int8$1(x,A),2):A>=-32768?(x.push(209),int16$1(x,A),3):A>=-2147483648?(x.push(210),int32$1(x,A),5):(x.push(211),int64$1(x,A),9):number$1(x,A>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var J=Object.freeze({__proto__:null,utf8Write:utf8Write,int8:int8$1,uint8:uint8$1,int16:int16$1,uint16:uint16$1,int32:int32$1,uint32:uint32$1,int64:int64$1,uint64:uint64$1,float32:float32$1,float64:float64$1,writeFloat32:writeFloat32,writeFloat64:writeFloat64,boolean:boolean$1,string:string$1,number:number$1});function utf8Read(x,A,E){for(var R="",O=0,V=A,z=A+E;V<z;V++){var U=x[V];0!=(128&U)?192!=(224&U)?224!=(240&U)?240!=(248&U)?console.error("Invalid byte "+U.toString(16)):(O=(7&U)<<18|(63&x[++V])<<12|(63&x[++V])<<6|(63&x[++V])<<0)>=65536?(O-=65536,R+=String.fromCharCode(55296+(O>>>10),56320+(1023&O))):R+=String.fromCharCode(O):R+=String.fromCharCode((15&U)<<12|(63&x[++V])<<6|(63&x[++V])<<0):R+=String.fromCharCode((31&U)<<6|63&x[++V]):R+=String.fromCharCode(U)}return R}function int8(x,A){return uint8(x,A)<<24>>24}function uint8(x,A){return x[A.offset++]}function int16(x,A){return uint16(x,A)<<16>>16}function uint16(x,A){return x[A.offset++]|x[A.offset++]<<8}function int32(x,A){return x[A.offset++]|x[A.offset++]<<8|x[A.offset++]<<16|x[A.offset++]<<24}function uint32(x,A){return int32(x,A)>>>0}function float32(x,A){return readFloat32(x,A)}function float64(x,A){return readFloat64(x,A)}function int64(x,A){var E=uint32(x,A);return int32(x,A)*Math.pow(2,32)+E}function uint64(x,A){var E=uint32(x,A);return uint32(x,A)*Math.pow(2,32)+E}var Z=new Int32Array(2),et=new Float32Array(Z.buffer),nt=new Float64Array(Z.buffer);function readFloat32(x,A){return Z[0]=int32(x,A),et[0]}function readFloat64(x,A){return Z[0]=int32(x,A),Z[1]=int32(x,A),nt[0]}function boolean(x,A){return uint8(x,A)>0}function string(x,A){var E,R=x[A.offset++];R<192?E=31&R:217===R?E=uint8(x,A):218===R?E=uint16(x,A):219===R&&(E=uint32(x,A));var O=utf8Read(x,A.offset,E);return A.offset+=E,O}function stringCheck(x,A){var E=x[A.offset];return E<192&&E>160||217===E||218===E||219===E}function number(x,A){var E=x[A.offset++];return E<128?E:202===E?readFloat32(x,A):203===E?readFloat64(x,A):204===E?uint8(x,A):205===E?uint16(x,A):206===E?uint32(x,A):207===E?uint64(x,A):208===E?int8(x,A):209===E?int16(x,A):210===E?int32(x,A):211===E?int64(x,A):E>223?-1*(255-E+1):void 0}function numberCheck(x,A){var E=x[A.offset];return E<128||E>=202&&E<=211}function arrayCheck(x,A){return x[A.offset]<160}function switchStructureCheck(x,A){return x[A.offset-1]===E&&(x[A.offset]<128||x[A.offset]>=202&&x[A.offset]<=211)}var ot=Object.freeze({__proto__:null,int8:int8,uint8:uint8,int16:int16,uint16:uint16,int32:int32,uint32:uint32,float32:float32,float64:float64,int64:int64,uint64:uint64,readFloat32:readFloat32,readFloat64:readFloat64,boolean:boolean,string:string,stringCheck:stringCheck,number:number,numberCheck:numberCheck,arrayCheck:arrayCheck,switchStructureCheck:switchStructureCheck}),it=function(){function CollectionSchema(x){var A=this;this.$changes=new V(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,x&&x.forEach((function(x){return A.add(x)}))}return CollectionSchema.is=function(x){return void 0!==x.collection},CollectionSchema.prototype.add=function(x){var A=this.$refId++;return void 0!==x.$changes&&x.$changes.setParent(this,this.$changes.root,A),this.$changes.indexes[A]=A,this.$indexes.set(A,A),this.$items.set(A,x),this.$changes.change(A),A},CollectionSchema.prototype.at=function(x){var A=Array.from(this.$items.keys())[x];return this.$items.get(A)},CollectionSchema.prototype.entries=function(){return this.$items.entries()},CollectionSchema.prototype.delete=function(x){for(var A,E,R=this.$items.entries();(E=R.next())&&!E.done;)if(x===E.value[1]){A=E.value[0];break}return void 0!==A&&(this.$changes.delete(A),this.$indexes.delete(A),this.$items.delete(A))},CollectionSchema.prototype.clear=function(A){var E=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),A&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(x){E.$changes.root.removeRef(x.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:x.OPERATION.CLEAR}),this.$changes.touchParents()},CollectionSchema.prototype.has=function(x){return Array.from(this.$items.values()).some((function(A){return A===x}))},CollectionSchema.prototype.forEach=function(x){var A=this;this.$items.forEach((function(E,R,O){return x(E,R,A)}))},CollectionSchema.prototype.values=function(){return this.$items.values()},Object.defineProperty(CollectionSchema.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),CollectionSchema.prototype.setIndex=function(x,A){this.$indexes.set(x,A)},CollectionSchema.prototype.getIndex=function(x){return this.$indexes.get(x)},CollectionSchema.prototype.getByIndex=function(x){return this.$items.get(this.$indexes.get(x))},CollectionSchema.prototype.deleteByIndex=function(x){var A=this.$indexes.get(x);this.$items.delete(A),this.$indexes.delete(x)},CollectionSchema.prototype.toArray=function(){return Array.from(this.$items.values())},CollectionSchema.prototype.toJSON=function(){var x=[];return this.forEach((function(A,E){x.push("function"==typeof A.toJSON?A.toJSON():A)})),x},CollectionSchema.prototype.clone=function(x){var A;return x?A=Object.assign(new CollectionSchema,this):(A=new CollectionSchema,this.forEach((function(x){x.$changes?A.add(x.clone()):A.add(x)}))),A},CollectionSchema.prototype.triggerAll=function(){pt.prototype.triggerAll.apply(this)},CollectionSchema}(),rt=function(){function SetSchema(x){var A=this;this.$changes=new V(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,x&&x.forEach((function(x){return A.add(x)}))}return SetSchema.is=function(x){return void 0!==x.set},SetSchema.prototype.add=function(A){var E,R;if(this.has(A))return!1;var O=this.$refId++;void 0!==A.$changes&&A.$changes.setParent(this,this.$changes.root,O);var V=null!==(R=null===(E=this.$changes.indexes[O])||void 0===E?void 0:E.op)&&void 0!==R?R:x.OPERATION.ADD;return this.$changes.indexes[O]=O,this.$indexes.set(O,O),this.$items.set(O,A),this.$changes.change(O,V),O},SetSchema.prototype.entries=function(){return this.$items.entries()},SetSchema.prototype.delete=function(x){for(var A,E,R=this.$items.entries();(E=R.next())&&!E.done;)if(x===E.value[1]){A=E.value[0];break}return void 0!==A&&(this.$changes.delete(A),this.$indexes.delete(A),this.$items.delete(A))},SetSchema.prototype.clear=function(A){var E=this;this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),A&&"string"!=typeof this.$changes.getType()&&this.$items.forEach((function(x){E.$changes.root.removeRef(x.$changes.refId)})),this.$items.clear(),this.$changes.operation({index:0,op:x.OPERATION.CLEAR}),this.$changes.touchParents()},SetSchema.prototype.has=function(x){for(var A,E=this.$items.values(),R=!1;(A=E.next())&&!A.done;)if(x===A.value){R=!0;break}return R},SetSchema.prototype.forEach=function(x){var A=this;this.$items.forEach((function(E,R,O){return x(E,R,A)}))},SetSchema.prototype.values=function(){return this.$items.values()},Object.defineProperty(SetSchema.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),SetSchema.prototype.setIndex=function(x,A){this.$indexes.set(x,A)},SetSchema.prototype.getIndex=function(x){return this.$indexes.get(x)},SetSchema.prototype.getByIndex=function(x){return this.$items.get(this.$indexes.get(x))},SetSchema.prototype.deleteByIndex=function(x){var A=this.$indexes.get(x);this.$items.delete(A),this.$indexes.delete(x)},SetSchema.prototype.toArray=function(){return Array.from(this.$items.values())},SetSchema.prototype.toJSON=function(){var x=[];return this.forEach((function(A,E){x.push("function"==typeof A.toJSON?A.toJSON():A)})),x},SetSchema.prototype.clone=function(x){var A;return x?A=Object.assign(new SetSchema,this):(A=new SetSchema,this.forEach((function(x){x.$changes?A.add(x.clone()):A.add(x)}))),A},SetSchema.prototype.triggerAll=function(){pt.prototype.triggerAll.apply(this)},SetSchema}(),st=function(){function EventEmitter_(){this.handlers=[]}return EventEmitter_.prototype.register=function(x,A){return this.handlers.push(x),this},EventEmitter_.prototype.invoke=function(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];this.handlers.forEach((function(A){return A.apply(void 0,x)}))},EventEmitter_.prototype.invokeAsync=function(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];return Promise.all(this.handlers.map((function(A){return A.apply(void 0,x)})))},EventEmitter_.prototype.remove=function(x){var A=this.handlers.indexOf(x);this.handlers[A]=this.handlers[this.handlers.length-1],this.handlers.pop()},EventEmitter_.prototype.clear=function(){this.handlers=[]},EventEmitter_}(),at=function(){function ClientState(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return ClientState.prototype.addRefId=function(x){this.refIds.has(x)||(this.refIds.add(x),this.containerIndexes.set(x,new Set))},ClientState.get=function(x){return void 0===x.$filterState&&(x.$filterState=new ClientState),x.$filterState},ClientState}(),ut=function(x){function EncodeSchemaError(){return null!==x&&x.apply(this,arguments)||this}return __extends(EncodeSchemaError,x),EncodeSchemaError}(Error);function assertType(x,A,E,R){var O,V=!1;switch(A){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":O="number",isNaN(x)&&console.log('trying to encode "NaN" in '+E.constructor.name+"#"+R);break;case"string":O="string",V=!0;break;case"boolean":return}if(typeof x!==O&&(!V||V&&null!==x)){var z="'"+JSON.stringify(x)+"'"+(x&&x.constructor&&" ("+x.constructor.name+")"||"");throw new ut("a '"+O+"' was expected, but "+z+" was provided in "+E.constructor.name+"#"+R)}}function assertInstanceType(x,A,E,R){if(!(x instanceof A))throw new ut("a '"+A.name+"' was expected, but '"+x.constructor.name+"' was provided in "+E.constructor.name+"#"+R)}function encodePrimitiveType(x,A,E,R,O){assertType(E,x,R,O);var V=J[x];if(!V)throw new ut("a '"+x+"' was expected, but "+E+" was provided in "+R.constructor.name+"#"+O);V(A,E)}function decodePrimitiveType(x,A,E){return ot[x](A,E)}var pt=function(){function Schema(){for(var x=[],A=0;A<arguments.length;A++)x[A]=arguments[A];Object.defineProperties(this,{$changes:{value:new V(this,void 0,new O),enumerable:!1,writable:!0},$listeners:{value:{},enumerable:!1,writable:!0}});var E=this._definition.descriptors;E&&Object.defineProperties(this,E),x[0]&&this.assign(x[0])}return Schema.onError=function(x){console.error(x)},Schema.is=function(x){return x._definition&&void 0!==x._definition.schema},Schema.prototype.assign=function(x){return Object.assign(this,x),this},Object.defineProperty(Schema.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),Schema.prototype.listen=function(x,A){var E=this;return this.$listeners[x]||(this.$listeners[x]=new st),this.$listeners[x].register(A),function(){return E.$listeners[x].remove(A)}},Schema.prototype.decode=function(A,R,O,V){void 0===R&&(R={offset:0}),void 0===O&&(O=this),void 0===V&&(V=new Map);var Q=this.$changes.root,W=A.length,H=0,$=[];for(Q.refs.set(H,this),V.set(H,$);R.offset<W;){var G=A[R.offset++];if(G!=E){var X=O.$changes,K=void 0!==O._definition,J=K?G>>6<<6:G;if(J!==x.OPERATION.CLEAR){var Z=K?G%(J||255):number(A,R),et=K?O._definition.fieldsByIndex[Z]:"",nt=X.getType(Z),ot=void 0,st=void 0,at=void 0;if(K?st=O["_"+et]:(st=O.getByIndex(Z),(J&x.OPERATION.ADD)===x.OPERATION.ADD?(at=O instanceof U?string(A,R):Z,O.setIndex(Z,at)):at=O.getIndex(Z)),(J&x.OPERATION.DELETE)===x.OPERATION.DELETE&&(J!==x.OPERATION.DELETE_AND_ADD&&O.deleteByIndex(Z),st&&st.$changes&&Q.removeRef(st.$changes.refId),ot=null),void 0!==et){if(J===x.OPERATION.DELETE);else if(Schema.is(nt)){var ut=number(A,R);if(ot=Q.refs.get(ut),J!==x.OPERATION.REPLACE){var pt=this.getSchemaType(A,R,nt);ot||((ot=this.createTypeInstance(pt)).$changes.refId=ut,st&&(ot.onChange=st.onChange,ot.onRemove=st.onRemove,ot.$listeners=st.$listeners,st.$changes.refId&&ut!==st.$changes.refId&&Q.removeRef(st.$changes.refId))),Q.addRef(ut,ot,ot!==st)}}else if("string"==typeof nt)ot=decodePrimitiveType(nt,A,R);else{var lt=getType(Object.keys(nt)[0]),ht=number(A,R),dt=Q.refs.has(ht)?st||Q.refs.get(ht):new lt.constructor;if((ot=dt.clone(!0)).$changes.refId=ht,st&&(ot.onAdd=st.onAdd,ot.onRemove=st.onRemove,ot.onChange=st.onChange,st.$changes.refId&&ht!==st.$changes.refId)){Q.removeRef(st.$changes.refId);for(var ft=[],gt=st.entries(),mt=void 0;(mt=gt.next())&&!mt.done;){var yt=mt.value,wt=yt[0],vt=yt[1];ft.push({op:x.OPERATION.DELETE,field:wt,value:void 0,previousValue:vt})}V.set(st.$changes.refId,ft)}Q.addRef(ht,ot,dt!==st),lt.getProxy&&(ot=lt.getProxy(ot))}var bt=st!==ot;if(null!=ot)if(ot.$changes&&ot.$changes.setParent(X.ref,X.root,Z),O instanceof Schema)O[et]=ot;else if(O instanceof U)wt=at,O.$items.set(wt,ot);else if(O instanceof z)O.setAt(Z,ot);else if(O instanceof it){var xt=O.add(ot);O.setIndex(Z,xt)}else O instanceof rt&&!1!==(xt=O.add(ot))&&O.setIndex(Z,xt);bt&&$.push({op:J,field:et,dynamicIndex:at,value:ot,previousValue:st})}else{console.warn("@colyseus/schema: definition mismatch");for(var Tt={offset:R.offset};R.offset<W&&(!switchStructureCheck(A,R)||(Tt.offset=R.offset+1,!Q.refs.has(number(A,Tt))));)R.offset++}}else O.clear(!0)}else{H=number(A,R);var At=Q.refs.get(H);if(!At)throw new Error('"refId" not found: '+H);O=At,$=[],V.set(H,$)}}return this._triggerChanges(V),Q.garbageCollectDeletedRefs(),V},Schema.prototype.encode=function(A,R,O){void 0===A&&(A=!1),void 0===R&&(R=[]),void 0===O&&(O=!1);for(var V=this.$changes,z=new WeakSet,Q=[V],W=1,H=0;H<W;H++){var $=Q[H],G=$.ref,X=G instanceof Schema;$.ensureRefId(),z.add($),$!==V&&($.changed||A)&&(uint8$1(R,E),number$1(R,$.refId));for(var K=A?Array.from($.allChanges):Array.from($.changes.values()),J=0,Z=K.length;J<Z;J++){var et=A?{op:x.OPERATION.ADD,index:K[J]}:K[J],nt=et.index,ot=X?G._definition.fieldsByIndex&&G._definition.fieldsByIndex[nt]:nt,it=R.length;if(et.op!==x.OPERATION.TOUCH)if(X)uint8$1(R,nt|et.op);else{if(uint8$1(R,et.op),et.op===x.OPERATION.CLEAR)continue;number$1(R,nt)}if(X||(et.op&x.OPERATION.ADD)!=x.OPERATION.ADD||G instanceof U&&string$1(R,$.ref.$indexes.get(nt)),et.op!==x.OPERATION.DELETE){var rt=$.getType(nt),st=$.getValue(nt);if(st&&st.$changes&&!z.has(st.$changes)&&(Q.push(st.$changes),st.$changes.ensureRefId(),W++),et.op!==x.OPERATION.TOUCH){if(Schema.is(rt))assertInstanceType(st,rt,G,ot),number$1(R,st.$changes.refId),(et.op&x.OPERATION.ADD)===x.OPERATION.ADD&&this.tryEncodeTypeId(R,rt,st.constructor);else if("string"==typeof rt)encodePrimitiveType(rt,R,st,G,ot);else{var at=getType(Object.keys(rt)[0]);assertInstanceType(G["_"+ot],at.constructor,G,ot),number$1(R,st.$changes.refId)}O&&$.cache(nt,R.slice(it))}}}A||O||$.discard()}return R},Schema.prototype.encodeAll=function(x){return this.encode(!0,[],x)},Schema.prototype.applyFilters=function(A,R){var O,V;void 0===R&&(R=!1);for(var z=this,Q=new Set,W=at.get(A),H=[this.$changes],$=1,G=[],_loop_1=function(X){var K=H[X];if(Q.has(K.refId))return"continue";var Z=K.ref,et=Z instanceof Schema;uint8$1(G,E),number$1(G,K.refId);var nt=W.refIds.has(K),ot=R||!nt;W.addRefId(K);var it=W.containerIndexes.get(K),rt=ot?Array.from(K.allChanges):Array.from(K.changes.values());!R&&et&&Z._definition.indexesWithFilters&&Z._definition.indexesWithFilters.forEach((function(A){!it.has(A)&&K.allChanges.has(A)&&(ot?rt.push(A):rt.push({op:x.OPERATION.ADD,index:A}))}));for(var st=0,at=rt.length;st<at;st++){var ut=ot?{op:x.OPERATION.ADD,index:rt[st]}:rt[st];if(ut.op!==x.OPERATION.CLEAR){var pt=ut.index;if(ut.op!==x.OPERATION.DELETE){var lt=K.getValue(pt),ht=K.getType(pt);if(et){if((dt=Z._definition.filters&&Z._definition.filters[pt])&&!dt.call(Z,A,lt,z)){lt&&lt.$changes&&Q.add(lt.$changes.refId);continue}}else{var dt,ft=K.parent;if((dt=K.getChildrenFilter())&&!dt.call(ft,A,Z.$indexes.get(pt),lt,z)){lt&&lt.$changes&&Q.add(lt.$changes.refId);continue}}if(lt.$changes&&(H.push(lt.$changes),$++),ut.op!==x.OPERATION.TOUCH)if(ut.op===x.OPERATION.ADD||et)G.push.apply(G,null!==(O=K.caches[pt])&&void 0!==O?O:[]),it.add(pt);else if(it.has(pt))G.push.apply(G,null!==(V=K.caches[pt])&&void 0!==V?V:[]);else{if(it.add(pt),uint8$1(G,x.OPERATION.ADD),number$1(G,pt),Z instanceof U){var gt=K.ref.$indexes.get(pt);string$1(G,gt)}lt.$changes?number$1(G,lt.$changes.refId):J[ht](G,lt)}else lt.$changes&&!et&&(uint8$1(G,x.OPERATION.ADD),number$1(G,pt),Z instanceof U&&(gt=K.ref.$indexes.get(pt),string$1(G,gt)),number$1(G,lt.$changes.refId))}else et?uint8$1(G,ut.op|pt):(uint8$1(G,ut.op),number$1(G,pt))}else uint8$1(G,ut.op)}},X=0;X<$;X++)_loop_1(X);return G},Schema.prototype.clone=function(){var x=new this.constructor,A=this._definition.schema;for(var E in A)"object"==typeof this[E]&&"function"==typeof this[E].clone?x[E]=this[E].clone():x[E]=this[E];return x},Schema.prototype.triggerAll=function(){if(0!==this.$changes.root.refs.size){var x=new Map;Schema.prototype._triggerAllFillChanges.call(this,this,x);try{Schema.prototype._triggerChanges.call(this,x)}catch(x){Schema.onError(x)}}},Schema.prototype.toJSON=function(){var x=this._definition.schema,A=this._definition.deprecated,E={};for(var R in x)A[R]||null===this[R]||void 0===this[R]||(E[R]="function"==typeof this[R].toJSON?this[R].toJSON():this["_"+R]);return E},Schema.prototype.discardAllChanges=function(){this.$changes.discardAll()},Schema.prototype.getByIndex=function(x){return this[this._definition.fieldsByIndex[x]]},Schema.prototype.deleteByIndex=function(x){this[this._definition.fieldsByIndex[x]]=void 0},Schema.prototype.tryEncodeTypeId=function(x,A,E){A._typeid!==E._typeid&&(uint8$1(x,R),number$1(x,E._typeid))},Schema.prototype.getSchemaType=function(x,A,E){var O;return x[A.offset]===R&&(A.offset++,O=this.constructor._context.get(number(x,A))),O||E},Schema.prototype.createTypeInstance=function(x){var A=new x;return A.$changes.root=this.$changes.root,A},Schema.prototype._triggerAllFillChanges=function(A,E){if(!E.has(A.$changes.refId)){var R=[];if(E.set(A.$changes.refId||0,R),A instanceof Schema){var O=A._definition.schema;for(var V in O)void 0!==(H=A["_"+V])&&(R.push({op:x.OPERATION.ADD,field:V,value:H,previousValue:void 0}),void 0!==H.$changes&&Schema.prototype._triggerAllFillChanges.call(this,H,E))}else for(var z=A.entries(),U=void 0;(U=z.next())&&!U.done;){var Q=U.value,W=Q[0],H=Q[1];R.push({op:x.OPERATION.ADD,field:W,dynamicIndex:W,value:H,previousValue:void 0}),void 0!==H.$changes&&Schema.prototype._triggerAllFillChanges.call(this,H,E)}}},Schema.prototype._triggerChanges=function(A){var E=this;A.forEach((function(A,R){var O,V,z,U,Q,W,H,$,G,X,K,J;if(A.length>0){for(var Z=E.$changes.root.refs.get(R),et=Z instanceof Schema,nt=0;nt<A.length;nt++){var ot=A[nt],it=Z.$listeners&&Z.$listeners[ot.field];if(et||(ot.op===x.OPERATION.ADD&&void 0===ot.previousValue?null===(V=(O=Z).onAdd)||void 0===V||V.call(O,ot.value,null!==(z=ot.dynamicIndex)&&void 0!==z?z:ot.field):ot.op===x.OPERATION.DELETE?void 0!==ot.previousValue&&(null===(Q=(U=Z).onRemove)||void 0===Q||Q.call(U,ot.previousValue,null!==(W=ot.dynamicIndex)&&void 0!==W?W:ot.field)):ot.op===x.OPERATION.DELETE_AND_ADD?(void 0!==ot.previousValue&&(null===($=(H=Z).onRemove)||void 0===$||$.call(H,ot.previousValue,ot.dynamicIndex)),null===(X=(G=Z).onAdd)||void 0===X||X.call(G,ot.value,ot.dynamicIndex)):ot.op!==x.OPERATION.REPLACE&&ot.value===ot.previousValue||null===(J=(K=Z).onChange)||void 0===J||J.call(K,ot.value,ot.dynamicIndex)),(ot.op&x.OPERATION.DELETE)===x.OPERATION.DELETE&&ot.previousValue instanceof Schema&&ot.previousValue.onRemove&&ot.previousValue.onRemove(),it)try{it.invoke(ot.value,ot.previousValue)}catch(x){Schema.onError(x)}}if(et&&Z.onChange)try{Z.onChange(A)}catch(x){Schema.onError(x)}}}))},Schema._definition=W.create(),Schema}();function dumpChanges(x){for(var A=[x.$changes],E=1,R={},O=R,_loop_1=function(x){var E=A[x];E.changes.forEach((function(x){var A=E.ref,R=x.index,V=A._definition?A._definition.fieldsByIndex[R]:A.$indexes.get(R);O[V]=E.getValue(R)}))},V=0;V<E;V++)_loop_1(V);return R}var lt=new H,ht=function(x){function ReflectionField(){return null!==x&&x.apply(this,arguments)||this}return __extends(ReflectionField,x),__decorate([type("string",lt)],ReflectionField.prototype,"name",void 0),__decorate([type("string",lt)],ReflectionField.prototype,"type",void 0),__decorate([type("number",lt)],ReflectionField.prototype,"referencedType",void 0),ReflectionField}(pt),dt=function(x){function ReflectionType(){var A=null!==x&&x.apply(this,arguments)||this;return A.fields=new z,A}return __extends(ReflectionType,x),__decorate([type("number",lt)],ReflectionType.prototype,"id",void 0),__decorate([type([ht],lt)],ReflectionType.prototype,"fields",void 0),ReflectionType}(pt),ft=function(x){function Reflection(){var A=null!==x&&x.apply(this,arguments)||this;return A.types=new z,A}return __extends(Reflection,x),Reflection.encode=function(x){var A=x.constructor,E=new Reflection;E.rootType=A._typeid;var buildType=function(x,A){for(var R in A){var O=new ht;O.name=R;var V=void 0;if("string"==typeof A[R])V=A[R];else{var z=A[R],U=void 0;pt.is(z)?(V="ref",U=A[R]):"string"==typeof z[V=Object.keys(z)[0]]?V+=":"+z[V]:U=z[V],O.referencedType=U?U._typeid:-1}O.type=V,x.fields.push(O)}E.types.push(x)},R=A._context.types;for(var O in R){var V=new dt;V.id=Number(O),buildType(V,R[O]._definition.schema)}return E.encodeAll()},Reflection.decode=function(x,A){var E=new H,R=new Reflection;R.decode(x,A);var O=R.types.reduce((function(x,A){var R=function(x){function _(){return null!==x&&x.apply(this,arguments)||this}return __extends(_,x),_}(pt),O=A.id;return x[O]=R,E.add(R,O),x}),{});R.types.forEach((function(x){var A=O[x.id];x.fields.forEach((function(x){var R;if(void 0!==x.referencedType){var V=x.type,z=O[x.referencedType];if(!z){var U=x.type.split(":");V=U[0],z=U[1]}"ref"===V?type(z,E)(A.prototype,x.name):type(((R={})[V]=z,R),E)(A.prototype,x.name)}else type(x.type,E)(A.prototype,x.name)}))}));var V=O[R.rootType],z=new V;for(var U in V._definition.schema){var Q=V._definition.schema[U];"string"!=typeof Q&&(z[U]="function"==typeof Q?new Q:new(getType(Object.keys(Q)[0]).constructor))}return z},__decorate([type([dt],lt)],Reflection.prototype,"types",void 0),__decorate([type("number",lt)],Reflection.prototype,"rootType",void 0),Reflection}(pt);registerType("map",{constructor:U,getProxy:getMapProxy}),registerType("array",{constructor:z,getProxy:getArrayProxy}),registerType("set",{constructor:rt}),registerType("collection",{constructor:it}),x.ArraySchema=z,x.CollectionSchema=it,x.Context=H,x.MapSchema=U,x.Reflection=ft,x.ReflectionField=ht,x.ReflectionType=dt,x.Schema=pt,x.SchemaDefinition=W,x.SetSchema=rt,x.decode=ot,x.defineTypes=defineTypes,x.deprecated=deprecated,x.dumpChanges=dumpChanges,x.encode=J,x.filter=filter,x.filterChildren=filterChildren,x.hasFilter=hasFilter,x.registerType=registerType,x.type=type,Object.defineProperty(x,"__esModule",{value:!0})}(A)}(0,A.exports),A.exports}(),st=function(){function Room(x,A){var E=this;this.onStateChange=createSignal(),this.onError=createSignal(),this.onLeave=createSignal(),this.onJoin=createSignal(),this.hasJoined=!1,this.onMessageHandlers=createNanoEvents(),this.id=null,this.name=x,A&&(this.serializer=new(getSerializer("schema")),this.rootSchema=A,this.serializer.state=new A),this.onError((function(x,A){return console.warn("colyseus.js - onError => ("+x+") "+A)})),this.onLeave((function(){return E.removeAllListeners()}))}return Room.prototype.connect=function(x){var A=this;this.connection=new et,this.connection.events.onmessage=this.onMessageCallback.bind(this),this.connection.events.onclose=function(x){if(!A.hasJoined)return console.warn("Room connection was closed unexpectedly ("+x.code+"): "+x.reason),void A.onError.invoke(x.code,x.reason);A.onLeave.invoke(x.code),A.destroy()},this.connection.events.onerror=function(x){console.warn("Room, onError ("+x.code+"): "+x.reason),A.onError.invoke(x.code,x.reason)},this.connection.connect(x)},Room.prototype.leave=function(A){var E=this;return void 0===A&&(A=!0),new Promise((function(R){E.onLeave((function(x){return R(x)})),E.connection?A?E.connection.send([x.Protocol.LEAVE_ROOM]):E.connection.close():E.onLeave.invoke(4e3)}))},Room.prototype.onMessage=function(x,A){return this.onMessageHandlers.on(this.getMessageHandlerKey(x),A)},Room.prototype.send=function(A,E){var R,O=[x.Protocol.ROOM_DATA];if("string"==typeof A?rt.encode.string(O,A):rt.encode.number(O,A),void 0!==E){var V=encode(E);(R=new Uint8Array(O.length+V.byteLength)).set(new Uint8Array(O),0),R.set(new Uint8Array(V),O.length)}else R=new Uint8Array(O);this.connection.send(R.buffer)},Object.defineProperty(Room.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),Room.prototype.removeAllListeners=function(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}},Room.prototype.onMessageCallback=function(A){var E=Array.from(new Uint8Array(A.data)),R=E[0];if(R===x.Protocol.JOIN_ROOM){var O=1;if(this.serializerId=function(x,A){for(var E=x[A++],R="",O=0,V=A,z=A+E;V<z;V++){var U=x[V];if(0!=(128&U))if(192!=(224&U))if(224!=(240&U)){if(240!=(248&U))throw new Error("Invalid byte "+U.toString(16));(O=(7&U)<<18|(63&x[++V])<<12|(63&x[++V])<<6|(63&x[++V])<<0)>=65536?(O-=65536,R+=String.fromCharCode(55296+(O>>>10),56320+(1023&O))):R+=String.fromCharCode(O)}else R+=String.fromCharCode((15&U)<<12|(63&x[++V])<<6|(63&x[++V])<<0);else R+=String.fromCharCode((31&U)<<6|63&x[++V]);else R+=String.fromCharCode(U)}return R}(E,O),O+=function(x){void 0===x&&(x="");for(var A=0,E=0,R=0,O=x.length;R<O;R++)(A=x.charCodeAt(R))<128?E+=1:A<2048?E+=2:A<55296||A>=57344?E+=3:(R++,E+=4);return E+1}(this.serializerId),!this.serializer){var V=getSerializer(this.serializerId);this.serializer=new V}E.length>O&&this.serializer.handshake&&this.serializer.handshake(E,{offset:O}),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([x.Protocol.JOIN_ROOM])}else if(R===x.Protocol.ERROR){var z={offset:1},U=rt.decode.number(E,z),Q=rt.decode.string(E,z);this.onError.invoke(U,Q)}else if(R===x.Protocol.LEAVE_ROOM)this.leave();else if(R===x.Protocol.ROOM_DATA_SCHEMA){var W={offset:1};(Q=new($=this.serializer.getState().constructor._context.get(rt.decode.number(E,W)))).decode(E,W),this.dispatchMessage($,Q)}else if(R===x.Protocol.ROOM_STATE)E.shift(),this.setState(E);else if(R===x.Protocol.ROOM_STATE_PATCH)E.shift(),this.patch(E);else if(R===x.Protocol.ROOM_DATA){var H={offset:1},$=rt.decode.stringCheck(E,H)?rt.decode.string(E,H):rt.decode.number(E,H);Q=E.length>H.offset?function(x,A){void 0===A&&(A=0);var E=new Decoder(x,A),R=E._parse();if(E._offset!==x.byteLength)throw new Error(x.byteLength-E._offset+" trailing bytes");return R}(A.data,H.offset):void 0,this.dispatchMessage($,Q)}},Room.prototype.setState=function(x){this.serializer.setState(x),this.onStateChange.invoke(this.serializer.getState())},Room.prototype.patch=function(x){this.serializer.patch(x),this.onStateChange.invoke(this.serializer.getState())},Room.prototype.dispatchMessage=function(x,A){var E=this.getMessageHandlerKey(x);this.onMessageHandlers.events[E]?this.onMessageHandlers.emit(E,A):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",x,A):console.warn("colyseus.js: onMessage() not registered for type '"+x+"'.")},Room.prototype.destroy=function(){this.serializer&&this.serializer.teardown()},Room.prototype.getMessageHandlerKey=function(x){switch(typeof x){case"function":return"$"+x._typeid;case"string":return x;case"number":return"i"+x;default:throw new Error("invalid message type.")}},Room}();function getStorage(){return it||(it="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(x,A){this.cache[x]=A},getItem:function(x){this.cache[x]},removeItem:function(x){delete this.cache[x]}}),it}var at,ut="colyseus-auth-token";x.Platform=void 0,(at=x.Platform||(x.Platform={})).ios="ios",at.android="android";var pt,lt=function(){function Auth(x){var A,E,R=this;this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=x.replace("ws","http"),A=function(x){return R.token=x},E=getStorage().getItem("colyseus-auth-token"),"undefined"!=typeof Promise&&E instanceof Promise?E.then((function(x){return A(x)})):A(E)}return Object.defineProperty(Auth.prototype,"hasToken",{get:function(){return!!this.token},enumerable:!1,configurable:!0}),Auth.prototype.login=function(x){return void 0===x&&(x={}),__awaiter(this,void 0,void 0,(function(){var A,E,R;return __generator(this,(function(O){switch(O.label){case 0:return A=Object.assign({},x),this.hasToken&&(A.token=this.token),[4,this.request("post","/auth",A)];case 1:for(R in E=O.sent(),this.token=E.token,ut,V=this.token,getStorage().setItem("colyseus-auth-token",V),E)this.hasOwnProperty(R)&&(this[R]=E[R]);return this.registerPingService(),[2,this]}var V}))}))},Auth.prototype.save=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(x){switch(x.label){case 0:return[4,this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone})];case 1:return x.sent(),[2,this]}}))}))},Auth.prototype.getFriends=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(x){switch(x.label){case 0:return[4,this.request("get","/friends/all")];case 1:return[2,x.sent()]}}))}))},Auth.prototype.getOnlineFriends=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(x){switch(x.label){case 0:return[4,this.request("get","/friends/online")];case 1:return[2,x.sent()]}}))}))},Auth.prototype.getFriendRequests=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(x){switch(x.label){case 0:return[4,this.request("get","/friends/requests")];case 1:return[2,x.sent()]}}))}))},Auth.prototype.sendFriendRequest=function(x){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(A){switch(A.label){case 0:return[4,this.request("post","/friends/requests",{userId:x})];case 1:return[2,A.sent()]}}))}))},Auth.prototype.acceptFriendRequest=function(x){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(A){switch(A.label){case 0:return[4,this.request("put","/friends/requests",{userId:x})];case 1:return[2,A.sent()]}}))}))},Auth.prototype.declineFriendRequest=function(x){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(A){switch(A.label){case 0:return[4,this.request("del","/friends/requests",{userId:x})];case 1:return[2,A.sent()]}}))}))},Auth.prototype.blockUser=function(x){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(A){switch(A.label){case 0:return[4,this.request("post","/friends/block",{userId:x})];case 1:return[2,A.sent()]}}))}))},Auth.prototype.unblockUser=function(x){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(A){switch(A.label){case 0:return[4,this.request("put","/friends/block",{userId:x})];case 1:return[2,A.sent()]}}))}))},Auth.prototype.request=function(x,A,E,R,O){return void 0===E&&(E={}),void 0===O&&(O={}),__awaiter(this,void 0,void 0,(function(){var V,z,U,Q;return __generator(this,(function(W){switch(W.label){case 0:for(z in O.Accept="application/json",this.hasToken&&(O.Authorization="Bearer "+this.token),V=[],E)V.push(z+"="+E[z]);return U=V.length>0?"?"+V.join("&"):"",Q={headers:O},R&&(Q.body=R),[4,$[x](""+this.endpoint+A+U,Q)];case 1:return[2,W.sent().data]}}))}))},Auth.prototype.logout=function(){this.token=void 0,getStorage().removeItem("colyseus-auth-token"),this.unregisterPingService()},Auth.prototype.registerPingService=function(x){var A=this;void 0===x&&(x=15e3),this.unregisterPingService(),this.keepOnlineInterval=setInterval((function(){return A.request("get","/auth")}),x)},Auth.prototype.unregisterPingService=function(){clearInterval(this.keepOnlineInterval)},Auth}(),ht=function(x){function MatchMakeError(A,E){var R=x.call(this,A)||this;return R.code=E,Object.setPrototypeOf(R,MatchMakeError.prototype),R}return __extends(MatchMakeError,x),MatchMakeError}(Error),dt="undefined"!=typeof window&&void 0!==(null===(pt=null===window||void 0===window?void 0:window.location)||void 0===pt?void 0:pt.hostname)?window.location.protocol.replace("http","ws")+"//"+window.location.hostname+(window.location.port&&":"+window.location.port):"ws://127.0.0.1:2567",ft=function(){function Client(x){void 0===x&&(x=dt),this.endpoint=x}return Object.defineProperty(Client.prototype,"auth",{get:function(){return this._auth||(this._auth=new lt(this.endpoint)),this._auth},enumerable:!1,configurable:!0}),Client.prototype.joinOrCreate=function(x,A,E){return void 0===A&&(A={}),__awaiter(this,void 0,void 0,(function(){return __generator(this,(function(R){switch(R.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",x,A,E)];case 1:return[2,R.sent()]}}))}))},Client.prototype.create=function(x,A,E){return void 0===A&&(A={}),__awaiter(this,void 0,void 0,(function(){return __generator(this,(function(R){switch(R.label){case 0:return[4,this.createMatchMakeRequest("create",x,A,E)];case 1:return[2,R.sent()]}}))}))},Client.prototype.join=function(x,A,E){return void 0===A&&(A={}),__awaiter(this,void 0,void 0,(function(){return __generator(this,(function(R){switch(R.label){case 0:return[4,this.createMatchMakeRequest("join",x,A,E)];case 1:return[2,R.sent()]}}))}))},Client.prototype.joinById=function(x,A,E){return void 0===A&&(A={}),__awaiter(this,void 0,void 0,(function(){return __generator(this,(function(R){switch(R.label){case 0:return[4,this.createMatchMakeRequest("joinById",x,A,E)];case 1:return[2,R.sent()]}}))}))},Client.prototype.reconnect=function(x,A,E){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(R){switch(R.label){case 0:return[4,this.createMatchMakeRequest("joinById",x,{sessionId:A},E)];case 1:return[2,R.sent()]}}))}))},Client.prototype.getAvailableRooms=function(x){return void 0===x&&(x=""),__awaiter(this,void 0,void 0,(function(){var A;return __generator(this,(function(E){switch(E.label){case 0:return A=this.endpoint.replace("ws","http")+"/matchmake/"+x,[4,V(A,{headers:{Accept:"application/json"}})];case 1:return[2,E.sent().data]}}))}))},Client.prototype.consumeSeatReservation=function(x,A){return __awaiter(this,void 0,void 0,(function(){var E;return __generator(this,(function(R){return(E=this.createRoom(x.room.name,A)).id=x.room.roomId,E.sessionId=x.sessionId,E.connect(this.buildEndpoint(x.room,{sessionId:E.sessionId})),[2,new Promise((function(x,A){var onError=function(x,E){return A(new G(x,E))};E.onError.once(onError),E.onJoin.once((function(){E.onError.remove(onError),x(E)}))}))]}))}))},Client.prototype.createMatchMakeRequest=function(x,A,E,R){return void 0===E&&(E={}),__awaiter(this,void 0,void 0,(function(){var O,V;return __generator(this,(function(z){switch(z.label){case 0:return O=this.endpoint.replace("ws","http")+"/matchmake/"+x+"/"+A,this._auth&&this._auth.hasToken&&(E.token=this._auth.token),[4,U(O,{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(E)})];case 1:if((V=z.sent().data).error)throw new ht(V.error,V.code);return[2,this.consumeSeatReservation(V,R)]}}))}))},Client.prototype.createRoom=function(x,A){return new st(x,A)},Client.prototype.buildEndpoint=function(x,A){void 0===A&&(A={});var E=[];for(var R in A)A.hasOwnProperty(R)&&E.push(R+"="+A[R]);return this.endpoint+"/"+x.processId+"/"+x.roomId+"?"+E.join("&")},Client}(),gt=function(){function SchemaSerializer(){}return SchemaSerializer.prototype.setState=function(x){this.state.decode(x)},SchemaSerializer.prototype.getState=function(){return this.state},SchemaSerializer.prototype.patch=function(x){this.state.decode(x)},SchemaSerializer.prototype.teardown=function(){var x,A;null===(A=null===(x=this.state)||void 0===x?void 0:x.$changes)||void 0===A||A.root.clearRefs()},SchemaSerializer.prototype.handshake=function(x,A){this.state?(new rt.Reflection).decode(x,A):this.state=rt.Reflection.decode(x,A)},SchemaSerializer}(),mt=function(){function NoneSerializer(){}return NoneSerializer.prototype.setState=function(x){},NoneSerializer.prototype.getState=function(){return null},NoneSerializer.prototype.patch=function(x){},NoneSerializer.prototype.teardown=function(){},NoneSerializer.prototype.handshake=function(x){},NoneSerializer}();registerSerializer("schema",gt),registerSerializer("none",mt),x.Auth=lt,x.Client=ft,x.Room=st,x.SchemaSerializer=gt,x.registerSerializer=registerSerializer,Object.defineProperty(x,"__esModule",{value:!0})})),define("@dcl/ecs-scene-utils",["exports","@decentraland/EnvironmentAPI"],(function(x,A){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var n=function(x,A){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,A){x.__proto__=A}||function(x,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(x[E]=A[E])})(x,A)};function i(x,A){function i(){this.constructor=x}n(x,A),x.prototype=null===A?Object.create(A):(i.prototype=A.prototype,new i)}function r(x,A,E,R){var O,V=arguments.length,z=V<3?A:null===R?R=Object.getOwnPropertyDescriptor(A,E):R;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(x,A,E,R);else for(var U=x.length-1;U>=0;U--)(O=x[U])&&(z=(V<3?O(z):V>3?O(A,E,z):O(A,E))||z);return V>3&&z&&Object.defineProperty(A,E,z),z}function o(x,A,E,R){return new(E||(E=Promise))((function(O,V){function a(x){try{u(R.next(x))}catch(x){V(x)}}function s(x){try{u(R.throw(x))}catch(x){V(x)}}function u(x){var A;x.done?O(x.value):(A=x.value,A instanceof E?A:new E((function(x){x(A)}))).then(a,s)}u((R=R.apply(x,A||[])).next())}))}function a(x,A){var E,R,O,V,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return V={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function s(V){return function(U){return function(V){if(E)throw new TypeError("Generator is already executing.");for(;z;)try{if(E=1,R&&(O=2&V[0]?R.return:V[0]?R.throw||((O=R.return)&&O.call(R),0):R.next)&&!(O=O.call(R,V[1])).done)return O;switch(R=0,O&&(V=[2&V[0],O.value]),V[0]){case 0:case 1:O=V;break;case 4:return z.label++,{value:V[1],done:!1};case 5:z.label++,R=V[1],V=[0];continue;case 7:V=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==V[0]&&2!==V[0])){z=0;continue}if(3===V[0]&&(!O||V[1]>O[0]&&V[1]<O[3])){z.label=V[1];break}if(6===V[0]&&z.label<O[1]){z.label=O[1],O=V;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(V);break}O[2]&&z.ops.pop(),z.trys.pop();continue}V=A.call(x,z)}catch(x){V=[6,x],R=0}finally{E=O=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,U])}}}function s(x){var A="function"==typeof Symbol&&Symbol.iterator,E=A&&x[A],R=0;if(E)return E.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&R>=x.length&&(x=void 0),{value:x&&x[R++],done:!x}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}var E,R=function(){function e(){this._components=[],this._componentGroups=[],e._instance=this}return e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.registerCustomComponent=function(x){this.createAndAddToEngine()._components.push(x)},e.prototype.addComponentType=function(x){var A,E;try{for(var R=s(this._components),O=R.next();!O.done;O=R.next())if(x==O.value)return}catch(x){A={error:x}}finally{try{O&&!O.done&&(E=R.return)&&E.call(R)}finally{if(A)throw A.error}}this._components.push(x),this._componentGroups.push(engine.getComponentGroup(x,Transform))},e.prototype.update=function(x){for(var A=0;A<this._components.length;A++)this.updateComponent(x,this._components[A],this._componentGroups[A])},e.prototype.updateComponent=function(x,A,E){E.entities.forEach((function(E){var R=E.getComponent(Transform),O=E.getComponent(A);O.update(x),O.assignValueToTransform(R),O.hasFinished()&&(E.removeComponent(O),null!=O.onFinishCallback&&O.onFinishCallback())}))},e._instance=null,e}();function h(A,E){switch(A){case x.InterpolationType.LINEAR:return E;case x.InterpolationType.EASEINQUAD:return function(x){return x*x}(E);case x.InterpolationType.EASEOUTQUAD:return function(x){return x*(2-x)}(E);case x.InterpolationType.EASEQUAD:return function(x){return x*x/(2*(x*x-x)+1)}(E);case x.InterpolationType.EASEINSINE:return function(x){return 1-Math.cos(x*Math.PI/2)}(E);case x.InterpolationType.EASEOUTSINE:return function(x){return Math.sin(x*Math.PI/2)}(E);case x.InterpolationType.EASESINE:return function(x){return-(Math.cos(Math.PI*x)-1)/2}(E);case x.InterpolationType.EASEINEXPO:return function(x){return 0===x?0:Math.pow(2,10*x-10)}(E);case x.InterpolationType.EASEOUTEXPO:return function(x){return 1===x?1:1-Math.pow(2,-10*x)}(E);case x.InterpolationType.EASEEXPO:return function(x){return 0===x?0:1===x?1:x<.5?Math.pow(2,20*x-10)/2:(2-Math.pow(2,-20*x+10))/2}(E);case x.InterpolationType.EASEINELASTIC:return function(x){var A=2*Math.PI/3;return 0===x?0:1===x?1:-Math.pow(2,10*x-10)*Math.sin((10*x-10.75)*A)}(E);case x.InterpolationType.EASEOUTELASTIC:return function(x){var A=2*Math.PI/3;return 0===x?0:1===x?1:Math.pow(2,-10*x)*Math.sin((10*x-.75)*A)+1}(E);case x.InterpolationType.EASEELASTIC:return function(x){var A=2*Math.PI/4.5;return 0===x?0:1===x?1:x<.5?-Math.pow(2,20*x-10)*Math.sin((20*x-11.125)*A)/2:Math.pow(2,-20*x+10)*Math.sin((20*x-11.125)*A)/2+1}(E);case x.InterpolationType.EASEINBOUNCE:return function(x){return 1-l(1-x)}(E);case x.InterpolationType.EASEOUTEBOUNCE:return function(x){return l(x)}(E);case x.InterpolationType.EASEBOUNCE:return function(x){return x<.5?(1-l(1-2*x))/2:(1+l(2*x-1))/2}(E);default:return E}}function l(x){var A=7.5625,E=2.75;return x<1/E?A*x*x:x<2/E?A*(x-=1.5/E)*x+.75:x<2.5/E?A*(x-=2.25/E)*x+.9375:A*(x-=2.625/E)*x+.984375}x.InterpolationType=void 0,(E=x.InterpolationType||(x.InterpolationType={}))[E.LINEAR=0]="LINEAR",E[E.EASEINQUAD=1]="EASEINQUAD",E[E.EASEOUTQUAD=2]="EASEOUTQUAD",E[E.EASEQUAD=3]="EASEQUAD",E.EASEINSINE="easeinsine",E.EASEOUTSINE="easeoutsine",E.EASESINE="easeinoutsine",E.EASEINEXPO="easeinexpo",E.EASEOUTEXPO="easeoutexpo",E.EASEEXPO="easeinoutexpo",E.EASEINELASTIC="easeinelastic",E.EASEOUTELASTIC="easeoutelastic",E.EASEELASTIC="easeinoutelastic",E.EASEINBOUNCE="easeinbounce",E.EASEOUTEBOUNCE="easeoutbounce",E.EASEBOUNCE="easeinoutbounce";var O,V=function(){function t(E,O,V,z,U){void 0===U&&(U=x.InterpolationType.LINEAR),this.start=E,this.end=O,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=z,this.interpolationType=U,0!=V?this.speed=1/V:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),R.createAndAddToEngine().addComponentType(A)}var A;return A=t,t.prototype.update=function(x){this.normalizedTime=Scalar.Clamp(this.normalizedTime+x*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(x){x.position=Vector3.Lerp(this.start,this.end,this.lerpTime)},A=r([Component("moveTransformComponent")],t)}(),z=function(){function t(E,O,V,z,U){void 0===U&&(U=x.InterpolationType.LINEAR),this.start=E,this.end=O,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=z,this.interpolationType=U,0!=V?this.speed=1/V:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),R.createAndAddToEngine().addComponentType(A)}var A;return A=t,t.prototype.update=function(x){this.normalizedTime=Scalar.Clamp(this.normalizedTime+x*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(x){x.rotation=Quaternion.Slerp(this.start,this.end,this.lerpTime)},A=r([Component("rotateTransformComponent")],t)}(),U=function(){function t(E,O,V,z,U){void 0===U&&(U=x.InterpolationType.LINEAR),this.start=E,this.end=O,this.normalizedTime=0,this.lerpTime=0,this.onFinishCallback=z,this.interpolationType=U,0!=V?this.speed=1/V:(this.speed=0,this.normalizedTime=1,this.lerpTime=1),R.createAndAddToEngine().addComponentType(A)}var A;return A=t,t.prototype.update=function(x){this.normalizedTime=Scalar.Clamp(this.normalizedTime+x*this.speed,0,1),this.lerpTime=h(this.interpolationType,this.normalizedTime)},t.prototype.hasFinished=function(){return this.normalizedTime>=1},t.prototype.assignValueToTransform=function(x){x.scale=Vector3.Lerp(this.start,this.end,this.lerpTime)},A=r([Component("scaleTransformComponent")],t)}(),Q=function(){function e(A,E,O,V){if(this.speed=[],this.normalizedTime=0,this.currentIndex=0,this.points=A,this.onFinishCallback=O,this.onPointReachedCallback=V,A.length<2)throw new Error("At least 2 points are needed for FollowPathComponent.");if(E>0){for(var z=0,U=[],Q=0;Q<A.length-1;Q++){var W=Vector3.Distance(A[Q],A[Q+1]);z+=W,U.push(W)}for(Q=0;Q<U.length;Q++)this.speed.push(1/(U[Q]/z*E))}else this.normalizedTime=1,this.currentIndex=A.length-2;R.createAndAddToEngine().addComponentType(x)}var x;return x=e,e.prototype.update=function(x){this.normalizedTime=Scalar.Clamp(this.normalizedTime+x*this.speed[this.currentIndex],0,1),this.normalizedTime>=1&&this.currentIndex<this.points.length-2&&(this.currentIndex++,this.normalizedTime=0,this.onPointReachedCallback&&this.currentIndex<this.points.length-1&&this.onPointReachedCallback(this.points[this.currentIndex],this.points[this.currentIndex+1]))},e.prototype.hasFinished=function(){return this.currentIndex>=this.points.length-2&&this.normalizedTime>=1},e.prototype.assignValueToTransform=function(x){x.position=Vector3.Lerp(this.points[this.currentIndex],this.points[this.currentIndex+1],this.normalizedTime)},x=r([Component("followPathComponent")],e)}(),W=function(){function e(A,E,O,V,z,U){if(this.speed=[],this.turnToFaceNext=!1,this.facingNext=!1,this.normalizedTime=0,this.currentIndex=0,this.points=Curve3.CreateCatmullRomSpline(A,O,!!z).getPoints(),this.onFinishCallback=U,this.turnToFaceNext=V||!1,this.points.length<2)throw new Error("At least 2 points are needed for FollowPathComponent.");if(E>0){for(var Q=0,W=[],H=0;H<this.points.length-1;H++){var $=Vector3.Distance(this.points[H],this.points[H+1]);Q+=$,W.push($)}for(H=0;H<W.length;H++)this.speed.push(1/(W[H]/Q*E))}else this.normalizedTime=1,this.currentIndex=A.length-2;R.createAndAddToEngine().addComponentType(x)}var x;return x=e,e.prototype.update=function(x){this.normalizedTime=Scalar.Clamp(this.normalizedTime+x*this.speed[this.currentIndex],0,1),this.normalizedTime>=1&&this.currentIndex<this.points.length-2&&(this.currentIndex++,this.normalizedTime=0,1==this.turnToFaceNext&&(this.facingNext=!1))},e.prototype.hasFinished=function(){return this.currentIndex>=this.points.length-2&&this.normalizedTime>=1},e.prototype.assignValueToTransform=function(x){x.position=Vector3.Lerp(this.points[this.currentIndex],this.points[this.currentIndex+1],this.normalizedTime),this.facingNext||(this.facingNext=!0,this.currentIndex<this.points.length-1?x.lookAt(this.points[this.currentIndex+1]):x.lookAt(this.points[0]))},x=r([Component("followCurvedPathComponent")],e)}(),H=function(){function e(A,E){this.rotationVelocity=A,this.onFinishCallback=E,this.rotation=Quaternion.Identity,this.finished=!1,R.createAndAddToEngine().addComponentType(x)}var x;return x=e,e.prototype.update=function(x){this.rotation=Quaternion.Slerp(Quaternion.Identity,this.rotationVelocity,x)},e.prototype.hasFinished=function(){return this.finished},e.prototype.assignValueToTransform=function(x){x.rotation=x.rotation.multiply(this.rotation)},e.prototype.stop=function(){this.finished=!0},x=r([Component("keepRotatingComponent")],e)}();x.ToggleState=void 0,(O=x.ToggleState||(x.ToggleState={}))[O.Off=0]="Off",O[O.On=1]="On";var $=function(){function t(A,E){void 0===A&&(A=x.ToggleState.On),this.enabled=!0,this.state=x.ToggleState.Off,this.set(A),E&&this.setCallback(E)}return t.prototype.set=function(x){this.state=x,this.onValueChangedCallback&&this.onValueChangedCallback(x)},t.prototype.toggle=function(){this.enabled&&this.set(1-this.state)},t.prototype.isOn=function(){return this.state==x.ToggleState.On},t.prototype.setCallback=function(x){this.onValueChangedCallback=x},r([Component("toggle")],t)}(),G=function(){function e(){this._components=[],e._instance=this}return e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.registerCustomComponent=function(x){this.createAndAddToEngine()._components.push(x)},e.prototype.addComponentType=function(x){var A,E;try{for(var R=s(this._components),O=R.next();!O.done;O=R.next())if(x==O.value)return}catch(x){A={error:x}}finally{try{O&&!O.done&&(E=R.return)&&E.call(R)}finally{if(A)throw A.error}}this._components.push(x)},e.prototype.update=function(x){var A=this;this._components.forEach((function(E){A.updateComponent(x,E)}))},e.prototype.updateComponent=function(x,A){var E=engine.getEntitiesWithComponent(A);for(var R in E)if(E.hasOwnProperty(R)){var O=E[R],V=O.getComponent(A);V.elapsedTime+=x,V.elapsedTime>=V.targetTime&&V.onTargetTimeReached(O)}},e._instance=null,e}(),X=function(){function e(A,E){var R=this;G.createAndAddToEngine().addComponentType(x),this.elapsedTime=0,this.targetTime=A/1e3,this.onTimeReachedCallback=E,this.onTargetTimeReached=function(x){R.onTimeReachedCallback&&R.onTimeReachedCallback(),x.removeComponent(R)}}var x;return x=e,e.prototype.setCallback=function(x){this.onTimeReachedCallback=x},x=r([Component("timerDelay")],e)}(),K=function(){function e(A,E){var R=this;G.createAndAddToEngine().addComponentType(x),this.elapsedTime=0,this.targetTime=A/1e3,this.onTimeReachedCallback=E,this.onTargetTimeReached=function(x){R.onTimeReachedCallback&&R.onTimeReachedCallback(),x.removeComponent(R),engine.removeEntity(x)}}var x;return x=e,e.prototype.setCallback=function(x){this.onTimeReachedCallback=x},x=r([Component("timerExpireIn")],e)}(),J=function(){function e(A,E){var R=this;G.createAndAddToEngine().addComponentType(x),this.elapsedTime=0,this.targetTime=A/1e3,this.onTimeReachedCallback=E,this.onTargetTimeReached=function(){R.elapsedTime=0,R.onTimeReachedCallback&&R.onTimeReachedCallback()}}var x;return x=e,e.prototype.setCallback=function(x){this.onTimeReachedCallback=x},x=r([Component("timerInterval")],e)}();function I(x,A,E,R,O,V){var z=new Entity;z.addComponent(new Transform(V||{position:new Vector3(0,1.5,0)})),z.setParent(A);var U=new TextShape(x);return U.fontSize=O||3,U.color=R||Color3.Black(),z.addComponent(U),E&&z.addComponent(new Billboard),engine.addEntity(z),z}var Z,et,nt=function(){function e(){this._triggers={},e._instance=this,this._cameraTriggerWrapper=new it(new P(new Vector3(.5,1.8,.5),new Vector3(0,.91,0))),this._componentGroup=engine.getComponentGroup(rt)}return Object.defineProperty(e,"instance",{get:function(){return this.createAndAddToEngine()},enumerable:!1,configurable:!0}),e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e.prototype.setCameraTriggerShape=function(x){this._cameraTriggerWrapper.setShape(x)},e.prototype.update=function(){var x=this,A=this._componentGroup.entities;for(var E in A.forEach((function(A){x.shouldWrapTriggerEntity(A)&&x.wrapTriggerEntity(A)})),this._triggers)if(this._triggers.hasOwnProperty(E)){var R=this._triggers[E];R.isDebugging()&&R.updateDebugEntity(),R.isInEngine()?null!=R.trigger&&R.trigger.enabled?(R.wasEnabled||R.isDebugging()&&R.addDebugEntity(),R.wasEnabled=!0,(R.trigger.onCameraEnter||R.trigger.onCameraExit)&&this.checkCollisionAgainstCamera(R),(R.trigger.onTriggerEnter||R.trigger.onTriggerExit)&&this.checkCollisionAgainstOtherTriggers(R)):R.wasEnabled&&(R.wasEnabled=!1,R.isDebugging()&&R.removeDebugEntity(),e.removeTriggerFromSystem(R)):(R.isDebugging()&&R.removeDebugEntity(),e.removeTriggerFromSystem(R),delete this._triggers[E])}},e.prototype.shouldWrapTriggerEntity=function(x){return null==this._triggers[x.uuid]||null==this._triggers[x.uuid]},e.prototype.wrapTriggerEntity=function(x){this._triggers[x.uuid]=new ot(x)},e.removeTriggerFromSystem=function(x){for(var A,E=x.getActiveCollisions(),R=0;R<E.length;R++)!(E[R]===(null===(A=e._instance)||void 0===A?void 0:A._cameraTriggerWrapper)||null==E[R].trigger)&&E[R].trigger.onTriggerExit&&x.entity&&E[R].trigger.onTriggerExit(x.entity),E[R].disengageActiveCollision(x),x.disengageActiveCollision(E[R])},e.disengageCollision=function(x,A){x.disengageActiveCollision(A),A.disengageActiveCollision(x),x.trigger.onTriggerExit&&A.entity&&x.trigger.onTriggerExit(A.entity),A.trigger.onTriggerExit&&x.entity&&A.trigger.onTriggerExit(x.entity)},e.engageCollision=function(x,A){x.engageCollision(A),A.engageCollision(x),x.trigger.onTriggerEnter&&A.entity&&x.trigger.onTriggerEnter(A.entity),A.trigger.onTriggerEnter&&x.entity&&A.trigger.onTriggerEnter(x.entity)},e.prototype.checkCollisionAgainstCamera=function(x){var A=x.hasActiveCollision(this._cameraTriggerWrapper),E=e.areColliding(x,this._cameraTriggerWrapper);A&&!E?(x.disengageActiveCollision(this._cameraTriggerWrapper),x.trigger.onCameraExit&&x.trigger.onCameraExit()):!A&&E&&(x.engageCollision(this._cameraTriggerWrapper),x.trigger.onCameraEnter&&x.trigger.onCameraEnter())},e.prototype.checkCollisionAgainstOtherTriggers=function(x){for(var A in this._triggers)if(this._triggers.hasOwnProperty(A)&&A!=x.uuid&&this._triggers[A].trigger.enabled&&e.canTriggersCollide(x,this._triggers[A])){var E=x.hasActiveCollision(this._triggers[A]),R=e.areColliding(x,this._triggers[A]);E&&!R?e.disengageCollision(x,this._triggers[A]):!E&&R&&e.engageCollision(x,this._triggers[A])}},e.canTriggersCollide=function(x,A){return 0==x.trigger.triggeredByLayer||0!=(A.trigger.layer&x.trigger.triggeredByLayer)},e.areColliding=function(x,A){return x.getShape()instanceof P&&A.getShape()instanceof P?e.areCollidingAABB(x.getGlobalPosition(),x.getShape(),A.getGlobalPosition(),A.getShape()):x.getShape()instanceof k&&A.getShape()instanceof k?e.areCollidingSphere(x.getGlobalPosition(),x.getShape(),A.getGlobalPosition(),A.getShape()):x.getShape()instanceof P&&A.getShape()instanceof k?e.areCollidingAABBSphere(x.getGlobalPosition(),x.getShape(),A.getGlobalPosition(),A.getShape()):x.getShape()instanceof k&&A.getShape()instanceof P&&e.areCollidingAABBSphere(A.getGlobalPosition(),A.getShape(),x.getGlobalPosition(),x.getShape())},e.areCollidingAABB=function(x,A,E,R){var O=e.getBoxShapeValues(x,A),V=e.getBoxShapeValues(E,R);return O.min.x<=V.max.x&&O.max.x>=V.min.x&&O.min.y<=V.max.y&&O.max.y>=V.min.y&&O.min.z<=V.max.z&&O.max.z>=V.min.z},e.areCollidingSphere=function(x,A,E,R){return Vector3.DistanceSquared(x.add(A.position),E.add(R.position))<A.radius*A.radius+R.radius*R.radius},e.areCollidingAABBSphere=function(x,A,E,R){var O=e.getBoxShapeValues(x,A),V=E.add(R.position),z=R.radius,U=0;return V.x<O.min.x&&(U+=(O.min.x-V.x)*(O.min.x-V.x)),V.x>O.max.x&&(U+=(V.x-O.max.x)*(V.x-O.max.x)),V.y<O.min.y&&(U+=(O.min.y-V.y)*(O.min.y-V.y)),V.y>O.max.y&&(U+=(V.y-O.max.y)*(V.y-O.max.y)),V.z<O.min.z&&(U+=(O.min.z-V.z)*(O.min.z-V.z)),V.z>O.max.z&&(U+=(V.z-O.max.z)*(V.z-O.max.z)),U<z*z},e.getBoxShapeValues=function(x,A){var E=x.add(A.position);return{center:E,min:E.subtract(A.size.scale(.5)),max:E.add(A.size.scale(.5))}},e._instance=null,e}(),ot=function(){function e(x){this.wasEnabled=!0,this._uuid="",this._collidingWith={},this._isDebug=!1,this._debugEntity=null,this._entity=x,x&&(this._trigger=x.getComponent(rt),this._uuid=x.uuid,this._isDebug=this._trigger.debugEnabled,this._isDebug&&this.addDebugEntity())}return Object.defineProperty(e.prototype,"entity",{get:function(){return this._entity},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trigger",{get:function(){return this._trigger},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uuid",{get:function(){return this._uuid},enumerable:!1,configurable:!0}),e.prototype.getGlobalPosition=function(){return this._entity?e.getEntityWorldPosition(this._entity):Vector3.Zero()},e.prototype.getShape=function(){return this._trigger.shape},e.prototype.isInEngine=function(){return null!=this._entity&&this._entity.isAddedToEngine()},e.prototype.getActiveCollisions=function(){var x=[];for(var A in this._collidingWith)this._collidingWith.hasOwnProperty(A)&&x.push(this._collidingWith[A]);return x},e.prototype.hasActiveCollision=function(x){return null!=this._collidingWith[x.uuid]&&null!=this._collidingWith[x.uuid]},e.prototype.disengageActiveCollision=function(x){delete this._collidingWith[x.uuid]},e.prototype.engageCollision=function(x){this._collidingWith[x.uuid]=x},e.prototype.isDebugging=function(){return this._isDebug},e.prototype.addDebugEntity=function(){return o(this,void 0,void 0,(function(){var x,E,R;return a(this,(function(O){switch(O.label){case 0:return[4,!A.isPreviewMode()];case 1:return O.sent()||(e._debugMaterial||(e._debugMaterial=new Material,e._debugMaterial.alphaTest=.5),null==this._debugEntity&&(this._debugEntity=new Entity,x=new Transform,this._debugEntity.addComponent(x),this._debugEntity.addComponent(e._debugMaterial),this.getShape()instanceof P&&((E=new BoxShape).withCollisions=!1,this._debugEntity.addComponent(E),x.scale=this.getShape().size),this.getShape()instanceof k&&((E=new SphereShape).withCollisions=!1,this._debugEntity.addComponent(E),R=this.getShape().radius,x.scale=new Vector3(R,R,R))),engine.addEntity(this._debugEntity)),[2]}}))}))},e.prototype.removeDebugEntity=function(){null!=this._debugEntity&&engine.removeEntity(this._debugEntity)},e.prototype.updateDebugEntity=function(){this._debugEntity&&(this._debugEntity.getComponent(Transform).position=this.getGlobalPosition().add(this.getShape().position))},e.getEntityWorldPosition=function(x){var A=x.hasComponent(Transform)?x.getComponent(Transform).position.clone():Vector3.Zero(),E=x.getParent();if(null!=E){var R=E.hasComponent(Transform)?E.getComponent(Transform).rotation:Quaternion.Identity;return this.getEntityWorldPosition(E).add(A.rotate(R))}return A},e._debugMaterial=null,e}(),it=function(x){function t(A){var E=x.call(this)||this;return E._shape=A,E._uuid="cameraTrigger",E}return i(t,x),t.prototype.getGlobalPosition=function(){return Camera.instance.position},t.prototype.getShape=function(){return this._shape},t.prototype.setShape=function(x){this._shape=x},t.prototype.isInEngine=function(){return!1},t.prototype.hasActiveCollision=function(x){return!1},t.prototype.disengageActiveCollision=function(x){},t.prototype.engageCollision=function(x){},t.prototype.isDebugging=function(){return!1},t}(ot),rt=function(){function e(x,A){this.enabled=!0,this.layer=0,this.triggeredByLayer=0,this._debugEnabled=!1,nt.createAndAddToEngine(),this.shape=x,A&&(A.layer&&(this.layer=A.layer),A.triggeredByLayer&&(this.triggeredByLayer=A.triggeredByLayer),A.onTriggerEnter&&(this.onTriggerEnter=A.onTriggerEnter),A.onTriggerExit&&(this.onTriggerExit=A.onTriggerExit),A.onCameraEnter&&(this.onCameraEnter=A.onCameraEnter),A.onCameraExit&&(this.onCameraExit=A.onCameraExit),A.enableDebug&&(this._debugEnabled=A.enableDebug))}return Object.defineProperty(e.prototype,"debugEnabled",{get:function(){return this._debugEnabled},enumerable:!1,configurable:!0}),r([Component("triggerComponent")],e)}(),P=function(x,A){void 0===x&&(x=Vector3.One().scale(2)),void 0===A&&(A=Vector3.Zero()),this.size=x,this.position=A},k=function(x,A){void 0===x&&(x=2),void 0===A&&(A=Vector3.Zero()),this.radius=x,this.position=A};x.ActionsSequenceSystem=function(){function e(x){this.beginSequenceNode=null,this.currentSequenceNode=null,this.running=!1,this.started=!1,x&&this.startSequence(x)}return e.prototype.startSequence=function(x){this.beginSequenceNode=x.beginSequenceNode,this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1},e.prototype.setOnFinishCallback=function(x){this.onFinishCallback=x},e.prototype.isRunning=function(){return this.running},e.prototype.stop=function(){this.running=!1},e.prototype.resume=function(){null!=this.beginSequenceNode&&(this.running=!0)},e.prototype.reset=function(){this.currentSequenceNode=this.beginSequenceNode,this.running=!0,this.started=!1},e.prototype.getRunningAction=function(){var x=this.currentSequenceNode;if(this.currentSequenceNode instanceof at)do{x=x.currentInnerSequence}while(x instanceof at);return x.action},e.prototype.update=function(x){this.running&&(this.started?this.currentSequenceNode.hasFinish()?(this.currentSequenceNode.onFinish(),this.currentSequenceNode=this.currentSequenceNode.next,this.currentSequenceNode?this.currentSequenceNode.onStart():(this.running=!1,this.onFinishCallback&&this.onFinishCallback())):this.currentSequenceNode.update(x):(this.currentSequenceNode.onStart(),this.started=!0))},e}(),Z=x.ActionsSequenceSystem||(x.ActionsSequenceSystem={}),et=function(){function e(){this.currentSequenceNode=null,this.beginSequenceNode=null,this.whileNodeStack=[]}return e.prototype.then=function(x){if(null==this.currentSequenceNode)this.currentSequenceNode=new st,this.currentSequenceNode.action=x,this.beginSequenceNode=this.currentSequenceNode;else{var A=new st;A.action=x,this.currentSequenceNode=this.currentSequenceNode.then(A)}return this},e.prototype.if=function(x){var A=new ut(x);return null==this.currentSequenceNode?(this.currentSequenceNode=A,this.beginSequenceNode=A):this.currentSequenceNode=this.currentSequenceNode.then(A),this},e.prototype.else=function(){var x=this.currentSequenceNode.getSequence();if(!(x instanceof ut))throw new Error("IF statement is needed to be called before ELSE statement.");x.closed=!0;var A=new pt(x);return this.currentSequenceNode=this.currentSequenceNode.then(A),this},e.prototype.endIf=function(){var x=this.currentSequenceNode.getSequence();if(!(x instanceof ut||x instanceof pt))throw new Error("IF statement is needed to be called before ENDIF statement.");return x.closed=!0,this},e.prototype.while=function(x){var A=new lt(x);return null==this.currentSequenceNode?(this.currentSequenceNode=A,this.beginSequenceNode=A):this.currentSequenceNode=this.currentSequenceNode.then(A),this.whileNodeStack.push(A),this},e.prototype.endWhile=function(){var x=this.currentSequenceNode.getSequence();if(!(x instanceof lt))throw new Error("WHILE statement is needed to be called before ENDWHILE statement.");return x.closed=!0,this.whileNodeStack.length>0&&this.whileNodeStack.splice(this.whileNodeStack.length-1,1),this},e.prototype.breakWhile=function(){if(!(this.whileNodeStack.length>0))throw new Error("WHILE statement is needed to be called before BREAKWHILE statement.");return this.currentSequenceNode=this.currentSequenceNode.then(new ht(this.whileNodeStack[this.whileNodeStack.length-1])),this},e}(),Z.SequenceBuilder=et;var st=function(){function e(){this.action=null,this.next=null}return e.prototype.then=function(x){return this.next=x,x},e.prototype.onStart=function(){this.action&&this.action.onStart()},e.prototype.update=function(x){this.action&&this.action.update(x)},e.prototype.onFinish=function(){this.action&&this.action.onFinish()},e.prototype.hasFinish=function(){return!this.action||this.action.hasFinished},e.prototype.getSequence=function(){return this},e}(),at=function(x){function t(){var A=null!==x&&x.apply(this,arguments)||this;return A.currentInnerSequence=null,A.startingInnerSequence=null,A.closed=!1,A}return i(t,x),t.prototype.then=function(x){if(null==this.currentInnerSequence)this.currentInnerSequence=x,this.startingInnerSequence=x;else{if(this.closed)return this.next=x,x;this.currentInnerSequence=this.currentInnerSequence.then(x)}return this},t.prototype.onStart=function(){this.currentInnerSequence=this.startingInnerSequence,this.currentInnerSequence&&this.currentInnerSequence.onStart()},t.prototype.update=function(x){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(x))},t.prototype.onFinish=function(){this.currentInnerSequence&&this.currentInnerSequence.onFinish()},t.prototype.hasFinish=function(){return null==this.currentInnerSequence},t.prototype.getSequence=function(){if(this.currentInnerSequence){var x=this.currentInnerSequence.getSequence();if(x instanceof t&&!x.closed)return x}return this},t}(st),ut=function(x){function t(A){var E=x.call(this)||this;return E.result=!1,E.condition=A,E}return i(t,x),t.prototype.onStart=function(){this.result=this.condition(),this.result?x.prototype.onStart.call(this):this.currentInnerSequence=null},t}(at),pt=function(x){function t(A){var E=x.call(this)||this;return E.ifSequence=null,E.ifSequence=A,E}return i(t,x),t.prototype.onStart=function(){this.ifSequence&&!this.ifSequence.result?x.prototype.onStart.call(this):this.currentInnerSequence=null},t}(at),lt=function(x){function t(A){var E=x.call(this)||this;return E.breakWhile=!1,E.condition=A,E}return i(t,x),t.prototype.onStart=function(){this.breakWhile=!1,this.condition()?x.prototype.onStart.call(this):this.currentInnerSequence=null},t.prototype.update=function(x){this.currentInnerSequence&&(this.currentInnerSequence.hasFinish()?(this.currentInnerSequence.onFinish(),this.currentInnerSequence=this.currentInnerSequence.next,null==this.currentInnerSequence&&(this.currentInnerSequence=this.startingInnerSequence),this.currentInnerSequence&&this.currentInnerSequence.onStart()):this.currentInnerSequence.update(x))},t.prototype.hasFinish=function(){return this.breakWhile||!this.condition()},t}(at),ht=function(x){function t(A){var E=x.call(this)||this;return E.whileNode=A,E}return i(t,x),t.prototype.onStart=function(){this.whileNode.breakWhile=!0},t}(st);x.Delay=X,x.ExpireIn=K,x.FollowCurvedPathComponent=W,x.FollowPathComponent=Q,x.Interpolate=h,x.Interval=J,x.KeepRotatingComponent=H,x.MoveTransformComponent=V,x.RotateTransformComponent=z,x.ScaleTransformComponent=U,x.SequenceNode=st,x.ToggleComponent=$,x.TransformSystem=R,x.TriggerBoxShape=P,x.TriggerComponent=rt,x.TriggerSphereShape=k,x.TriggerSystem=nt,x.addLabel=I,x.addOneTimeTrigger=function(x,A,E){var R=!1,O=!1,V=new Entity;V.addComponent(new Transform({}));var z={};return A.layer&&(z.layer=A.layer),A.triggeredByLayer&&(z.triggeredByLayer=A.triggeredByLayer),A.onCameraEnter&&(z.onCameraEnter=function(){R||(R=!0,A.onCameraEnter()),!R&&A.onCameraEnter||!O&&A.onCameraExit||engine.removeEntity(V)}),A.onCameraExit&&(z.onCameraExit=function(){O||(O=!0,A.onCameraExit()),!R&&A.onCameraEnter||!O&&A.onCameraExit||engine.removeEntity(V)}),A.enableDebug&&(z.enableDebug=A.enableDebug),V.addComponent(new rt(x,z)),E&&V.setParent(E),engine.addEntity(V),V},x.addTestCube=function(x,E,R,O,V,z,U){return o(this,void 0,void 0,(function(){var Q,W,H;return a(this,(function($){switch($.label){case 0:return(Q=!U)?[4,!A.isPreviewMode()]:[3,2];case 1:Q=$.sent(),$.label=2;case 2:return Q?[2]:((W=new Entity).addComponent(new Transform(x)),V?(W.addComponent(new SphereShape),W.getComponent(Transform).scale.setAll(.5)):W.addComponent(new BoxShape),engine.addEntity(W),W.addComponent(new OnPointerDown(E,{hoverText:R||"click",button:ActionButton.POINTER})),O&&((H=new Material).albedoColor=O,W.addComponent(H)),z&&(W.getComponent(BoxShape).withCollisions=!1),R&&I(R,W,!0),[2,W])}}))}))},x.clamp=function(x,A,E){var R=x;return x>E?R=E:x<A&&(R=A),R},x.getEntityWorldPosition=function e(x){var A=x.hasComponent(Transform)?x.getComponent(Transform).position.clone():Vector3.Zero(),E=x.getParent();if(null!=E&&"0"!=E.uuid){if("FirstPersonCameraEntityReference"==E.uuid){var R=Camera.instance.rotation.clone();return Camera.instance.position.clone().add(A.rotate(R))}if("AvatarEntityReference"==E.uuid){var O=Camera.instance.rotation;return R=Quaternion.Euler(0,O.eulerAngles.y,0),Camera.instance.position.clone().add(A.rotate(R)).add(new Vector3(0,-.875,0))}return R=E.hasComponent(Transform)?E.getComponent(Transform).rotation:Quaternion.Identity,e(E).add(A.rotate(R))}return A},x.getEntityWorldRotation=function e(x){var A=x.hasComponent(Transform)?x.getComponent(Transform).rotation.clone():Quaternion.Zero(),E=x.getParent();if(null!=E&&"0"!=E.uuid){if("FirstPersonCameraEntityReference"==E.uuid){var R=Camera.instance.rotation.clone();return A.multiply(R)}return"AvatarEntityReference"==E.uuid?(R=Quaternion.Euler(0,Camera.instance.rotation.eulerAngles.y,0),A.multiply(R)):(R=e(E),A.multiply(R))}return A},x.map=function(x,A,E,R,O){return(x-A)/(E-A)*(O-R)+R},x.sendRequest=function(x,A,E,R){return o(this,void 0,void 0,(function(){var O,V,z;return a(this,(function(U){switch(U.label){case 0:return U.trys.push([0,6,,7]),O={method:A||"GET"},E&&(O.headers=E),R&&(O.body=JSON.stringify(R)),[4,fetch(x,O)];case 1:V=U.sent(),U.label=2;case 2:return U.trys.push([2,4,,5]),[4,V.json()];case 3:return[2,U.sent()];case 4:return U.sent(),[2,V];case 5:return[3,7];case 6:return z=U.sent(),log("error fetching from ",x," : ",z),[3,7];case 7:return[2]}}))}))},x.setTimeout=function(x,A){var E=new Entity;return E.addComponent(new X(x,(function(){A(),engine.removeEntity(E)}))),engine.addEntity(E),E},Object.defineProperty(x,"__esModule",{value:!0})})),function(x,A){"object"==typeof exports&&"undefined"!=typeof module?A(exports):"function"==typeof define&&define.amd?define("@dcl/ui-scene-utils",["exports"],A):A((x="undefined"!=typeof globalThis?globalThis:x||self)["ui-utils"]={})}(this,(function(x){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var e=function(x,A){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,A){x.__proto__=A}||function(x,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(x[E]=A[E])})(x,A)};function i(x,A){function o(){this.constructor=x}e(x,A),x.prototype=null===A?Object.create(A):(o.prototype=A.prototype,new o)}var o=function(){return(o=Object.assign||function(x){for(var A,E=1,R=arguments.length;E<R;E++)for(var O in A=arguments[E])Object.prototype.hasOwnProperty.call(A,O)&&(x[O]=A[O]);return x}).apply(this,arguments)};function n(x,A){var E={};for(var R in x)Object.prototype.hasOwnProperty.call(x,R)&&A.indexOf(R)<0&&(E[R]=x[R]);if(null!=x&&"function"==typeof Object.getOwnPropertySymbols){var O=0;for(R=Object.getOwnPropertySymbols(x);O<R.length;O++)A.indexOf(R[O])<0&&Object.prototype.propertyIsEnumerable.call(x,R[O])&&(E[R[O]]=x[R[O]])}return E}function r(x){var A="function"==typeof Symbol&&Symbol.iterator,E=A&&x[A],R=0;if(E)return E.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&R>=x.length&&(x=void 0),{value:x&&x[R++],done:!x}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}var A=function(){function t(A,E){var O=this;R.createAndAddToEngine(),this.elapsedTime=0,this.targetTime=A,this.onTimeReachedCallback=E,this.onTargetTimeReached=function(A){O.onTimeReachedCallback(),A.removeComponent(x)}}var x;return x=t,t.prototype.setCallback=function(x){this.onTimeReachedCallback=x},x=function(x,A,E,R){var O,V=arguments.length,z=V<3?A:null===R?R=Object.getOwnPropertyDescriptor(A,E):R;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(x,A,E,R);else for(var U=x.length-1;U>=0;U--)(O=x[U])&&(z=(V<3?O(z):V>3?O(A,E,z):O(A,E))||z);return V>3&&z&&Object.defineProperty(A,E,z),z}([Component("UItimerDelay")],t)}(),E=engine.getComponentGroup(A),R=function(){function t(){t._instance=this}return t.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new t,engine.addSystem(this._instance)),this._instance},t.prototype.update=function(x){var R,O;try{for(var V=r(E.entities),z=V.next();!z.done;z=V.next()){var U=z.value,Q=U.getComponent(A);Q.elapsedTime+=x,Q.elapsedTime>=Q.targetTime&&Q.onTargetTimeReached(U)}}catch(x){R={error:x}}finally{try{z&&!z.done&&(O=V.return)&&O.call(V)}finally{if(R)throw R.error}}},t._instance=null,t}(),O=new UICanvas;O.visible=!0;var V=new Font(Fonts.SanFrancisco),z=new Font(Fonts.SanFrancisco_Heavy),U=new Texture("https://decentraland.org/images/ui/light-atlas-v3.png"),Q=new Texture("https://decentraland.org/images/ui/dark-atlas-v3.png"),W=new UIText(O);W.vAlign="center",W.hAlign="center",W.hTextAlign="center",W.vTextAlign="center",W.font=V,W.fontSize=60,W.color=new Color4(0,0,0,1),W.visible=!1,W.positionY=80;var H=new UIImage(O,U);H.hAlign="center",H.vAlign="center",H.width=400,H.height=250,H.visible=!1;var $,G,X,K,J=function(x){function e(A,E,R,z,U,Q,W){var H=x.call(this)||this;return H.canvas=O,H.valueAsNum=A,H.uiText=new UIText(O),H.fixedDigits=W||null,H.uiText.value=H.toFixedLengthString(A),H.uiText.hAlign="right",H.uiText.vAlign="bottom",H.uiText.positionX=E||0,H.uiText.positionY=R||0,H.uiText.fontSize=U||25,H.uiText.font=V,H.uiText.vTextAlign="center",H.uiText.hTextAlign="center",H.uiText.color=z||Color4.White(),H.uiText.outlineColor=Color4.Black(),H.uiText.outlineWidth=Q?0:.1,H}return i(e,x),e.prototype.read=function(){return this.valueAsNum},e.prototype.increase=function(x){this.valueAsNum+=x||1,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.decrease=function(x){this.valueAsNum-=x||1,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.set=function(x){this.valueAsNum=x,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.hide=function(){this.uiText.visible=!1},e.prototype.show=function(){this.uiText.visible=!0},e.prototype.toFixedLengthString=function(x){var A=x.toString();if(!this.fixedDigits)return A;for(var E=A.length-this.fixedDigits;E<0;)A="0".concat(A),E+=1;return E>0&&(A=x.toPrecision(this.fixedDigits)),A},e}(Entity);($=x.PromptStyles||(x.PromptStyles={})).LIGHT="light",$.DARK="dark",$.LIGHTLARGE="lightlarge",$.DARKLARGE="darklarge",$.LIGHTSLANTED="lightslanted",$.DARKSLANTED="darkslanted",(G=x.BarStyles||(x.BarStyles={})).ROUNDBLACK="roundblack",G.ROUNDWHITE="roundwhite",G.ROUNDSILVER="roundsilver",G.ROUNDGOLD="roundgold",G.SQUAREBLACK="squareblack",G.SQUAREWHITE="squarewhite",G.SQUARESILVER="squaresilver",G.SQUAREGOLD="squaregold",(X=x.ButtonStyles||(x.ButtonStyles={})).E="e",X.F="f",X.DARK="dark",X.RED="red",X.ROUNDBLACK="roundblack",X.ROUNDWHITE="roundwhite",X.ROUNDSILVER="roundsilver",X.ROUNDGOLD="roundgold",X.SQUAREBLACK="squareblack",X.SQUAREWHITE="squarewhite",X.SQUARESILVER="squaresilver",X.SQUAREGOLD="squaregold",(K=x.SwitchStyles||(x.SwitchStyles={})).ROUNDGREEN="roundgreen",K.ROUNDRED="roundred",K.SQUAREGREEN="squaregreen",K.SQUARERED="squarered";var Z={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},et={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},nt={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},ot={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},it={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:458},rt={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:457},st={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:494},at={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:493},ut={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:531},pt={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:531},lt={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:567},ht={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:567},dt={sourceWidth:26,sourceHeight:26,sourceLeft:697,sourceTop:611},ft={sourceWidth:26,sourceHeight:26,sourceLeft:733,sourceTop:611},gt={sourceWidth:416,sourceHeight:352,sourceLeft:501,sourceTop:12},mt={sourceWidth:480,sourceHeight:384,sourceLeft:7,sourceTop:12},yt={sourceWidth:486,sourceHeight:326,sourceLeft:7,sourceTop:413},wt={closeW:{sourceWidth:32,sourceHeight:32,sourceLeft:942,sourceTop:306},closeD:{sourceWidth:32,sourceHeight:32,sourceLeft:986,sourceTop:306},closeWLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:512,sourceTop:381},closeDLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:583,sourceTop:381},closeWNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:252},closeDNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:214},closeWNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:214},closeDNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:260},FDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:4},FWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:4},EDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:40},EWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:40},Timer:{sourceWidth:24,sourceHeight:32.2,sourceLeft:718,sourceTop:388},TimerLarge:{sourceWidth:48,sourceHeight:68,sourceLeft:662,sourceTop:386},ClickWhite:{sourceWidth:32,sourceHeight:48,sourceLeft:799,sourceTop:389},ClickDark:{sourceWidth:32,sourceHeight:48,sourceLeft:757,sourceTop:389}},vt={sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:76},bt={sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:104},xt={sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:76},Tt={sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:104},At={sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:132},Et={sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:168},Ct={sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:132},St={sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:168},_t={sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:454},It={sourceWidth:64,sourceHeight:32,sourceLeft:853,sourceTop:454},Rt={sourceWidth:64,sourceHeight:32,sourceLeft:923,sourceTop:454},Ot={sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:501},Vt={sourceWidth:64,sourceHeight:32,sourceLeft:852,sourceTop:501},Pt={sourceWidth:64,sourceHeight:32,sourceLeft:921,sourceTop:501};function S(x,A){x.sourceWidth=A.sourceWidth,x.sourceHeight=A.sourceHeight,x.sourceLeft=A.sourceLeft?A.sourceLeft:0,x.sourceTop=A.sourceTop?A.sourceTop:0}function C(x){var A=-10-4*x;return A>-65?A:-65}var kt=function(A){function o(E,R,V,z,Q,W,H){var $=A.call(this)||this;if($.canvas=O,$.valueAsNum=E>1?1:E,$.fullWidth=W?128*W:128,$.background=new UIImage(O,U),$.background.width=W?128*W:128,$.background.height=W?32*W:32,$.background.hAlign="right",$.background.vAlign="bottom",$.background.positionX=R||0,$.background.positionY=V||0,Q)switch(Q){case x.BarStyles.ROUNDBLACK:S($.background,it);break;case x.BarStyles.ROUNDWHITE:S($.background,st);break;case x.BarStyles.ROUNDSILVER:S($.background,ut);break;case x.BarStyles.ROUNDGOLD:S($.background,lt);break;case x.BarStyles.SQUAREBLACK:S($.background,rt);break;case x.BarStyles.SQUAREWHITE:S($.background,at);break;case x.BarStyles.SQUARESILVER:S($.background,pt);break;case x.BarStyles.SQUAREGOLD:S($.background,ht)}else S($.background,ut);return $.background.sourceWidth=128,$.background.sourceHeight=32,$.background.visible=!0,$.bar=new UIContainerRect($.background),$.bar.color=z||Color4.Red(),$.bar.thickness=0,$.bar.hAlign="left",$.bar.vAlign="center",$.bar.positionX=W?2.55*W:2.55,$.bar.positionY=0,$.bar.height=W?32*W-7.5*W:24.5,$.bar.width=W?$.fullWidth*$.valueAsNum-5.1*W:$.fullWidth*$.valueAsNum-5.1,H&&$.hide(),$}return i(o,A),o.prototype.read=function(){return this.valueAsNum},o.prototype.increase=function(x){this.valueAsNum+=x||.1,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.decrease=function(x){this.valueAsNum-=x||.1,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.set=function(x){this.valueAsNum=x,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.hide=function(){this.background.visible=!1,this.bar.visible=!1},o.prototype.show=function(){this.background.visible=!0,this.bar.visible=!0},o}(Entity),Dt=function(x){function e(A,E,R,V,z,U){var Q=x.call(this)||this;Q.canvas=O;var W=new Texture(A);return Q.image=new UIImage(O,W),Q.image.hAlign="right",Q.image.vAlign="bottom",Q.image.positionX=E||0,Q.image.positionY=R||0,Q.image.width=V||64,Q.image.height=z||64,Q.image.sourceLeft=U&&U.sourceLeft?U.sourceLeft:0,Q.image.sourceTop=U&&U.sourceTop?U.sourceTop:0,Q.image.sourceWidth=U&&U.sourceWidth?U.sourceWidth:V||64,Q.image.sourceHeight=U&&U.sourceHeight?U.sourceHeight:z||64,Q}return i(e,x),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(x){var E=this;if(this.image.visible=!0,x){var R=new Entity;engine.addEntity(R),R.addComponentOrReplace(new A(x,(function(){E.hide()})))}},e}(Entity),Lt=function(x){function e(A,E,R,V,z,U){var Q=x.call(this)||this;Q.canvas=O;var W=new Texture(A);return Q.image=new UIImage(O,W),Q.image.hAlign="right",Q.image.vAlign="bottom",Q.image.positionX=E||0,Q.image.positionY=R||0,Q.image.width=V||32,Q.image.height=z||32,Q.image.sourceLeft=U&&U.sourceLeft?U.sourceLeft:0,Q.image.sourceTop=U&&U.sourceTop?U.sourceTop:0,Q.image.sourceWidth=U?U.sourceWidth:V||32,Q.image.sourceHeight=U?U.sourceHeight:z||32,Q}return i(e,x),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(x){var E=this;if(this.image.visible=!0,x){var R=new Entity;engine.addEntity(R),R.addComponentOrReplace(new A(x,(function(){E.hide()})))}},e}(Entity),Bt=function(x){function e(A,E,R,V,z,U){var Q=x.call(this)||this;Q.canvas=O;var W=new Texture(A);return Q.image=new UIImage(O,W),Q.image.hAlign="right",Q.image.vAlign="bottom",Q.image.positionX=E||0,Q.image.positionY=R||0,Q.image.width=V||128,Q.image.height=z||128,Q.image.sourceLeft=U&&U.sourceLeft?U.sourceLeft:0,Q.image.sourceTop=U&&U.sourceTop?U.sourceTop:0,Q.image.sourceWidth=U?U.sourceWidth:V||128,Q.image.sourceHeight=U?U.sourceHeight:z||128,Q}return i(e,x),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(x){var E=this;if(this.image.visible=!0,x){var R=new Entity;engine.addEntity(R),R.addComponentOrReplace(new A(x,(function(){E.hide()})))}},e}(Entity),Ft=function(x){function e(E,R,V,z,U,Q,W,H){var $=x.call(this)||this;$.canvas=O;var G=new Texture(E);if($.image=new UIImage(O,G),$.image.hAlign="center",$.image.vAlign="center",$.image.positionX=z||0,$.image.positionY=U||0,$.image.width=Q||512,$.image.height=W||512,$.image.sourceLeft=H&&H.sourceLeft?H.sourceLeft:0,$.image.sourceTop=H&&H.sourceTop?H.sourceTop:0,$.image.sourceWidth=H?H.sourceWidth:Q||512,$.image.sourceHeight=H?H.sourceHeight:W||512,$.image.visible=!V,-1!=R){var X=new Entity;engine.addEntity(X),X.addComponentOrReplace(new A(R||3,(function(){$.hide()})))}return $}return i(e,x),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(x){var E=this;if(this.image.visible=!0,x){var R=new Entity;engine.addEntity(R),R.addComponentOrReplace(new A(x,(function(){E.hide()})))}},e}(Entity),Nt=function(x){function e(A,E,R,z){var W=x.call(this)||this;W.canvas=O,W.background=H,W.UIOpenTime=+Date.now(),W.onAccept=E||null;var $=z?Q:U;return H.source=$,H.width=400,H.height=250,H.positionY=0,S(H,gt),H.visible=!0,W.closeIcon=new UIImage(H,$),W.closeIcon.positionX=175,W.closeIcon.positionY=100,W.closeIcon.width=32,W.closeIcon.height=32,S(W.closeIcon,z?wt.closeW:wt.closeD),W.closeIcon.onClick=new OnClick((function(){W.close()})),W.text=new UIText(H),W.text.value=A,W.text.adaptWidth=!1,W.text.textWrapping=!0,W.text.width=380,W.text.hAlign="center",W.text.vAlign="top",W.text.positionX=0,W.text.positionY=-65,W.text.fontSize=24,W.text.font=V,W.text.vTextAlign="center",W.text.hTextAlign="center",W.text.color=z?Color4.White():Color4.Black(),W.button=new UIImage(H,$),W.button.positionX=0,W.button.positionY=-60,W.button.width=174,W.button.height=46,S(W.button,Z),W.icon=new UIImage(W.button,1==z?Q:U),W.icon.width=26,W.icon.height=26,W.icon.hAlign="center",W.icon.vAlign="center",W.icon.isPointerBlocker=!1,S(W.icon,dt),W.icon.positionX=C(R?R.length:2),W.buttonLabel=new UIText(W.button),W.buttonLabel.value=R||"Ok",W.buttonLabel.hTextAlign="center",W.buttonLabel.vTextAlign="center",W.buttonLabel.positionX=30,W.buttonLabel.fontSize=18,W.buttonLabel.font=V,W.buttonLabel.color=Color4.White(),W.buttonLabel.isPointerBlocker=!1,W.button.onClick=new OnClick((function(){W.accept()})),W.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(x){W.button.visible&&+Date.now()-W.UIOpenTime>100&&W.accept()})),W}return i(e,x),e.prototype.close=function(){H.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1},e.prototype.accept=function(){this.onAccept&&this.onAccept(),this.close()},e.prototype.hide=function(){H.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1},e.prototype.show=function(){H.visible=!0,this.closeIcon.visible=!0,this.button.visible=!0,this.text.visible=!0,this.buttonLabel.visible=!0},e}(Entity),Mt=function(x){function e(A,E,R,W,$,G,X){var K=x.call(this)||this;K.canvas=O,K.background=H,K.UIOpenTime=+Date.now(),K.onAccept=R,K.onReject=W||null;var J=X?Q:U;return H.source=J,H.width=480,H.height=384,S(H,mt),H.visible=!0,K.closeIcon=new UIImage(H,J),K.closeIcon.positionX=215,K.closeIcon.positionY=164,K.closeIcon.width=32,K.closeIcon.height=32,S(K.closeIcon,X?wt.closeW:wt.closeD),K.closeIcon.onClick=new OnClick((function(){K.close()})),K.title=new UIText(H),K.title.value=A,K.title.adaptWidth=!1,K.title.textWrapping=!0,K.title.width=380,K.title.hAlign="center",K.title.vAlign="top",K.title.positionX=0,K.title.positionY=-20,K.title.font=z,K.title.fontSize=24,K.title.vTextAlign="center",K.title.hTextAlign="center",K.title.color=X?Color4.White():Color4.Black(),K.text=new UIText(H),K.text.value=E,K.text.adaptWidth=!1,K.text.textWrapping=!0,K.text.width=380,K.text.hAlign="center",K.text.vAlign="top",K.text.positionX=0,K.text.positionY=-145,K.text.fontSize=24,K.text.font=V,K.text.vTextAlign="center",K.text.hTextAlign="center",K.text.color=X?Color4.White():Color4.Black(),K.buttonE=new UIImage(H,J),K.buttonE.positionX=-100,K.buttonE.positionY=-120,K.buttonE.width=174,K.buttonE.height=46,S(K.buttonE,Z),K.buttonEIcon=new UIImage(K.buttonE,1==X?Q:U),K.buttonEIcon.width=26,K.buttonEIcon.height=26,K.buttonEIcon.hAlign="center",K.buttonEIcon.vAlign="center",K.buttonEIcon.isPointerBlocker=!1,S(K.buttonEIcon,dt),K.buttonEIcon.positionX=C($?$.length:2),K.buttonELabel=new UIText(K.buttonE),K.buttonELabel.value=$||"Ok",K.buttonELabel.hTextAlign="center",K.buttonELabel.vTextAlign="center",K.buttonELabel.positionX=30,K.buttonELabel.fontSize=18,K.buttonELabel.font=V,K.buttonELabel.color=Color4.White(),K.buttonELabel.isPointerBlocker=!1,K.buttonE.onClick=new OnClick((function(){K.accept()})),K.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(x){K.buttonE.visible&&+Date.now()-K.UIOpenTime>100&&K.accept()})),K.buttonF=new UIImage(H,J),K.buttonF.positionX=100,K.buttonF.positionY=-120,K.buttonF.width=174,K.buttonF.height=46,S(K.buttonF,et),K.buttonFIcon=new UIImage(K.buttonF,1==X?Q:U),K.buttonFIcon.width=26,K.buttonFIcon.height=26,K.buttonFIcon.hAlign="center",K.buttonFIcon.vAlign="center",K.buttonFIcon.isPointerBlocker=!1,S(K.buttonFIcon,ft),K.buttonFIcon.positionX=C(G?G.length:6),K.buttonFLabel=new UIText(K.buttonF),K.buttonFLabel.value=G||"Cancel",K.buttonFLabel.hTextAlign="center",K.buttonFLabel.vTextAlign="center",K.buttonFLabel.positionX=30,K.buttonFLabel.fontSize=18,K.buttonFLabel.font=V,K.buttonFLabel.color=Color4.White(),K.buttonFLabel.isPointerBlocker=!1,K.buttonF.onClick=new OnClick((function(){K.reject()})),K.FButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(x){K.buttonF.visible&&+Date.now()-K.UIOpenTime>100&&K.reject()})),K}return i(e,x),e.prototype.close=function(){H.visible=!1,this.closeIcon.visible=!1,this.buttonE.visible=!1,this.buttonF.visible=!1,this.text.visible=!1,this.buttonELabel.visible=!1,this.buttonFLabel.visible=!1,this.title.visible=!1},e.prototype.accept=function(){this.onAccept&&this.onAccept(),this.close()},e.prototype.reject=function(){this.onReject&&this.onReject(),this.close()},e.prototype.hide=function(){H.visible=!1,this.closeIcon.visible=!1,this.buttonE.visible=!1,this.buttonF.visible=!1,this.text.visible=!1,this.buttonELabel.visible=!1,this.buttonFLabel.visible=!1,this.buttonEIcon.visible=!1,this.buttonFIcon.visible=!1},e.prototype.show=function(){H.visible=!0,this.closeIcon.visible=!0,this.buttonE.visible=!0,this.buttonF.visible=!0,this.text.visible=!0,this.buttonELabel.visible=!0,this.buttonFLabel.visible=!0,this.buttonEIcon.visible=!0,this.buttonFIcon.visible=!0},e}(Entity),jt=function(x){function e(A,E,R,W,$){var G=x.call(this)||this;G.canvas=O,G.background=H,G.UIOpenTime=+Date.now(),G.onAccept=E;var X=$?Q:U;H.source=X,H.width=400,H.height=250,S(H,gt),H.visible=!0,G.text=new UIText(H),G.text.value=A,G.text.adaptWidth=!1,G.text.textWrapping=!0,G.text.width=320,G.text.hAlign="center",G.text.vAlign="top",G.text.positionX=0,G.text.positionY=-20,G.text.fontSize=24,G.text.font=z,G.text.vTextAlign="center",G.text.hTextAlign="center",G.text.color=$?Color4.White():Color4.Black(),G.closeIcon=new UIImage(H,X),G.closeIcon.positionX=175,G.closeIcon.positionY=100,G.closeIcon.width=32,G.closeIcon.height=32,S(G.closeIcon,$?wt.closeW:wt.closeD),G.closeIcon.onClick=new OnClick((function(){G.hide()})),G.button=new UIImage(H,X),G.button.positionX=0,G.button.positionY=-60,G.button.width=174,G.button.height=46,S(G.button,Z),G.icon=new UIImage(G.button,1==$?Q:U),G.icon.width=26,G.icon.height=26,G.icon.hAlign="center",G.icon.vAlign="center",G.icon.isPointerBlocker=!1,S(G.icon,dt),G.icon.positionX=C(R?R.length:6),G.buttonLabel=new UIText(G.button),G.buttonLabel.value=R||"Submit",G.buttonLabel.hTextAlign="center",G.buttonLabel.vTextAlign="center",G.buttonLabel.positionX=30,G.buttonLabel.fontSize=18,G.buttonLabel.font=V,G.buttonLabel.color=Color4.White(),G.buttonLabel.isPointerBlocker=!1,G.fillInBox=new UIInputText(H),G.fillInBox.color=Color4.Black(),G.fillInBox.font=V,G.fillInBox.width=312,G.fillInBox.height=46,G.fillInBox.positionX=0,G.fillInBox.positionY=15,G.fillInBox.placeholder=W||"Fill in",G.fillInBox.hTextAlign="center",G.fillInBox.vTextAlign="center",G.fillInBox.fontSize=22;var K="";return G.fillInBox.onChanged=new OnChanged((function(x){K=x.value})),G.fillInBox.onTextSubmit=new OnTextSubmit((function(x){G.accept(K)})),G.button.onClick=new OnClick((function(){G.accept(K)})),G.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(x){G.button.visible&&+Date.now()-G.UIOpenTime>100&&G.accept(K)})),G}return i(e,x),e.prototype.close=function(){H.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,this.fillInBox.visible=!1},e.prototype.accept=function(x){this.onAccept(x),this.close()},e.prototype.hide=function(){H.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,this.fillInBox.visible=!1},e.prototype.show=function(){H.visible=!0,this.closeIcon.visible=!0,this.button.visible=!0,this.text.visible=!0,this.buttonLabel.visible=!0,this.fillInBox.visible=!0},e}(Entity),Ut=function(A){function o(E,R,V,z){var W=A.call(this)||this;switch(W.elements=[],W.texture=U,W.darkTheme=!1,W.background=new UIImage(O,U),W.closeIcon=new UIImage(W.background,W.texture),W.UIOpenTime=0,W.canvas=O,W.UIOpenTime=+Date.now(),W.background=new UIImage(O,U),W.background.hAlign="center",W.background.vAlign="center",E||(E=x.PromptStyles.LIGHT),E){case x.PromptStyles.LIGHT:W.texture=U,S(W.background,gt),S(W.closeIcon,wt.closeD),W.closeIcon.positionX=R?R/2-25:175,W.closeIcon.positionY=V?V/2-25:145;break;case x.PromptStyles.DARK:W.texture=Q,W.darkTheme=!0,S(W.background,gt),S(W.closeIcon,wt.closeW),W.closeIcon.positionX=R?R/2-25:175,W.closeIcon.positionY=V?V/2-25:145;break;case x.PromptStyles.LIGHTLARGE:W.texture=U,S(W.background,mt),S(W.closeIcon,wt.closeD),W.closeIcon.positionX=R?R/2-25:215,W.closeIcon.positionY=V?V/2-25:165;break;case x.PromptStyles.DARKLARGE:W.texture=Q,W.darkTheme=!0,S(W.background,mt),S(W.closeIcon,wt.closeW),W.closeIcon.positionX=R?R/2-25:215,W.closeIcon.positionY=V?V/2-25:165;break;case x.PromptStyles.LIGHTSLANTED:W.texture=U,S(W.background,yt),S(W.closeIcon,wt.closeD),W.closeIcon.positionX=R?R/2-25:215,W.closeIcon.positionY=V?V/2-25:138;break;case x.PromptStyles.DARKSLANTED:W.texture=Q,W.darkTheme=!0,S(W.background,yt),S(W.closeIcon,wt.closeW),W.closeIcon.positionX=R?R/2-25:215,W.closeIcon.positionY=V?V/2-25:138;break;default:W.texture=new Texture(E),W.closeIcon.visible=!1}return W.background.source=W.texture,W.background.width=R||W.background.sourceWidth,W.background.height=V||W.background.sourceHeight,W.background.visible=!0,W.closeIcon.width=32,W.closeIcon.height=32,W.closeIcon.source=W.texture,W.closeIcon.onClick=new OnClick((function(){W.hide()})),z&&W.hide(),W}return i(o,A),o.prototype.hide=function(){var x,A;this.background.visible=!1,this.closeIcon.visible=!1;try{for(var E=r(this.elements),R=E.next();!R.done;R=E.next())R.value.hide()}catch(A){x={error:A}}finally{try{R&&!R.done&&(A=E.return)&&A.call(E)}finally{if(x)throw x.error}}},o.prototype.show=function(){var x,A;this.background.visible=!0,this.closeIcon.visible=!0;try{for(var E=r(this.elements),R=E.next();!R.done;R=E.next())R.value.show()}catch(A){x={error:A}}finally{try{R&&!R.done&&(A=E.return)&&A.call(E)}finally{if(x)throw x.error}}},o.prototype.addText=function(x,A,E,R,O){var V=new $t(this,x,A,E,this.darkTheme,R||void 0,O||void 0);return this.elements.push(V),V},o.prototype.addButton=function(x,A,E,R,O){var V=new Qt(this,this.texture,this.UIOpenTime,x,A,E,R,O||void 0);return this.elements.push(V),V},o.prototype.addCheckbox=function(x,A,E,R,O,V,z){var U=new qt(this,this.texture,this.darkTheme,x,A,E,R||void 0,O||void 0,V||void 0,z||void 0);return this.elements.push(U),U},o.prototype.addSwitch=function(x,A,E,R,O,V,z){var U=new Wt(this,this.texture,this.darkTheme,x,A,E,R||void 0,O||void 0,V||void 0,z||void 0);return this.elements.push(U),U},o.prototype.addIcon=function(x,A,E,R,O,V){var z=new Texture(x),U=new Ht(this,z,A,E,R||void 0,O||void 0,V||void 0);return this.elements.push(U),U},o.prototype.addTextBox=function(x,A,E,R){var O=new Gt(this,x,A,E||void 0,R||void 0);return this.elements.push(O),O},o}(Entity),Qt=function(A){function o(E,R,O,z,U,Q,W,H){var $=A.call(this)||this;if($.icon=null,$.image=new UIImage(E.background,R),$.image.positionX=U,$.image.positionY=Q,$.image.width=174,$.image.height=46,$.label=new UIText($.image),H)switch(H){case x.ButtonStyles.E:S($.image,Z),$.label.positionX=25,$.icon=new UIImage($.image,R),$.icon.width=26,$.icon.height=26,$.icon.hAlign="center",$.icon.vAlign="center",$.icon.isPointerBlocker=!1,S($.icon,dt),$.icon.positionX=C(z.length);break;case x.ButtonStyles.F:S($.image,et),$.label.positionX=25,$.icon=new UIImage($.image,R),$.icon.width=26,$.icon.height=26,$.icon.hAlign="center",$.icon.vAlign="center",$.icon.isPointerBlocker=!1,S($.icon,ft),$.icon.positionX=C(z.length);break;case x.ButtonStyles.RED:S($.image,nt);break;case x.ButtonStyles.DARK:S($.image,ot);break;case x.ButtonStyles.ROUNDBLACK:S($.image,it);break;case x.ButtonStyles.ROUNDWHITE:S($.image,st);break;case x.ButtonStyles.ROUNDSILVER:S($.image,ut);break;case x.ButtonStyles.ROUNDGOLD:S($.image,lt);break;case x.ButtonStyles.SQUAREBLACK:S($.image,rt);break;case x.ButtonStyles.SQUAREWHITE:S($.image,at);break;case x.ButtonStyles.SQUARESILVER:S($.image,pt);break;case x.ButtonStyles.SQUAREGOLD:S($.image,ht);break;default:S($.image,ut)}else S($.image,ut);return $.label.value=z,$.label.hTextAlign="center",$.label.vTextAlign="center",$.label.fontSize=20,$.label.font=V,$.label.color=H==x.ButtonStyles.ROUNDWHITE||H==x.ButtonStyles.SQUAREWHITE?Color4.Black():Color4.White(),$.label.isPointerBlocker=!1,$.image.onClick=new OnClick((function(){W()})),H==x.ButtonStyles.E?Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(x){$.image.visible&&+Date.now()-O>100&&W()})):H==x.ButtonStyles.F&&Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(x){$.image.visible&&+Date.now()-O>100&&W()})),$}return i(o,A),o.prototype.hide=function(){this.image.visible=!1},o.prototype.show=function(){this.image.visible=!0},o.prototype.grayOut=function(){this.label.color=Color4.Gray(),this.image.isPointerBlocker=!1,this.icon&&(this.icon.visible=!1)},o.prototype.enable=function(){this.label.color=Color4.White(),this.image.isPointerBlocker=!0,this.icon&&(this.icon.visible=!0)},o}(Entity),qt=function(x){function e(A,E,R,O,z,U,Q,W,H,$){var G=x.call(this)||this;return G.checked=!!$,G.darkTheme=R,G.large=H||!1,G.image=new UIImage(A.background,E),G.image.positionX=z,G.image.positionY=U,G.image.width=H?32:24,G.image.height=H?32:24,0==G.checked?G.uncheck():G.check(),G.label=new UIText(G.image),G.label.positionX=H?40:30,G.label.color=R?Color4.White():Color4.Black(),G.label.value=O,G.label.hTextAlign="left",G.label.vTextAlign="center",G.label.fontSize=20,G.label.font=V,G.label.isPointerBlocker=!1,G.image.onClick=new OnClick((function(){0==G.checked?G.check():G.uncheck(),G.checked?Q&&Q():W&&W()})),G}return i(e,x),e.prototype.hide=function(){this.image.visible=!1,this.label.visible=!1},e.prototype.show=function(){this.image.visible=!0,this.label.visible=!0},e.prototype.uncheck=function(){this.checked=!1,this.darkTheme?this.large?S(this.image,At):S(this.image,vt):this.large?S(this.image,Ct):S(this.image,xt)},e.prototype.check=function(){this.checked=!0,this.darkTheme?this.large?S(this.image,Et):S(this.image,bt):this.large?S(this.image,St):S(this.image,Tt)},e}(Entity),Wt=function(A){function o(E,R,O,z,U,Q,W,H,$,G){var X=A.call(this)||this;return X.checked=!!G,X.darkTheme=O,X.style=$||x.SwitchStyles.ROUNDGREEN,X.image=new UIImage(E.background,R),X.image.positionX=U,X.image.positionY=Q,X.image.width=64,X.image.height=32,0==X.checked?X.check():X.uncheck(),X.label=new UIText(X.image),X.label.positionX=80,X.label.color=O?Color4.White():Color4.Black(),X.label.value=z,X.label.hTextAlign="left",X.label.vTextAlign="center",X.label.fontSize=20,X.label.font=V,X.label.isPointerBlocker=!1,X.image.onClick=new OnClick((function(){0==X.checked?X.check():X.uncheck(),X.checked?W&&W():H&&H()})),X}return i(o,A),o.prototype.hide=function(){this.image.visible=!1,this.label.visible=!1},o.prototype.show=function(){this.image.visible=!0,this.label.visible=!0},o.prototype.check=function(){switch(this.checked=!0,this.style){case x.SwitchStyles.ROUNDGREEN:S(this.image,Rt);break;case x.SwitchStyles.ROUNDRED:S(this.image,It);break;case x.SwitchStyles.SQUAREGREEN:S(this.image,Pt);break;case x.SwitchStyles.SQUARERED:S(this.image,Vt)}},o.prototype.uncheck=function(){this.checked=!1,this.style==x.SwitchStyles.ROUNDGREEN||this.style==x.SwitchStyles.ROUNDRED?S(this.image,_t):S(this.image,Ot)},o}(Entity),Ht=function(x){function e(A,E,R,O,V,z,U){var Q=x.call(this)||this;return Q.image=new UIImage(A.background,E),Q.image.positionX=R,Q.image.positionY=O,Q.image.width=V||128,Q.image.height=z||128,Q.image.sourceLeft=U&&U.sourceLeft?U.sourceLeft:0,Q.image.sourceTop=U&&U.sourceTop?U.sourceTop:0,Q.image.sourceWidth=U&&U.sourceWidth?U.sourceWidth:V||128,Q.image.sourceHeight=U&&U.sourceHeight?U.sourceHeight:z||128,Q}return i(e,x),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(){this.image.visible=!0},e}(Entity),$t=function(x){function e(A,E,R,O,V,z,U){var Q=x.call(this)||this;return Q.text=new UIText(A.background),Q.text.value=E,Q.text.positionX=R||0,Q.text.positionY=O||0,Q.text.hTextAlign="center",Q.text.color=z||(V?Color4.White():Color4.Black()),Q.text.fontSize=U||15,Q}return i(e,x),e.prototype.hide=function(){this.text.visible=!1},e.prototype.show=function(){this.text.visible=!0},e}(Entity),Gt=function(x){function e(A,E,R,O,z){var U=x.call(this)||this;return U.currentText="",U.fillInBox=new UIInputText(A.background),U.fillInBox.color=Color4.Black(),U.fillInBox.font=V,U.fillInBox.width=312,U.fillInBox.height=46,U.fillInBox.positionX=E,U.fillInBox.positionY=R,U.fillInBox.placeholder=O||"Fill in",U.fillInBox.hTextAlign="center",U.fillInBox.vTextAlign="center",U.fillInBox.fontSize=22,U.fillInBox.onChanged=new OnChanged((function(x){U.fillInBox&&!U.fillInBox.visible||(U.currentText=x.value,z&&z(U.currentText))})),U.fillInBox.onTextSubmit=new OnTextSubmit((function(x){U.fillInBox&&!U.fillInBox.visible||(U.currentText=x.text,z&&z(U.currentText))})),U}return i(e,x),e.prototype.hide=function(){this.fillInBox.visible=!1},e.prototype.show=function(){this.fillInBox.visible=!0},e}(Entity),Xt=function(x){function e(A,E,R,z,U,Q){var W=x.call(this)||this;return W.canvas=O,W.uiText=new UIText(O),W.uiText.value=A,W.uiText.hAlign="right",W.uiText.vAlign="bottom",W.uiText.positionX=E||0,W.uiText.positionY=R||0,W.uiText.fontSize=U||25,W.uiText.font=V,W.uiText.vTextAlign="center",W.uiText.hTextAlign="center",W.uiText.color=z||Color4.White(),W.uiText.outlineColor=Color4.Black(),W.uiText.outlineWidth=Q?0:.1,W}return i(e,x),e.prototype.hide=function(){this.uiText.visible=!1},e.prototype.show=function(){this.uiText.visible=!0},e.prototype.set=function(x){this.uiText.value=x,this.uiText.visible=!0},e}(Entity),Kt=function(x){function e(E,R,V,z){var Q=x.call(this)||this;if(Q.canvas=O,Q.image=new UIImage(O,U),Q.image.hAlign="center",Q.image.vAlign="center",Q.image.positionX=R||0,Q.image.positionY=V?V+80:80,Q.image.width=z?48*z:48,Q.image.height=z?64*z:64,S(Q.image,wt.TimerLarge),E&&0!=E){var W=new Entity;engine.addEntity(W),W.addComponentOrReplace(new A(E||3,(function(){Q.hide()})))}return Q}return i(e,x),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(){this.image.visible=!0},e}(Entity);function q(x){return x&&"object"==typeof x&&!Array.isArray(x)}function j(x,A){var E=o({},x);return q(x)&&q(A)&&Object.keys(A).forEach((function(R){var O,V;q(A[R])?R in x?E[R]=j(x[R],A[R]):E=o(o({},E),((O={})[R]=A[R],O)):E=o(o({},E),((V={})[R]=A[R],V))})),E}var Zt=function(){function t(x,A){this.shape=x,A&&this.setProperties(A)}return t.prototype.setProperties=function(x){var A,E;try{for(var R=r(Object.keys(x)),O=R.next();!O.done;O=R.next()){var V=O.value;this.shape[V]=x[V]}}catch(x){A={error:x}}finally{try{O&&!O.done&&(E=R.return)&&E.call(R)}finally{if(A)throw A.error}}},t.prototype.getProperty=function(x){return this.shape[x]},t}(),te=function(x){function e(A,E){var R,O,V,z,U=x.call(this,new UIInputText(A),o(o({},E),{placeholder:null!==(R=null==E?void 0:E.placeholder)&&void 0!==R?R:null==E?void 0:E.value,placeholderColor:null!==(O=null==E?void 0:E.placeholderColor)&&void 0!==O?O:null==E?void 0:E.color,onFocus:new OnFocus((function(){var x;U.isInputFocused=!0,null===(x=null==E?void 0:E.onFocus)||void 0===x||x.call(E)})),onBlur:new OnBlur((function(){var x,A;U.isInputFocused=!1,""===U.inputValue&&void 0!==U.placeholder?(U.setInputValue(U.placeholder),null===(x=null==E?void 0:E.onBlur)||void 0===x||x.call(E,!0)):null===(A=null==E?void 0:E.onBlur)||void 0===A||A.call(E,!1)})),onChanged:new OnChanged((function(x){var A,R=x.value;if(U.shape.visible)if(U.inputValue=R,R===U.placeholder)U.shape.placeholderColor=U.placeholderColor;else if(""===R&&(U.shape.placeholderColor=U.color,U.shape.placeholder=""),U.isInputFocused||""===R){var O=null!==(A=null==E?void 0:E.waitTime)&&void 0!==A?A:e.DEFAULT_WAIT_TIME;setTimeout((function(){var x;U.inputValue===R&&(null===(x=null==E?void 0:E.onChanged)||void 0===x||x.call(E,R))}),O)}})),onTextSubmit:new OnTextSubmit((function(x){var A=x.text,R=A.substr(0,A.length-1),O=null==E?void 0:E.onTextSubmit;O?O(R):setTimeout((function(){return U.shape.placeholder=R}),0)}))}))||this;return U.inputValue="",U.isInputFocused=!1,U.placeholder=U.shape.placeholder,U.color=U.shape.color,U.placeholderColor=U.shape.placeholderColor,U.inputValue=null!==(V=null==E?void 0:E.value)&&void 0!==V?V:null!==(z=null==E?void 0:E.placeholder)&&void 0!==z?z:"",U.isInputFocused=!1,U}return i(e,x),e.prototype.getValue=function(){return this.inputValue},e.prototype.isFocused=function(){return this.isInputFocused},e.prototype.setInputValue=function(x){var A=this.isInputFocused;this.isInputFocused=!1,this.shape.placeholder="",this.inputValue=this.shape.placeholder=x,this.isInputFocused=A},e.prototype.reset=function(){this.setInputValue(this.placeholder)},e.prototype.hide=function(){this.setProperties({visible:!1})},e.prototype.show=function(){this.setProperties({visible:!0}),this.setInputValue(this.inputValue)},e.DEFAULT_WAIT_TIME=650,e}(Zt),ee=function(x){function e(A,E){var R=x.call(this,new UIContainerRect(A),o({isPointerBlocker:!0},E))||this,O=new UIImage(R.shape,new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="));return O.width="100%",O.height="100%",O.sourceWidth=1,O.sourceHeight=1,O.isPointerBlocker=!0,R.image=O,(null==E?void 0:E.onClick)&&R.setOnClick(E.onClick),R}return i(e,x),e.prototype.performClick=function(){var x;null===(x=this.image.onClick)||void 0===x||x.callback({})},e.prototype.setOnClick=function(x){this.image.onClick=new OnClick(x)},e.prototype.clearOnClick=function(){this.image.onClick=null},e}(Zt),ne=function(x){function e(A,E){var R=x.call(this,new UIContainerRect(A),o({width:"100%",vAlign:"top",visible:!1},E))||this;R.config=o(o({},e.DEFAULTS),E);var O=new ee(R.shape,{width:"100%",height:"100%",color:Color4.Clear()});R.clickableContainer=O;var V=new UIImage(O.shape,new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="));V.width=V.height=R.config.imageSize,V.hAlign="left",V.positionX=10,V.vAlign="center",R.image=V;var z=new UIText(O.shape);z.vAlign="top",z.hAlign="left",z.vTextAlign="top",z.fontSize=R.config.topFontSize,z.color=R.config.topTextColor,z.positionX=55,z.positionY=-10,z.isPointerBlocker=!1,R.topLeftText=z;var U=new UIText(O.shape);U.vAlign="top",U.hAlign="right",U.vTextAlign="top",U.hTextAlign="right",U.fontSize=z.fontSize,U.color=z.color,U.isPointerBlocker=!1,U.positionX=-10,U.positionY=z.positionY,R.topRightText=U;var Q=new UIText(O.shape);Q.vAlign="bottom",Q.hAlign="left",Q.vTextAlign="bottom",Q.fontSize=R.config.bottomFontSize,Q.color=R.config.bottomTextColor,Q.positionX=z.positionX,Q.positionY=10,Q.isPointerBlocker=!1,R.bottomLeftText=Q;var W=new UIText(O.shape);return W.vAlign="bottom",W.hAlign="right",W.vTextAlign="bottom",W.hTextAlign="right",W.fontSize=Q.fontSize,W.color=Q.color,W.isPointerBlocker=!1,W.positionX=U.positionX,W.positionY=Q.positionY,R.bottomRightText=W,R}return i(e,x),e.prototype.setOption=function(x,A){this.image.visible=!1,this.topRightText.visible=!1,this.bottomLeftText.visible=!1,this.bottomRightText.visible=!1,x.image?(this.image.source=new Texture(x.image.src),this.image.sourceWidth=x.image.sourceWidth,this.image.sourceHeight=x.image.sourceHeight,this.image.visible=!0,this.topLeftText.positionX=this.config.imageSize+20):this.topLeftText.positionX=10,"string"==typeof x.visualText?(this.topLeftText.value=x.visualText,this.topLeftText.vAlign=this.topLeftText.vTextAlign="center",this.topLeftText.positionY=0):"text"in x.visualText?(this.topLeftText.vAlign=this.topLeftText.vTextAlign="top",this.topLeftText.positionY=-10,this.topLeftText.value=x.visualText.text,this.bottomLeftText.value=x.visualText.subText,this.bottomLeftText.visible=!0,this.bottomLeftText.positionX=this.topLeftText.positionX):"bottomLeft"in x.visualText&&(this.topLeftText.vAlign=this.topLeftText.vTextAlign="top",this.topLeftText.positionY=-10,this.topLeftText.value=x.visualText.topLeft,this.topRightText.value=x.visualText.topRight,this.bottomLeftText.value=x.visualText.bottomLeft,this.bottomRightText.value=x.visualText.bottomRight,this.topRightText.visible=!0,this.bottomLeftText.visible=!0,this.bottomRightText.visible=!0,this.bottomLeftText.positionX=this.topLeftText.positionX),A?this.clickableContainer.setOnClick(A):this.clickableContainer.clearOnClick()},e.prototype.setProperties=function(A){x.prototype.setProperties.call(this,A)},e.prototype.getProperty=function(A){return x.prototype.getProperty.call(this,A)},e.prototype.performClick=function(){this.clickableContainer.performClick()},e.DEFAULTS={topFontSize:14,bottomFontSize:14,imageSize:36,topTextColor:Color4.FromInts(14,16,60,255),bottomTextColor:Color4.FromInts(117,120,181,255)},e}(Zt),oe=function(x){function e(A,E,R,O){var V=x.call(this,new UIContainerRect(A),o({},R))||this;V.onSuccessfulSelection=O,V.uiOptions=[],V.options={},R.visible,R.opacity,R.hAlign,R.vAlign,R.positionX,R.positionY;var z=n(R,["visible","opacity","hAlign","vAlign","positionX","positionY"]);V.config=j(e.DEFAULTS,z),V.setProperties({width:V.config.width,height:V.config.initialHeight,color:V.config.borderColor}),V.setItems(E.items,E.dropdownDefaultItemIds);var Q=new UIContainerRect(V.shape);Q.color=V.config.backgroundColor,Q.width=V.config.width-2*V.config.borderSize,Q.height=V.config.initialHeight-2*V.config.borderSize,V.insideContainer=Q;var W=new te(Q,{vAlign:"top",hTextAlign:"left",vTextAlign:"center",width:"92%",fontSize:V.config.search.fontSize,placeholder:V.config.search.placeholder.defaultText,placeholderColor:V.config.search.placeholder.textColor,color:V.config.search.textColor,focusedBackground:Color4.Clear(),background:Color4.Clear(),height:.95*V.config.initialHeight,onBlur:function(){return V.close()},onTextSubmit:function(){V.uiOptions[0].getProperty("visible")?V.uiOptions[0].performClick():V.close()},onChanged:function(x){if(V.hideAllOptions(),x===V.config.search.placeholder.defaultText||""===x)V.showDefaultOptions();else{var A=x.toLowerCase(),E=[];for(var R in V.options){var O=V.options[R];if(O.searchBy.toLowerCase().indexOf(A)>=0&&(E.push(O),E.length===V.config.options.maxVisibleOptions))break}E.length>0?V.showOptions(E):V.showErrorMessage("Sorry, we can't find \""+x+'"')}}});V.inputText=W;for(var H=0;H<V.config.options.maxVisibleOptions;H++){var $=new ne(Q,o(o({},V.config.options),{height:V.config.initialHeight,positionY:-V.config.initialHeight-V.config.initialHeight*H,color:H%2==0?V.config.options.oddBackgroundColor:Q.color}));V.uiOptions.push($)}var G=new UIImage(Q,U);G.onClick=new OnClick((function(){return V.close()})),G.sourceTop=305,G.sourceLeft=985,G.sourceWidth=G.sourceHeight=35,G.width=G.height=18,G.hAlign="right",G.vAlign="top",G.positionX=-12,G.positionY=-12,G.visible=G.isPointerBlocker=!0;var X=new UIText(Q);return X.height=20,X.visible=!1,X.width="92%",X.hTextAlign="center",X.vAlign="bottom",X.positionY=20,X.fontSize=V.config.errorMessage.fontSize,X.color=V.config.errorMessage.textColor,V.errorMessage=X,V}return i(e,x),e.prototype.open=function(){this.setProperties({visible:!0}),this.showDefaultOptions()},e.prototype.close=function(){this.setProperties({visible:!1}),this.inputText.reset()},e.prototype.setItems=function(x,A){this.options=x.reduce((function(x,A){var E;return A.searchBy=null!==(E=A.searchBy)&&void 0!==E?E:"string"==typeof A.visualText?A.visualText:"text"in A.visualText?A.visualText.text:A.visualText.topLeft,x[A.id]=A,x}),{}),A?this.setDropdownDefaults(A):this.defaultOptions=A,this.hideAllOptions()},e.prototype.setDropdownDefaults=function(x){var A,E;try{for(var R=r(x),O=R.next();!O.done;O=R.next()){var V=O.value;if(!(V in this.options))return void error("Couldn't find an option with id '"+V+"'. Will not set new defaults")}}catch(x){A={error:x}}finally{try{O&&!O.done&&(E=R.return)&&E.call(R)}finally{if(A)throw A.error}}this.defaultOptions=x},e.prototype.showDefaultOptions=function(){var x,A=this;if(this.defaultOptions)x=this.defaultOptions.map((function(x){return A.options[x]})).slice(0,this.config.options.maxVisibleOptions);else for(var E in x=[],this.options)if(x.push(this.options[E]),x.length===this.config.options.maxVisibleOptions)break;this.showOptions(x)},e.prototype.showOptions=function(x){var A=this;this.resizeHeight(this.config.initialHeight*x.length+2*this.config.borderSize),x.forEach((function(x,E){var R=A.uiOptions[E];R.setOption(x,(function(){A.onSuccessfulSelection(x),A.setProperties({visible:!1})})),R.setProperties({visible:!0})})),this.errorMessage.visible=!1},e.prototype.hideAllOptions=function(){this.uiOptions.forEach((function(x){return x.setProperties({visible:!1})}))},e.prototype.showErrorMessage=function(x){this.errorMessage.visible=!0,this.errorMessage.value=x,this.resizeHeight(60)},e.prototype.resizeHeight=function(x){this.setProperties({height:this.config.initialHeight+x}),this.insideContainer.height=this.config.initialHeight+x-2*this.config.borderSize},e.DEFAULTS={borderColor:Color4.FromInts(232,236,253,255),backgroundColor:Color4.White(),borderSize:2,width:300,initialHeight:60,search:{fontSize:16,textColor:Color4.FromInts(24,26,70,255),placeholder:{defaultText:"Click to search",textColor:Color4.FromInts(118,120,181,200)}},options:{maxVisibleOptions:5,oddBackgroundColor:Color4.FromInts(246,246,255,255),topFontSize:14,bottomFontSize:14,imageSize:36,topTextColor:Color4.FromInts(14,16,60,255),bottomTextColor:Color4.FromInts(117,120,181,255)},errorMessage:{fontSize:13,textColor:Color4.FromInts(125,127,157,255)}},e}(Zt),ie=function(x){function e(A,E,R,O){var V=x.call(this,new UIContainerRect(A),o({},R))||this;V.onSuccessfulSelection=O,R.visible,R.opacity,R.hAlign,R.vAlign,R.positionX,R.positionY;var z=n(R,["visible","opacity","hAlign","vAlign","positionX","positionY"]);V.config=j(oe.DEFAULTS,z),V.setProperties({width:V.config.width,height:V.config.initialHeight,color:V.config.borderColor});var U=new ee(V.shape,{color:V.config.backgroundColor,width:V.config.width-2*V.config.borderSize,height:V.config.initialHeight-2*V.config.borderSize,onClick:function(){return V.uiSearchPrompt.open()}}),Q=new ne(U.shape,o(o({},V.config.options),{height:V.config.initialHeight,color:Color4.Clear(),width:V.config.width-2*V.config.borderSize-20,visible:!0,hAlign:"left",isPointerBlocker:!1})),W=new UIText(U.shape);if(W.value="Click to select an option",W.fontSize=V.config.search.fontSize,W.color=V.config.search.placeholder.textColor,W.vTextAlign=W.hTextAlign="center",W.positionX=-V.config.borderSize-10,W.isPointerBlocker=!1,W.opacity=W.color.a,V.initialText=W,null==E?void 0:E.initialItemId){var H=E.items.filter((function(x){return x.id===E.initialItemId}))[0];H&&(Q.setOption(H),V.initialText.visible=!1)}var $=new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAgMAAADXB5lNAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAN5AAADeQELGyzWAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAAlQTFRF////AAAAAAAAflGpXQAAAAJ0Uk5TAICbK04YAAAAeklEQVQ4je3PsRXEMAgE0VFCEapG9agaiiDRVXkJxlpq8IYT/AfwTbZ/ssPUEJgGZ2hYDTmgSIAiDoqsdskBRQIUcVBktXdO/jeVuBDPMBpRyEMUEhVMiUKKSOQlEokrmBKJXARsJWAqAaYEjEbAVgJmtGDewmjEt9wfISOqAUzY2sAAAAAASUVORK5CYII="),G=new UIImage(U.shape,$);return G.sourceWidth=G.sourceHeight=64,G.height=15,G.width=12,G.hAlign="right",G.vAlign="center",G.positionX=-10,G.visible=!0,G.isPointerBlocker=!1,V.uiSearchPrompt=new oe(V.shape,E,o(o({},R),{visible:!1,vAlign:"top",initialHeight:V.config.initialHeight-2*V.config.borderSize}),(function(x){Q.setOption(x),V.initialText.visible=!1,V.onSuccessfulSelection(x)})),V}return i(e,x),e.prototype.open=function(){this.setProperties({visible:!0})},e.prototype.close=function(){this.setProperties({visible:!1})},e.prototype.setSearchItems=function(x,A){this.uiSearchPrompt.setItems(x,A)},e.prototype.setSearchDropdownDefaults=function(x){this.uiSearchPrompt.setDropdownDefaults(x)},e}(Zt);x.CenterImage=Ft,x.CornerLabel=Xt,x.CustomPrompt=Ut,x.CustomPromptButton=Qt,x.CustomPromptCheckBox=qt,x.CustomPromptIcon=Ht,x.CustomPromptSwitch=Wt,x.CustomPromptText=$t,x.CustomPromptTextBox=Gt,x.FillInPrompt=jt,x.LargeIcon=Bt,x.LoadingIcon=Kt,x.MediumIcon=Dt,x.OkPrompt=Nt,x.OptionPrompt=Mt,x.SFFont=V,x.SFHeavyFont=z,x.SmallIcon=Lt,x.UIBar=kt,x.UICounter=J,x.UISearchPrompt=oe,x.UISelectBox=ie,x.canvas=O,x.darkTheme=Q,x.displayAnnouncement=function(x,E,R,O,V){W.visible=!0,W.value=x,W.color=R||Color4.Yellow(),W.fontSize=O||50,W.font=z,W.outlineColor=Color4.Black(),W.outlineWidth=V?0:.1,W.adaptWidth=!1,W.textWrapping=!0,W.width=900;var U=new Entity;engine.addEntity(U),-1!=E&&U.addComponentOrReplace(new A(E||3,(function(){W.visible=!1})))},x.hideAnnouncements=function(){W.visible=!1},x.lightTheme=U,Object.defineProperty(x,"__esModule",{value:!0})})),function(x,A){"object"==typeof exports&&"undefined"!=typeof module?A(exports):"function"==typeof define&&define.amd?define("@dcl/npc-scene-utils",["exports"],A):A((x="undefined"!=typeof globalThis?globalThis:x||self)["@dcl/npc-scene-utils"]={})}(this,(function(x){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var e=function(x,A){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,A){x.__proto__=A}||function(x,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(x[E]=A[E])})(x,A)};function i(x,A){function o(){this.constructor=x}e(x,A),x.prototype=null===A?Object.create(A):(o.prototype=A.prototype,new o)}function o(x,A,E,R){var O,V=arguments.length,z=V<3?A:null===R?R=Object.getOwnPropertyDescriptor(A,E):R;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(x,A,E,R);else for(var U=x.length-1;U>=0;U--)(O=x[U])&&(z=(V<3?O(z):V>3?O(A,E,z):O(A,E))||z);return V>3&&z&&Object.defineProperty(A,E,z),z}function n(x){var A="function"==typeof Symbol&&Symbol.iterator,E=A&&x[A],R=0;if(E)return E.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&R>=x.length&&(x=void 0),{value:x&&x[R++],done:!x}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}var A=o([Component("trackUserFlag")],(function(x,A,R){this.lockXZRotation=!1,this.active=!1,E||(E=!0,engine.addSystem(new O)),this.lockXZRotation=x||!1,this.rotSpeed=A||2,R&&(this.active=!0)})),E=!1,R=Camera.instance,O=function(){function t(){this.followingNPCs=engine.getComponentGroup(A)}return t.prototype.update=function(x){var E,O;try{for(var V=n(this.followingNPCs.entities),z=V.next();!z.done;z=V.next()){var U=z.value,Q=U.getComponent(Transform),W=U.getComponent(A);if(W.active){var H=new Vector3(R.position.x,R.position.y,R.position.z).subtract(Q.position);Q.rotation=Quaternion.Slerp(Q.rotation,Quaternion.LookRotation(H),x*W.rotSpeed),W.lockXZRotation&&(Q.rotation.x=0,Q.rotation.z=0)}}}catch(x){E={error:x}}finally{try{z&&!z.done&&(O=V.return)&&O.call(V)}finally{if(E)throw E.error}}},t}(),V=new UICanvas;V.visible=!0;var z,U,Q=new Font(Fonts.SanFrancisco),W=new Font(Fonts.SanFrancisco_Heavy),H=new Texture("https://decentraland.org/images/ui/light-atlas-v3.png"),$=new Texture("https://decentraland.org/images/ui/dark-atlas-v3.png"),G=new Texture("https://decentraland.org/images/ui/dialog-bubbles.png");function b(x,A,E,R){void 0===E&&(E=512),void 0===R&&(R=512),function(x,A,E,R,O){x.uvs=[A.x,A.y,E.x,E.y,R.x,R.y,O.x,O.y,A.x,A.y,E.x,E.y,R.x,R.y,O.x,O.y]}(x,new Vector2(A.sourceLeft/E,(R-A.sourceTop-A.sourceHeight)/R),new Vector2((A.sourceLeft+A.sourceWidth)/E,(R-A.sourceTop-A.sourceHeight)/R),new Vector2((A.sourceLeft+A.sourceWidth)/E,(R-A.sourceTop)/R),new Vector2(A.sourceLeft/E,(R-A.sourceTop)/R))}function T(x,A){x.sourceWidth=A.sourceWidth,x.sourceHeight=A.sourceHeight,x.sourceLeft=A.sourceLeft?A.sourceLeft:0,x.sourceTop=A.sourceTop?A.sourceTop:0}function C(x){var A=-10-4*x;return A>-65?A:-65}(z=x.ButtonStyles||(x.ButtonStyles={})).E="e",z.F="f",z.DARK="dark",z.RED="red",z.ROUNDBLACK="roundblack",z.ROUNDWHITE="roundwhite",z.ROUNDSILVER="roundsilver",z.ROUNDGOLD="roundgold",z.SQUAREBLACK="squareblack",z.SQUAREWHITE="squarewhite",z.SQUARESILVER="squaresilver",z.SQUAREGOLD="squaregold",z.WHITE="white",(U=x.NPCState||(x.NPCState={})).STANDING="standing",U.TALKING="talking",U.FOLLOWPATH="followPath";var X,K={buttons:{buttonE:{sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},buttonF:{sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},white:{sourceWidth:174,sourceHeight:46,sourceLeft:698,sourceTop:662},buttonRed:{sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},buttonDark:{sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},roundBlack:{sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:458},squareBlack:{sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:457},roundWhite:{sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:494},squareWhite:{sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:493},roundSilver:{sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:531},squareSilver:{sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:531},roundGold:{sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:567},squareGold:{sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:567}},buttonLabels:{E:{sourceWidth:26,sourceHeight:26,sourceLeft:697,sourceTop:611},F:{sourceWidth:26,sourceHeight:26,sourceLeft:733,sourceTop:611},EBlack:{sourceWidth:26,sourceHeight:26,sourceLeft:766,sourceTop:611},FBlack:{sourceWidth:26,sourceHeight:26,sourceLeft:802,sourceTop:611}},backgrounds:{promptBackground:{sourceWidth:416,sourceHeight:352,sourceLeft:501,sourceTop:12},promptLargeBackground:{sourceWidth:480,sourceHeight:384,sourceLeft:7,sourceTop:12},promptSlantedBackground:{sourceWidth:486,sourceHeight:326,sourceLeft:7,sourceTop:413},NPCDialog:{sourceWidth:766,sourceHeight:248,sourceLeft:22,sourceTop:756}},icons:{closeW:{sourceWidth:32,sourceHeight:32,sourceLeft:942,sourceTop:306},closeD:{sourceWidth:32,sourceHeight:32,sourceLeft:986,sourceTop:306},closeWLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:512,sourceTop:381},closeDLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:583,sourceTop:381},closeWNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:252},closeDNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:214},closeWNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:214},closeDNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:260},FDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:4},FWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:4},EDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:40},EWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:40},Timer:{sourceWidth:24,sourceHeight:32.2,sourceLeft:718,sourceTop:388},TimerLarge:{sourceWidth:48,sourceHeight:68,sourceLeft:662,sourceTop:386},ClickWhite:{sourceWidth:32,sourceHeight:48,sourceLeft:799,sourceTop:389},ClickDark:{sourceWidth:32,sourceHeight:48,sourceLeft:757,sourceTop:389}},checkboxes:{wOff:{sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:76},wOn:{sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:104},dOff:{sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:76},dOn:{sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:104},wLargeOff:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:132},wLargeOn:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:168},dLargeOff:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:132},dLargeOn:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:168}},switches:{roundOff:{sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:454},roundRed:{sourceWidth:64,sourceHeight:32,sourceLeft:853,sourceTop:454},roundGreen:{sourceWidth:64,sourceHeight:32,sourceLeft:923,sourceTop:454},squareOff:{sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:501},squareRed:{sourceWidth:64,sourceHeight:32,sourceLeft:852,sourceTop:501},squareGreen:{sourceWidth:64,sourceHeight:32,sourceLeft:921,sourceTop:501}},bubbles:{short:{sourceWidth:232,sourceHeight:168,sourceLeft:610,sourceTop:834},normal:{sourceWidth:572,sourceHeight:168,sourceLeft:16,sourceTop:834},long:{sourceWidth:994,sourceHeight:306,sourceLeft:12,sourceTop:508},huge:{sourceWidth:994,sourceHeight:478,sourceLeft:12,sourceTop:14}}},J=function(){function t(A,E){var R=this;et.createAndAddToEngine(),this.elapsedTime=0,this.targetTime=A,this.onTimeReachedCallback=E,this.onTargetTimeReached=function(A){R.onTimeReachedCallback(),A.removeComponent(x)}}var x;return x=t,t.prototype.setCallback=function(x){this.onTimeReachedCallback=x},x=o([Component("npcTimerDelay")],t)}(),Z=engine.getComponentGroup(J),et=function(){function t(){t._instance=this}return t.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new t,engine.addSystem(this._instance)),this._instance},t.prototype.update=function(x){var A,E;try{for(var R=n(Z.entities),O=R.next();!O.done;O=R.next()){var V=O.value,z=V.getComponent(J);z.elapsedTime+=x,z.elapsedTime>=z.targetTime&&z.onTargetTimeReached(V)}}catch(x){A={error:x}}finally{try{O&&!O.done&&(E=R.return)&&E.call(R)}finally{if(A)throw A.error}}},t._instance=null,t}();!function(x){x[x.Confirm=0]="Confirm",x[x.Cancel=1]="Cancel",x[x.Next=2]="Next",x[x.Button3=3]="Button3",x[x.Button4=4]="Button4"}(X||(X={}));var nt=.75,ot=-262.5,it=262.5,rt=37.5,st=192,at=192,ut=7.5,pt=112.5,lt=112.5,ht=-48.75,dt=-48.75,ft=19.5,gt=19.5,mt=function(){function e(A,E,R,O){var z=this;this.NPCScript=[],this.isDialogOpen=!1,this.isQuestionPanel=!1,this.isFixedScreen=!1,this.activeTextId=0,this.UIOpenTime=0,this.defaultSound=null,this.canvas=V,this.ClickAction=null,this.EButtonAction=null,this.FButtonAction=null,this.defaultPortrait=A||null,this.uiTheme=O||(E?$:H),this.container=new UIContainerRect(V),this.container.adaptWidth=!0,this.container.width="100%",this.container.vAlign="bottom",this.container.positionY=105,this.container.visible=!1,this.panel=new UIImage(this.container,this.uiTheme),T(this.panel,K.backgrounds.NPCDialog),this.panel.width=574.5,this.panel.height=186,this.panel.onClick=new OnClick((function(){z.confirmText(X.Next)})),this.defaultPortraitTexture=new Texture(A?A.path:this.uiTheme.src),this.portrait=new UIImage(this.container,this.defaultPortraitTexture),this.portrait.sourceWidth=A&&A.section?A.section.sourceWidth:256,this.portrait.sourceHeight=A&&A.section?A.section.sourceHeight:256,this.portrait.width=A&&A.width?A.width*nt:st,this.portrait.height=A&&A.height?A.height*nt:st,this.portrait.positionX=A&&A.offsetX?A.offsetX*nt+ot:ot,this.portrait.positionY=A&&A.offsetY?A.offsetY*nt+0:0,this.portrait.onClick=new OnClick((function(){z.confirmText(X.Next)})),this.image=new UIImage(this.container,new Texture(this.uiTheme.src)),this.image.sourceWidth=256,this.image.sourceHeight=256,this.image.sourceTop=0,this.image.sourceLeft=0,this.image.width=at,this.image.height=at,this.image.positionX=it,this.image.positionY=rt,this.image.onClick=new OnClick((function(){z.confirmText(X.Next)})),this.text=new UIText(this.container),this.text.adaptWidth=!1,this.text.textWrapping=!0,this.text.width=345,this.text.positionX=30,this.text.hAlign="center",this.text.vAlign="center",this.text.font=W,this.text.fontSize=18,this.text.hTextAlign="left",this.text.vTextAlign="center",this.text.positionY=ut,this.text.fontWeight="normal",this.text.color=E?Color4.White():Color4.Black(),this.text.isPointerBlocker=!1,this.soundEnt=new Entity,this.soundEnt.addComponent(new Transform),engine.addEntity(this.soundEnt),this.soundEnt.setParent(Attachable.AVATAR),R&&(this.soundEnt.addComponent(new AudioSource(new AudioClip(R))),this.soundEnt.getComponent(AudioSource).volume=.5,this.defaultSound=R),this.button1=new wt(this.container,this.uiTheme,"yes",pt,ht,(function(){z.confirmText(X.Confirm)}),!1,x.ButtonStyles.E),this.button1.hide(),this.button2=new wt(this.container,this.uiTheme,"no",-60,dt,(function(){z.confirmText(X.Cancel)}),!1,x.ButtonStyles.F),this.button2.hide(),this.button3=new wt(this.container,this.uiTheme,"maybe",-60,-60,(function(){z.confirmText(X.Button3)}),!1,x.ButtonStyles.DARK),this.button3.hide(),this.button4=new wt(this.container,this.uiTheme,"maybe",lt,-60,(function(){z.confirmText(X.Button4)}),!1,x.ButtonStyles.DARK),this.button4.hide(),this.skipButton=new wt(this.container,this.uiTheme,"Skip",-225,-75,(function(){z.skipDialogs()}),!1,$?x.ButtonStyles.WHITE:x.ButtonStyles.F),this.skipButton.image.width=60,this.skipButton.image.height=22.5,this.skipButton.label.hTextAlign="left",this.skipButton.label.fontSize=9,this.skipButton.label.positionX=30,this.skipButton.label.font=W,this.skipButton.icon.height=15,this.skipButton.icon.width=15,this.skipButton.icon.positionX=-15,this.skipButton.hide(),this.leftClickIcon=new UIImage(this.container,this.uiTheme),this.leftClickIcon.width=24,this.leftClickIcon.height=36,this.leftClickIcon.positionX=255,this.leftClickIcon.positionY=-60,this.leftClickIcon.visible=!1,T(this.leftClickIcon,E?K.icons.ClickDark:K.icons.ClickWhite),yt.createAndAddToEngine()}return e.prototype.openDialogWindow=function(x,A){var E=this;this.UIOpenTime=+Date.now(),this.NPCScript=x,this.activeTextId=A?"number"==typeof A?A:F(x,A):0;var R=x[this.activeTextId]?x[this.activeTextId]:{text:""};if(R.audio?(this.soundEnt.addComponentOrReplace(new AudioSource(new AudioClip(R.audio))),this.soundEnt.getComponent(AudioSource).volume=.5,this.soundEnt.getComponent(AudioSource).playOnce()):this.defaultSound&&(this.soundEnt.addComponentOrReplace(new AudioSource(new AudioClip(this.defaultSound))),this.soundEnt.getComponent(AudioSource).playOnce()),R.portrait?(this.portrait.source=new Texture(R.portrait.path),this.portrait.positionX=R.portrait.offsetX?R.portrait.offsetX*nt+ot:ot,this.portrait.positionY=R.portrait.offsetY?R.portrait.offsetY*nt+0:0,this.portrait.width=R.portrait.width?R.portrait.width*nt:st,this.portrait.height=R.portrait.height?R.portrait.height*nt:st,R.portrait.section&&T(this.portrait,R.portrait.section),this.portrait.visible=!0):this.defaultPortrait?(this.portrait.source=this.defaultPortraitTexture,this.portrait.positionX=this.defaultPortrait&&this.defaultPortrait.offsetX?this.defaultPortrait.offsetX*nt+ot:ot,this.portrait.positionY=this.defaultPortrait&&this.defaultPortrait.offsetY?this.defaultPortrait.offsetY*nt+0:0,this.portrait.width=this.defaultPortrait&&this.defaultPortrait.width?this.defaultPortrait.width*nt:st,this.portrait.height=this.defaultPortrait&&this.defaultPortrait.height?this.defaultPortrait.height*nt:st,this.defaultPortrait.section&&T(this.portrait,this.defaultPortrait.section),this.portrait.visible=!0):(log("No portrait"),this.portrait.visible=!1),R.image){var O=R.image;log("setting image to ",O.path),this.image.source=new Texture(O.path),this.image.positionX=O.offsetX?O.offsetX*nt+it:it,this.image.positionY=O.offsetY?O.offsetY*nt+rt:rt,this.image.width=O.width?O.width*nt:at,this.portrait.height=O.height?O.height*nt:at,O.section&&T(this.image,O.section),this.image.visible=!0}else this.image.visible=!1;this.text.fontSize=R.fontSize?R.fontSize*nt:18,this.text.positionY=R.offsetY?R.offsetY*nt+ut:ut,this.text.positionX=R.offsetX?R.offsetX*nt:0,this.text.visible=!0,this.container.visible=!0,yt._instance.newText(this,R.text,this.activeTextId,R.typeSpeed?R.typeSpeed:void 0),this.ClickAction||(this.ClickAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.POINTER,!1,(function(x){!E.isDialogOpen||+Date.now()-E.UIOpenTime<100||(yt._instance.done?E.isQuestionPanel||E.isFixedScreen||E.confirmText(X.Next):yt._instance.rush())})),this.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(x){E.isDialogOpen&&E.isQuestionPanel&&yt._instance.done&&+Date.now()-E.UIOpenTime>100&&E.confirmText(X.Confirm)})),this.FButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(x){E.isDialogOpen&&E.isQuestionPanel&&yt._instance.done&&+Date.now()-E.UIOpenTime>100?E.confirmText(X.Cancel):E.isDialogOpen&&R.skipable&&+Date.now()-E.UIOpenTime>100&&E.skipDialogs()}))),this.layoutDialogWindow(this.activeTextId),this.isDialogOpen=!0},e.prototype.confirmText=function(x){var A=this.NPCScript[this.activeTextId];if(x==X.Next&&!A.isQuestion){if(A.triggeredByNext&&A.triggeredByNext(),A.isEndOfDialog)return void this.closeDialogWindow();this.activeTextId++}x==X.Confirm&&A.buttons&&A.buttons.length>=1&&("number"==typeof A.buttons[0].goToDialog?this.activeTextId=A.buttons[0].goToDialog:this.activeTextId=F(this.NPCScript,A.buttons[0].goToDialog),A.buttons[0].triggeredActions&&A.buttons[0].triggeredActions()),x==X.Cancel&&A.buttons&&A.buttons.length>=2&&("number"==typeof A.buttons[1].goToDialog?this.activeTextId=A.buttons[1].goToDialog:this.activeTextId=F(this.NPCScript,A.buttons[1].goToDialog),A.buttons[1].triggeredActions&&A.buttons[1].triggeredActions()),x==X.Button3&&A.buttons&&A.buttons.length>=3&&("number"==typeof A.buttons[2].goToDialog?this.activeTextId=A.buttons[2].goToDialog:this.activeTextId=F(this.NPCScript,A.buttons[2].goToDialog),A.buttons[2].triggeredActions&&A.buttons[2].triggeredActions()),x==X.Button4&&A.buttons&&A.buttons.length>=4&&("number"==typeof A.buttons[3].goToDialog?this.activeTextId=A.buttons[3].goToDialog:this.activeTextId=F(this.NPCScript,A.buttons[3].goToDialog),A.buttons[3].triggeredActions&&A.buttons[3].triggeredActions()),A=this.NPCScript[this.activeTextId],yt._instance.newText(this,A.text,this.activeTextId,A.typeSpeed?A.typeSpeed:void 0)},e.prototype.layoutDialogWindow=function(x){var A=this,E=this.NPCScript[x]?this.NPCScript[x]:{text:""},R=E.offsetY?E.offsetY*nt+ut:ut;if(E.buttons&&E.buttons.length>=3?R+=37.5:E.buttons&&E.buttons.length>=1&&(R+=18),this.text.fontSize=E.fontSize?E.fontSize*nt:18,this.text.positionY=R,E.audio?(this.soundEnt.addComponentOrReplace(new AudioSource(new AudioClip(E.audio))),this.soundEnt.getComponent(AudioSource).volume=.5,this.soundEnt.getComponent(AudioSource).playOnce()):this.defaultSound&&(this.soundEnt.addComponentOrReplace(new AudioSource(new AudioClip(this.defaultSound))),this.soundEnt.getComponent(AudioSource).playOnce()),E.portrait?(this.portrait.source=new Texture(E.portrait.path),this.portrait.positionX=E.portrait.offsetX?E.portrait.offsetX*nt+ot:ot,this.portrait.positionY=E.portrait.offsetY?E.portrait.offsetY*nt+0:0,this.portrait.width=E.portrait.width?E.portrait.width*nt:st,this.portrait.height=E.portrait.height?E.portrait.height*nt:st,E.portrait.section&&T(this.portrait,E.portrait.section),this.portrait.visible=!0):this.defaultPortrait?(this.portrait.source=new Texture(this.defaultPortrait.path),this.portrait.positionX=this.defaultPortrait&&this.defaultPortrait.offsetX?this.defaultPortrait.offsetX*nt+ot:ot,this.portrait.positionY=this.defaultPortrait&&this.defaultPortrait.offsetY?this.defaultPortrait.offsetY*nt+0:0,this.portrait.width=this.defaultPortrait&&this.defaultPortrait.width?this.defaultPortrait.width*nt:st,this.portrait.height=this.defaultPortrait&&this.defaultPortrait.height?this.defaultPortrait.height*nt:st,this.defaultPortrait.section&&T(this.portrait,this.defaultPortrait.section),this.portrait.visible=!0):(log("No portrait"),this.portrait.visible=!1),this.image.visible=!1,E.image){var O=E.image;log("setting image to ",O.path),this.image.source=new Texture(O.path),this.image.positionX=O.offsetX?O.offsetX*nt+it:it,this.image.positionY=O.offsetY?O.offsetY*nt+rt:rt,this.image.width=E.image.width?E.image.width*nt:at,this.image.height=E.image.height?E.image.height*nt:at,O.section&&T(this.image,O.section),this.image.visible=!0}else this.image.visible=!1;this.isQuestionPanel=!!E.isQuestion&&E.isQuestion,this.isFixedScreen=!!E.isFixedScreen&&E.isFixedScreen,this.button1.hide(),this.button2.hide(),this.button3.hide(),this.button4.hide(),this.leftClickIcon.visible=!1,E.isQuestion?(this.skipButton.hide(),E.buttons&&E.buttons.length>=1&&this.button1.update(E.buttons[0].label,E.buttons[0].offsetX?E.buttons[0].offsetX*nt+pt:pt,E.buttons.length>=3?E.buttons[0].offsetY?E.buttons[0].offsetY*nt-15:-15:E.buttons[0].offsetY?E.buttons[0].offsetY*nt+ht:ht),E.buttons&&E.buttons.length>=2&&this.button2.update(E.buttons[1].label,E.buttons[1].offsetX*nt?E.buttons[1].offsetX*nt-60:-60,E.buttons.length>=3?E.buttons[1].offsetY*nt?E.buttons[1].offsetY*nt-15:-15:E.buttons[1].offsetY*nt?E.buttons[1].offsetY*nt+dt:dt),E.buttons&&E.buttons.length>=3&&this.button3.update(E.buttons[2].label,E.buttons[2].offsetX*nt?E.buttons[2].offsetX*nt-60:-60,E.buttons[2].offsetY*nt?E.buttons[2].offsetY*nt-60:-60),E.buttons&&E.buttons.length>=4&&this.button4.update(E.buttons[3].label,E.buttons[3].offsetX*nt?E.buttons[3].offsetX*nt+lt:lt,E.buttons[3].offsetY*nt?E.buttons[3].offsetY*nt-60:-60),vt.addComponentOrReplace(new J(.7,(function(){E.buttons&&E.buttons.length>=1&&A.button1.show(),E.buttons&&E.buttons.length>=2&&A.button2.show(),E.buttons&&E.buttons.length>=3&&A.button3.show(),E.buttons&&E.buttons.length>=4&&A.button4.show()})))):this.isFixedScreen||(this.leftClickIcon.visible=!0,E.skipable?this.skipButton.show():this.skipButton.hide())},e.prototype.closeDialogWindow=function(){this.isDialogOpen&&(this.isDialogOpen=!1,this.portrait.visible=!1,this.text.value="",this.text.visible=!1,this.button1.hide(),this.button2.hide(),this.button3.hide(),this.button4.hide(),this.skipButton.hide(),this.leftClickIcon.visible=!1,this.container.visible=!1)},e.prototype.skipDialogs=function(){if(this.isDialogOpen&&!(+Date.now()-this.UIOpenTime<100)){for(;this.NPCScript[this.activeTextId]&&this.NPCScript[this.activeTextId].skipable&&!this.NPCScript[this.activeTextId].isQuestion;){if(this.NPCScript[this.activeTextId].triggeredByNext&&this.NPCScript[this.activeTextId].triggeredByNext(),this.NPCScript[this.activeTextId].skipable&&this.NPCScript[this.activeTextId].isEndOfDialog)return void this.closeDialogWindow();this.activeTextId+=1}this.confirmText(X.Next)}},e}(),yt=function(){function t(){this.timer=0,this.speed=45,this.visibleChars=0,this.fullText="",this.UIText=null,this.done=!0,t._instance=this}return t.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new t,engine.addSystem(this._instance)),this._instance},t.prototype.update=function(x){if(!this.done&&(this.timer+=x,this.timer>=2/this.speed)){var A=Math.floor(this.timer/(1/this.speed));this.timer=0,this.visibleChars+=A,this.closeTag(A),this.visibleChars>=this.fullText.length&&(this.done=!0,this.visibleChars=this.fullText.length),this.UIText&&(this.UIText.value=this.fullText.substr(0,this.visibleChars))}},t.prototype.newText=function(x,A,E,R){this.timer=0,this.done=!1,this.UIText=x.text,this.fullText=A,this.visibleChars=0,R&&R<=0?this.rush():this.speed=R||45,x.layoutDialogWindow(E)},t.prototype.rush=function(){this.done=!0,this.timer=0,this.visibleChars=this.fullText.length,this.UIText&&(this.UIText.value=this.fullText)},t.prototype.closeTag=function(x){if(0!=this.visibleChars&&0!=x){for(var A=!1,E=!1,R=this.visibleChars-x;R<this.visibleChars;R++)A?">"==this.fullText.substr(R,1)&&(E=!0):"<"==this.fullText.substr(R,1)&&(A=!0);if(A&&!E)for(;this.visibleChars<this.fullText.length&&">"!=this.fullText.substr(this.visibleChars-1,1);)this.visibleChars+=1}},t._instance=null,t}(),wt=function(A){function o(E,R,O,V,z,U,W,G){var X=A.call(this)||this;if(X.icon=null,X.image=new UIImage(E,R),X.image.positionX=V,X.image.positionY=z,X.image.width=130.5,X.image.height=34.5,X.label=new UIText(X.image),X.style=G||null,X.onClick=U,X.style)switch(X.style){case x.ButtonStyles.E:T(X.image,K.buttons.buttonE),X.label.positionX=18.75,X.icon=new UIImage(X.image,1==W?$:H),X.icon.width=ft,X.icon.height=gt,X.icon.hAlign="center",X.icon.vAlign="center",X.icon.isPointerBlocker=!1,T(X.icon,K.buttonLabels.E),X.icon.positionX=C(O.length);break;case x.ButtonStyles.F:T(X.image,K.buttons.buttonF),X.label.positionX=18.75,X.icon=new UIImage(X.image,1==W?$:H),X.icon.width=ft,X.icon.height=gt,X.icon.hAlign="center",X.icon.vAlign="center",X.icon.isPointerBlocker=!1,T(X.icon,K.buttonLabels.F),X.icon.positionX=C(O.length);break;case x.ButtonStyles.WHITE:T(X.image,K.buttons.white),X.label.positionX=18.75,X.icon=new UIImage(X.image,1==W?$:H),X.icon.width=ft,X.icon.height=gt,X.icon.hAlign="center",X.icon.vAlign="center",X.icon.isPointerBlocker=!1,T(X.icon,K.buttonLabels.FBlack),X.icon.positionX=C(O.length);break;case x.ButtonStyles.RED:T(X.image,K.buttons.buttonRed);break;case x.ButtonStyles.DARK:T(X.image,K.buttons.buttonDark);break;case x.ButtonStyles.ROUNDBLACK:T(X.image,K.buttons.roundBlack);break;case x.ButtonStyles.ROUNDWHITE:T(X.image,K.buttons.roundWhite);break;case x.ButtonStyles.ROUNDSILVER:T(X.image,K.buttons.roundSilver);break;case x.ButtonStyles.ROUNDGOLD:T(X.image,K.buttons.roundGold);break;case x.ButtonStyles.SQUAREBLACK:T(X.image,K.buttons.squareBlack);break;case x.ButtonStyles.SQUAREWHITE:T(X.image,K.buttons.squareWhite);break;case x.ButtonStyles.SQUARESILVER:T(X.image,K.buttons.squareSilver);break;case x.ButtonStyles.SQUAREGOLD:T(X.image,K.buttons.squareGold)}else T(X.image,K.buttons.roundSilver);return X.label.value=O,X.label.hTextAlign="center",X.label.vTextAlign="center",X.label.fontSize=15,X.label.font=Q,X.label.color=G==x.ButtonStyles.ROUNDWHITE||G==x.ButtonStyles.SQUAREWHITE||G==x.ButtonStyles.WHITE?Color4.Black():Color4.White(),X.label.isPointerBlocker=!1,X.image.onClick=new OnClick((function(){X.onClick()})),G==x.ButtonStyles.E?Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(x){X.image.visible&&X.onClick()})):G==x.ButtonStyles.F&&Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(x){X.image.visible&&X.onClick()})),X}return i(o,A),o.prototype.hide=function(){this.image.visible=!1},o.prototype.show=function(){this.image.visible=!0},o.prototype.grayOut=function(){this.label.color=Color4.Gray(),this.image.isPointerBlocker=!1},o.prototype.enable=function(){this.label.color=Color4.White(),this.image.isPointerBlocker=!0},o.prototype.update=function(A,E,R){this.label.value=A,this.image.positionX=E,this.image.positionY=R,!this.icon||this.style!=x.ButtonStyles.E&&this.style!=x.ButtonStyles.F||(this.icon.positionX=C(A.length))},o}(Entity),vt=new Entity;function F(x,A){for(var E=0;E<x.length;E++)if(x[E].name&&x[E].name==A)return E;return 0}engine.addEntity(vt);var bt=function(){function t(){this._triggers={},t._instance=this,this._cameraTriggerWrapper=new Tt(new j(new Vector3(.5,1.8,.5),new Vector3(0,.91,0))),this._componentGroup=engine.getComponentGroup(At)}return Object.defineProperty(t,"instance",{get:function(){return this.createAndAddToEngine()},enumerable:!1,configurable:!0}),t.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new t,engine.addSystem(this._instance)),this._instance},t.prototype.setCameraTriggerShape=function(x){this._cameraTriggerWrapper.setShape(x)},t.prototype.update=function(){var x=this,A=this._componentGroup.entities;for(var E in A.forEach((function(A){x.shouldWrapTriggerEntity(A)&&x.wrapTriggerEntity(A)})),this._triggers)if(this._triggers.hasOwnProperty(E)){var R=this._triggers[E];R.isDebugging()&&R.updateDebugEntity(),R.isInEngine()?null!=R.trigger&&R.trigger.enabled?(R.wasEnabled||R.isDebugging()&&R.addDebugEntity(),R.wasEnabled=!0,(R.trigger.onCameraEnter||R.trigger.onCameraExit)&&this.checkCollisionAgainstCamera(R),(R.trigger.onTriggerEnter||R.trigger.onTriggerExit)&&this.checkCollisionAgainstOtherTriggers(R)):R.wasEnabled&&(R.wasEnabled=!1,R.isDebugging()&&R.removeDebugEntity(),t.removeTriggerFromSystem(R)):(R.isDebugging()&&R.removeDebugEntity(),t.removeTriggerFromSystem(R),delete this._triggers[E])}},t.prototype.shouldWrapTriggerEntity=function(x){return null==this._triggers[x.uuid]||null==this._triggers[x.uuid]},t.prototype.wrapTriggerEntity=function(x){this._triggers[x.uuid]=new xt(x)},t.removeTriggerFromSystem=function(x){for(var A,E=x.getActiveCollisions(),R=0;R<E.length;R++)!(E[R]===(null===(A=t._instance)||void 0===A?void 0:A._cameraTriggerWrapper)||null==E[R].trigger)&&E[R].trigger.onTriggerExit&&x.entity&&E[R].trigger.onTriggerExit(x.entity),E[R].disengageActiveCollision(x),x.disengageActiveCollision(E[R])},t.disengageCollision=function(x,A){x.disengageActiveCollision(A),A.disengageActiveCollision(x),x.trigger.onTriggerExit&&A.entity&&x.trigger.onTriggerExit(A.entity),A.trigger.onTriggerExit&&x.entity&&A.trigger.onTriggerExit(x.entity)},t.engageCollision=function(x,A){x.engageCollision(A),A.engageCollision(x),x.trigger.onTriggerEnter&&A.entity&&x.trigger.onTriggerEnter(A.entity),A.trigger.onTriggerEnter&&x.entity&&A.trigger.onTriggerEnter(x.entity)},t.prototype.checkCollisionAgainstCamera=function(x){var A=x.hasActiveCollision(this._cameraTriggerWrapper),E=t.areColliding(x,this._cameraTriggerWrapper);A&&!E?(x.disengageActiveCollision(this._cameraTriggerWrapper),x.trigger.onCameraExit&&x.trigger.onCameraExit()):!A&&E&&(x.engageCollision(this._cameraTriggerWrapper),x.trigger.onCameraEnter&&x.trigger.onCameraEnter())},t.prototype.checkCollisionAgainstOtherTriggers=function(x){for(var A in this._triggers)if(this._triggers.hasOwnProperty(A)&&A!=x.uuid&&this._triggers[A].trigger.enabled&&t.canTriggersCollide(x,this._triggers[A])){var E=x.hasActiveCollision(this._triggers[A]),R=t.areColliding(x,this._triggers[A]);E&&!R?t.disengageCollision(x,this._triggers[A]):!E&&R&&t.engageCollision(x,this._triggers[A])}},t.canTriggersCollide=function(x,A){return 0==x.trigger.triggeredByLayer||0!=(A.trigger.layer&x.trigger.triggeredByLayer)},t.areColliding=function(x,A){return x.getShape()instanceof j&&A.getShape()instanceof j?t.areCollidingAABB(x.getGlobalPosition(),x.getShape(),A.getGlobalPosition(),A.getShape()):x.getShape()instanceof q&&A.getShape()instanceof q?t.areCollidingSphere(x.getGlobalPosition(),x.getShape(),A.getGlobalPosition(),A.getShape()):x.getShape()instanceof j&&A.getShape()instanceof q?t.areCollidingAABBSphere(x.getGlobalPosition(),x.getShape(),A.getGlobalPosition(),A.getShape()):x.getShape()instanceof q&&A.getShape()instanceof j&&t.areCollidingAABBSphere(A.getGlobalPosition(),A.getShape(),x.getGlobalPosition(),x.getShape())},t.areCollidingAABB=function(x,A,E,R){var O=t.getBoxShapeValues(x,A),V=t.getBoxShapeValues(E,R);return O.min.x<=V.max.x&&O.max.x>=V.min.x&&O.min.y<=V.max.y&&O.max.y>=V.min.y&&O.min.z<=V.max.z&&O.max.z>=V.min.z},t.areCollidingSphere=function(x,A,E,R){return Vector3.DistanceSquared(x.add(A.position),E.add(R.position))<A.radius*A.radius+R.radius*R.radius},t.areCollidingAABBSphere=function(x,A,E,R){var O=t.getBoxShapeValues(x,A),V=E.add(R.position),z=R.radius,U=0;return V.x<O.min.x&&(U+=(O.min.x-V.x)*(O.min.x-V.x)),V.x>O.max.x&&(U+=(V.x-O.max.x)*(V.x-O.max.x)),V.y<O.min.y&&(U+=(O.min.y-V.y)*(O.min.y-V.y)),V.y>O.max.y&&(U+=(V.y-O.max.y)*(V.y-O.max.y)),V.z<O.min.z&&(U+=(O.min.z-V.z)*(O.min.z-V.z)),V.z>O.max.z&&(U+=(V.z-O.max.z)*(V.z-O.max.z)),U<z*z},t.getBoxShapeValues=function(x,A){var E=x.add(A.position);return{center:E,min:E.subtract(A.size.scale(.5)),max:E.add(A.size.scale(.5))}},t._instance=null,t}(),xt=function(){function t(x){this.wasEnabled=!0,this._uuid="",this._collidingWith={},this._isDebug=!1,this._debugEntity=null,this._entity=x,x&&(this._trigger=x.getComponent(At),this._uuid=x.uuid,this._isDebug=this._trigger.debugEnabled,this._isDebug&&this.addDebugEntity())}return Object.defineProperty(t.prototype,"entity",{get:function(){return this._entity},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trigger",{get:function(){return this._trigger},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this._uuid},enumerable:!1,configurable:!0}),t.prototype.getGlobalPosition=function(){return this._entity?t.getEntityWorldPosition(this._entity):Vector3.Zero()},t.prototype.getShape=function(){return this._trigger.shape},t.prototype.isInEngine=function(){return null!=this._entity&&this._entity.isAddedToEngine()},t.prototype.getActiveCollisions=function(){var x=[];for(var A in this._collidingWith)this._collidingWith.hasOwnProperty(A)&&x.push(this._collidingWith[A]);return x},t.prototype.hasActiveCollision=function(x){return null!=this._collidingWith[x.uuid]&&null!=this._collidingWith[x.uuid]},t.prototype.disengageActiveCollision=function(x){delete this._collidingWith[x.uuid]},t.prototype.engageCollision=function(x){this._collidingWith[x.uuid]=x},t.prototype.isDebugging=function(){return this._isDebug},t.prototype.addDebugEntity=function(){if(t._debugMaterial||(t._debugMaterial=new Material,t._debugMaterial.alphaTest=.5),null==this._debugEntity){this._debugEntity=new Entity;var x=new Transform;if(this._debugEntity.addComponent(x),this._debugEntity.addComponent(t._debugMaterial),this.getShape()instanceof j&&((A=new BoxShape).withCollisions=!1,this._debugEntity.addComponent(A),x.scale=this.getShape().size),this.getShape()instanceof q){var A;(A=new SphereShape).withCollisions=!1,this._debugEntity.addComponent(A);var E=this.getShape().radius;x.scale=new Vector3(E,E,E)}}engine.addEntity(this._debugEntity)},t.prototype.removeDebugEntity=function(){null!=this._debugEntity&&engine.removeEntity(this._debugEntity)},t.prototype.updateDebugEntity=function(){this._debugEntity&&(this._debugEntity.getComponent(Transform).position=this.getGlobalPosition().add(this.getShape().position))},t.getEntityWorldPosition=function(x){var A=x.hasComponent(Transform)?x.getComponent(Transform).position.clone():Vector3.Zero(),E=x.getParent();if(null!=E){var R=E.hasComponent(Transform)?E.getComponent(Transform).rotation:Quaternion.Identity;return this.getEntityWorldPosition(E).add(A.rotate(R))}return A},t._debugMaterial=null,t}(),Tt=function(x){function e(A){var E=x.call(this)||this;return E._shape=A,E._uuid="cameraTrigger",E}return i(e,x),e.prototype.getGlobalPosition=function(){return Camera.instance.position},e.prototype.getShape=function(){return this._shape},e.prototype.setShape=function(x){this._shape=x},e.prototype.isInEngine=function(){return!1},e.prototype.hasActiveCollision=function(x){return!1},e.prototype.disengageActiveCollision=function(x){},e.prototype.engageCollision=function(x){},e.prototype.isDebugging=function(){return!1},e}(xt),At=function(){function t(x,A){this.enabled=!0,this.layer=0,this.triggeredByLayer=0,bt.createAndAddToEngine(),this.shape=x,this.layer=A&&A.layer?A.layer:0,this.triggeredByLayer=A&&A.triggeredByLayer?A.triggeredByLayer:0,this.onTriggerEnter=A&&A.onTriggerEnter?A.onTriggerEnter:void 0,this.onTriggerExit=A&&A.onTriggerExit?A.onTriggerExit:void 0,this.onCameraEnter=A&&A.onCameraEnter?A.onCameraEnter:void 0,this.onCameraExit=A&&A.onCameraExit?A.onCameraExit:void 0,this._debugEnabled=!(!A||!A.enableDebug)&&A.enableDebug}return Object.defineProperty(t.prototype,"debugEnabled",{get:function(){return this._debugEnabled},enumerable:!1,configurable:!0}),o([Component("npcTriggerComponent")],t)}(),j=function(x,A){this.size=x,this.position=A},q=function(x,A){this.radius=x,this.position=A},Et=function(){function t(x){this.origin=0,this.target=1,this.fraction=0,this.totalDuration=0,this.speed=[],this.loop=!1,this.path=x,St.createAndAddToEngine()}return t.prototype.setIndex=function(x){this.fraction=0,this.origin=x,this.target=x+1<this.path.length?x+1:0},o([Component("npclerpData")],t)}(),Ct=[],St=function(){function e(){e._instance=this}return e.prototype.update=function(A){var E,R;try{for(var O=n(Ct),V=O.next();!V.done;V=O.next()){var z=V.value;if(z.state==x.NPCState.FOLLOWPATH){var U=z.getComponent(Transform),Q=z.getComponent(Et);if(Q.fraction<1)Q.fraction+=A*Q.speed[Q.origin],U.position=Vector3.Lerp(Q.path[Q.origin],Q.path[Q.target],Q.fraction);else{if(Q.origin=Q.target,Q.target+=1,Q.target>=Q.path.length){if(!Q.loop)return z.stopWalking(),Q.onFinishCallback&&Q.onFinishCallback(),void(Q.fraction=1);Q.target=0}else Q.onReachedPointCallback&&Q.onReachedPointCallback();Q.fraction=0,U.lookAt(Q.path[Q.target])}}}}catch(x){E={error:x}}finally{try{V&&!V.done&&(R=O.return)&&R.call(O)}finally{if(E)throw E.error}}},e.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new e,engine.addSystem(this._instance)),this._instance},e._instance=null,e}(),_t=100,It=function(){function t(x,A,E){this.NPCScript=[],this.isBubleOpen=!1,this.activeTextId=0,this.defaultSound=null,this.baseYOffset=2.5,this.baseYOffset=A||2.5,this.rootEntity=new Entity,this.rootEntity.addComponent(new Billboard(!1,!0,!1)),this.rootEntity.addComponent(new Transform),this.rootEntity.setParent(x),this.container=new Entity,this.container.addComponent(new Transform({position:new Vector3(-.1,this.baseYOffset,0)})),this.container.setParent(this.rootEntity),this.material=new BasicMaterial,this.material.texture=G,this.panel=new Entity,this.panel.addComponent(new Transform({scale:new Vector3(2,1,1)})),this.panel.setParent(this.container),this.panel.addComponent(new PlaneShape),this.panel.addComponent(this.material),this.panel.getComponent(PlaneShape).visible=!1,b(this.panel.getComponent(PlaneShape),K.bubbles.normal,1024,1024),this.text=new Entity,this.text.addComponent(new Transform({position:new Vector3(0,0,.05),rotation:Quaternion.Euler(0,180,0)})),this.text.addComponent(new TextShape("")),this.text.setParent(this.container),this.text.getComponent(TextShape).textWrapping=!0,this.text.getComponent(TextShape).font=W,this.text.getComponent(TextShape).hTextAlign="center",this.text.getComponent(TextShape).vTextAlign="center",this.text.getComponent(TextShape).fontSize=1,this.text.getComponent(TextShape).fontWeight="normal",this.text.getComponent(TextShape).color=Color3.Black(),this.text.getComponent(TextShape).visible=!1,this.soundEnt=new Entity,E&&(this.soundEnt.addComponent(new Transform),engine.addEntity(this.soundEnt),this.soundEnt.setParent(this.container),this.soundEnt.addComponent(new AudioSource(new AudioClip(E))),this.soundEnt.getComponent(AudioSource).volume=.5,this.defaultSound=E),Rt.createAndAddToEngine()}return t.prototype.openDialogWindow=function(x,A){this.NPCScript=x,this.activeTextId=A?"number"==typeof A?A:function(x,A){for(var E=0;E<x.length;E++)if(x[E].name&&x[E].name==A)return E;return 0}(x,A):0;var E=x[this.activeTextId]?x[this.activeTextId]:{text:""};E.audio?(this.soundEnt.addComponentOrReplace(new AudioSource(new AudioClip(E.audio))),this.soundEnt.getComponent(AudioSource).volume=.5,this.soundEnt.getComponent(AudioSource).playOnce()):this.defaultSound&&(this.soundEnt.addComponentOrReplace(new AudioSource(new AudioClip(this.defaultSound))),this.soundEnt.getComponent(AudioSource).playOnce()),this.text.getComponent(TextShape).fontSize=E.fontSize?E.fontSize:1,this.text.getComponent(Transform).position.y=E.offsetY?E.offsetY+0:0,this.text.getComponent(Transform).position.x=E.offsetX?E.offsetX:0,this.text.getComponent(TextShape).visible=!0,this.panel.getComponent(PlaneShape).visible=!0,this.text.getComponent(TextShape).value="",E.text.length<_t&&E.text.slice(0,_t),Rt._instance.newText(this,E.text,this.activeTextId,E.timeOn?E.timeOn:void 0,E.typeSpeed?E.typeSpeed:void 0),this.adjustBubble(E.text.length),this.layoutDialogWindow(this.activeTextId),this.isBubleOpen=!0},t.prototype.adjustBubble=function(x){x<8?(b(this.panel.getComponent(PlaneShape),K.bubbles.short,1024,1024),this.panel.getComponent(Transform).scale.x=.58,this.panel.getComponent(Transform).scale.y=.42,this.container.getComponent(Transform).position.x=-.1,this.container.getComponent(Transform).position.y=this.baseYOffset+-.2,this.text.getComponent(TextShape).width=.7):x<25?(b(this.panel.getComponent(PlaneShape),K.bubbles.normal,1024,1024),this.panel.getComponent(Transform).scale.x=1.43,this.panel.getComponent(Transform).scale.y=.42,this.container.getComponent(Transform).position.x=-.5,this.container.getComponent(Transform).position.y=this.baseYOffset+-.2,this.text.getComponent(TextShape).width=1.5):x<50?(b(this.panel.getComponent(PlaneShape),K.bubbles.long,1024,1024),this.panel.getComponent(Transform).scale.x=2.485,this.panel.getComponent(Transform).scale.y=.765,this.container.getComponent(Transform).position.y=this.baseYOffset+0,this.container.getComponent(Transform).position.x=-.8,this.text.getComponent(TextShape).width=2):(b(this.panel.getComponent(PlaneShape),K.bubbles.huge,1024,1024),this.panel.getComponent(Transform).scale.x=2.485,this.panel.getComponent(Transform).scale.y=1.195,this.container.getComponent(Transform).position.y=this.baseYOffset+.2,this.container.getComponent(Transform).position.x=-.8,this.text.getComponent(TextShape).width=2)},t.prototype.next=function(){var x=this.NPCScript[this.activeTextId];x||(x=this.NPCScript[this.activeTextId-1]),x.triggeredByNext&&x.triggeredByNext(),x.isEndOfDialog?this.closeDialogWindow():(this.activeTextId++,(x=this.NPCScript[this.activeTextId]).text.length<_t&&x.text.slice(0,_t),this.text.getComponent(TextShape).value="",this.adjustBubble(x.text.length),Rt._instance.newText(this,x.text,this.activeTextId,x.timeOn?x.timeOn:void 0,x.typeSpeed?x.typeSpeed:void 0),this.layoutDialogWindow(this.activeTextId))},t.prototype.layoutDialogWindow=function(x){var A=this.NPCScript[x]?this.NPCScript[x]:{text:""},E=A.offsetY?A.offsetY+0:0;A.buttons&&A.buttons.length>=3?E+=50:A.buttons&&A.buttons.length>=1&&(E+=24),this.text.getComponent(TextShape).fontSize=A.fontSize?A.fontSize:1,this.text.getComponent(Transform).position.y=E,A.audio?(this.soundEnt.addComponentOrReplace(new AudioSource(new AudioClip(A.audio))),this.soundEnt.getComponent(AudioSource).volume=.5,this.soundEnt.getComponent(AudioSource).playOnce()):this.defaultSound&&(this.soundEnt.addComponentOrReplace(new AudioSource(new AudioClip(this.defaultSound))),this.soundEnt.getComponent(AudioSource).playOnce())},t.prototype.closeDialogWindow=function(){this.isBubleOpen&&(this.isBubleOpen=!1,this.text.getComponent(TextShape).value="",this.text.getComponent(TextShape).visible=!1,this.panel.getComponent(PlaneShape).visible=!1)},t.prototype.closeDialogEndAll=function(){this.isBubleOpen&&(this.isBubleOpen=!1,this.text.getComponent(TextShape).value="",this.text.getComponent(TextShape).visible=!1,this.panel.getComponent(PlaneShape).visible=!1,Rt._instance.Dialog==this&&(Rt._instance.done=!0))},t.prototype.skipDialogs=function(){if(this.isBubleOpen)for(;this.NPCScript[this.activeTextId];){if(this.NPCScript[this.activeTextId].triggeredByNext&&this.NPCScript[this.activeTextId].triggeredByNext(),this.NPCScript[this.activeTextId].isEndOfDialog)return void this.closeDialogWindow();this.activeTextId+=1}},t}(),Rt=function(){function t(){this.timer=0,this.speed=45,this.visibleChars=0,this.fullText="",this.Text=null,this.textId=0,this.done=!0,this.showing=!1,this.timeOn=3,t._instance=this}return t.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new t,engine.addSystem(this._instance)),this._instance},t.prototype.update=function(x){if(!this.done)if(this.timer+=x,this.showing)this.timer>this.timeOn&&(this.showing=!1,this.done=!0,this.timer=0,this.window.next());else if(this.timer>=2/this.speed){var A=Math.floor(this.timer/(1/this.speed));this.timer=0,this.visibleChars+=A,this.closeTag(A),this.visibleChars>=this.fullText.length&&(this.showing=!0,this.timer=0,this.visibleChars=this.fullText.length),this.Text&&(this.Text.value=this.fullText.substr(0,this.visibleChars))}},t.prototype.newText=function(x,A,E,R,O){if(x!=this.Dialog||E!=this.textId){var V=this.Dialog;this.Dialog=x,this.Text=this.Dialog.text.getComponent(TextShape),this.textId=E,V&&x!=V&&V.skipDialogs(),this.timer=0,this.done=!1,this.showing=!1,this.fullText=A,this.visibleChars=0,this.window=x,O&&O<=0?this.rush():this.speed=O||45,this.timeOn=R||3}},t.prototype.rush=function(){this.showing=!0,this.timer=0,this.visibleChars=this.fullText.length,this.Text&&(this.Text.value=this.fullText)},t.prototype.closeTag=function(x){if(0!=this.visibleChars&&0!=x){for(var A=!1,E=!1,R=this.visibleChars-x;R<this.visibleChars;R++)A?">"==this.fullText.substr(R,1)&&(E=!0):"<"==this.fullText.substr(R,1)&&(A=!0);if(A&&!E)for(;this.visibleChars<this.fullText.length&&">"!=this.fullText.substr(this.visibleChars-1,1);)this.visibleChars+=1}},t._instance=null,t}(),Ot=function(E){function o(R,O,V,z){var U=E.call(this)||this;U.introduced=!1,U.onWalkAway=null,U.inCooldown=!1,U.coolDownDuration=5,U.faceUser=!1,U.walkingAnim=null,U.walkingSpeed=2,U.bubbleHeight=2,U.addComponent(new GLTFShape(O)),U.addComponent(new Transform(R)),engine.addEntity(U),U.state=x.NPCState.STANDING,z&&z.noUI||(z&&z.portrait?U.dialog=new mt("string"==typeof z.portrait?{path:z.portrait}:z.portrait,!(!z||!z.darkUI)&&z.darkUI,z.dialogSound?z.dialogSound:void 0):U.dialog=new mt(void 0,!(!z||!z.darkUI)&&z.darkUI,z&&z.dialogSound?z.dialogSound:void 0)),z&&z.textBubble&&(z&&z.bubbleHeight&&(U.bubbleHeight=z.bubbleHeight),U.bubble=new It(U,U.bubbleHeight,z.dialogSound?z.dialogSound:void 0)),U.addComponent(new Animator),U.idleAnim=new AnimationState(z&&z.idleAnim?z.idleAnim:"Idle",{looping:!0}),U.getComponent(Animator).addClip(U.idleAnim),U.lastPlayedAnim=U.idleAnim,U.idleAnim.play(),z&&z.walkingAnim&&(U.walkingAnim=new AnimationState(z.walkingAnim,{looping:!0}),U.getComponent(Animator).addClip(U.walkingAnim)),U.onActivate=V,z&&z.onWalkAway&&(U.onWalkAway=z.onWalkAway),U.endAnimTimer=new Entity,engine.addEntity(U.endAnimTimer),U.closeDialogTimer=new Entity,engine.addEntity(U.closeDialogTimer),U.pauseWalkingTimer=new Entity,engine.addEntity(U.pauseWalkingTimer);var Q=z&&z.onlyClickTrigger?ActionButton.POINTER:ActionButton.PRIMARY;U.addComponent(new OnPointerDown((function(x){U.inCooldown||U.dialog&&U.dialog.isDialogOpen||U.activate()}),{button:Q,hoverText:z&&z.hoverText?z.hoverText:"Talk",showFeedback:!z||!z.onlyExternalTrigger})),z&&z.onlyExternalTrigger&&U.removeComponent(OnPointerDown);var W={};return(!z||z&&!z.continueOnWalkAway)&&(W.onCameraExit=function(){U.handleWalkAway()}),z&&(!z||z.onlyExternalTrigger||z.onlyClickTrigger||z.onlyETrigger)||(W.onCameraEnter=function(){U.inCooldown?log(U.name," in cooldown"):U.dialog&&U.dialog.isDialogOpen||z&&z.onlyExternalTrigger||z&&z.onlyClickTrigger||U.activate()}),(W.onCameraEnter||W.onCameraExit)&&U.addComponent(new At(new q(z&&z.reactDistance?z.reactDistance:6,Vector3.Zero()),W)),z&&z.faceUser&&(U.addComponent(new A(!0,z.turningSpeed?z.turningSpeed:void 0)),U.faceUser=!0),z&&z.walkingSpeed&&(U.walkingSpeed=z.walkingSpeed),z&&z.coolDownDuration&&(U.coolDownDuration=z.coolDownDuration),z&&z.path&&(U.addComponent(new Et(z.path?z.path:[])),U.getComponent(Et).loop=!0,Ct.push(U),U.followPath()),U}return i(o,E),o.prototype.activate=function(){var x=this;this.faceUser&&(this.getComponent(A).active=!0),this.inCooldown=!0,this.addComponentOrReplace(new J(this.coolDownDuration,(function(){x.inCooldown=!1}))),this.onActivate()},o.prototype.endInteraction=function(){this.faceUser&&(this.getComponent(A).active=!1),this.dialog&&this.dialog.isDialogOpen&&this.dialog.closeDialogWindow(),this.bubble&&this.bubble.isBubleOpen&&this.bubble.closeDialogWindow(),this.state=x.NPCState.STANDING},o.prototype.handleWalkAway=function(){this.state!=x.NPCState.FOLLOWPATH&&(this.endInteraction(),this.onWalkAway&&this.onWalkAway())},o.prototype.talk=function(A,E,R){var O=this;this.introduced=!0,this.state=x.NPCState.TALKING,this.closeDialogTimer.hasComponent(J)&&this.closeDialogTimer.removeComponent(J),this.bubble&&this.bubble.isBubleOpen&&this.bubble.closeDialogWindow(),this.dialog.openDialogWindow(A,E||0),R&&this.closeDialogTimer.addComponentOrReplace(new J(R,(function(){O.dialog.closeDialogWindow()})))},o.prototype.talkBubble=function(x,A){this.bubble||(this.bubble=new It(this,this.bubbleHeight)),this.bubble.openDialogWindow(x,A||0)},o.prototype.playAnimation=function(x,A,E){var R=this;this.lastPlayedAnim.stop(),this.endAnimTimer.hasComponent(J)&&this.endAnimTimer.removeComponent(J);var O=this.getComponent(Animator).getClip(x);A&&(O.looping=!1,E&&this.endAnimTimer.addComponentOrReplace(new J(E,(function(){O.stop(),R.idleAnim&&(R.idleAnim.play(),R.lastPlayedAnim=R.idleAnim)})))),O.stop(),O.play(),this.lastPlayedAnim=O},o.prototype.changeIdleAnim=function(x,A){this.idleAnim.stop(),this.idleAnim=new AnimationState(x,{looping:!0}),this.getComponent(Animator).addClip(this.idleAnim),A&&(this.lastPlayedAnim.stop(),this.idleAnim.play(),this.lastPlayedAnim=this.idleAnim)},o.prototype.followPath=function(E){if(!this.hasComponent(Et)){if(!E)return;this.addComponent(new Et(E.path?E.path:[])),Ct.push(this)}this.faceUser&&(this.getComponent(A).active=!1);var R=this.getComponent(Et);if(E){if(E.path)if(E.curve){var O=Curve3.CreateCatmullRomSpline(E.path,4*E.path.length,!!E.loop).getPoints();E.loop&&O.pop(),R.path=O}else R.path=E.path;null!=E.loop&&(R.loop=E.loop),null!=E.startingPoint&&R.setIndex(E.startingPoint),E.onFinishCallback&&(R.onFinishCallback=E.onFinishCallback),E.onReachedPointCallback&&(R.onReachedPointCallback=E.onReachedPointCallback)}var V=this.getComponent(Transform).position;(0==R.fraction&&R.path[R.origin].subtract(V).lengthSquared()>.1||R.fraction>0&&V.subtract(R.path[R.origin]).normalize()==R.path[R.target].subtract(R.path[R.origin]).normalize())&&(R.path.splice(R.origin,0,this.getComponent(Transform).position),R.fraction=0),this.getComponent(Transform).lookAt(R.path[R.target]);for(var z=0,U=[],Q=0;Q<R.path.length-1;Q++){var W;z+=W=Vector3.Distance(R.path[Q],R.path[Q+1]),U.push(W)}for(R.loop&&(z+=W=Vector3.Distance(R.path[R.path.length-1],R.path[0]),U.push(W)),E&&E.totalDuration?R.totalDuration=E.totalDuration:E&&E.speed?R.totalDuration=z/E.speed:R.totalDuration||(R.totalDuration=z/this.walkingSpeed),R.speed=[],Q=0;Q<U.length;Q++)R.speed.push(1/(U[Q]/z*R.totalDuration));this.walkingAnim&&(this.endAnimTimer.hasComponent(J)&&this.endAnimTimer.removeComponent(J),this.idleAnim.stop(),this.lastPlayedAnim.stop(),this.walkingAnim.play(),this.lastPlayedAnim=this.walkingAnim),this.state=x.NPCState.FOLLOWPATH},o.prototype.stopWalking=function(A){var E=this;this.state=x.NPCState.STANDING,this.walkingAnim&&(this.walkingAnim.stop(),this.idleAnim.play(),this.lastPlayedAnim=this.idleAnim),A&&this.pauseWalkingTimer.addComponentOrReplace(new J(A,(function(){E.dialog&&E.dialog.isDialogOpen||(E.lastPlayedAnim.stop(),E.walkingAnim&&(E.walkingAnim.play(),E.lastPlayedAnim=E.walkingAnim),E.endAnimTimer.hasComponent(J)&&E.endAnimTimer.removeComponent(J),E.state=x.NPCState.FOLLOWPATH)})))},o}(Entity);x.CustomDialogButton=wt,x.DialogTypeInSystem=yt,x.DialogWindow=mt,x.NPC=Ot,x.NPCDelay=J,x.NPCLerpData=Et,x.NPCTriggerComponent=At,x.SFFont=Q,x.SFHeavyFont=W,x.TrackUserFlag=A,x.TriggerBoxShape=j,x.TriggerSphereShape=q,x.canvas=V,x.darkTheme=$,x.lightTheme=H,Object.defineProperty(x,"__esModule",{value:!0})}));var __awaiter=this&&this.__awaiter||function(x,A,E,R){return new(E||(E=Promise))((function(O,V){function fulfilled(x){try{step(R.next(x))}catch(x){V(x)}}function rejected(x){try{step(R.throw(x))}catch(x){V(x)}}function step(x){var A;x.done?O(x.value):(A=x.value,A instanceof E?A:new E((function(x){x(A)}))).then(fulfilled,rejected)}step((R=R.apply(x,A||[])).next())}))},__generator=this&&this.__generator||function(x,A){var E,R,O,V,z={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return V={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function verb(V){return function(U){return function(V){if(E)throw new TypeError("Generator is already executing.");for(;z;)try{if(E=1,R&&(O=2&V[0]?R.return:V[0]?R.throw||((O=R.return)&&O.call(R),0):R.next)&&!(O=O.call(R,V[1])).done)return O;switch(R=0,O&&(V=[2&V[0],O.value]),V[0]){case 0:case 1:O=V;break;case 4:return z.label++,{value:V[1],done:!1};case 5:z.label++,R=V[1],V=[0];continue;case 7:V=z.ops.pop(),z.trys.pop();continue;default:if(!((O=(O=z.trys).length>0&&O[O.length-1])||6!==V[0]&&2!==V[0])){z=0;continue}if(3===V[0]&&(!O||V[1]>O[0]&&V[1]<O[3])){z.label=V[1];break}if(6===V[0]&&z.label<O[1]){z.label=O[1],O=V;break}if(O&&z.label<O[2]){z.label=O[2],z.ops.push(V);break}O[2]&&z.ops.pop(),z.trys.pop();continue}V=A.call(x,z)}catch(x){V=[6,x],R=0}finally{E=O=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,U])}}},__decorate=this&&this.__decorate||function(x,A,E,R){var O,V=arguments.length,z=V<3?A:null===R?R=Object.getOwnPropertyDescriptor(A,E):R;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(x,A,E,R);else for(var U=x.length-1;U>=0;U--)(O=x[U])&&(z=(V<3?O(z):V>3?O(A,E,z):O(A,E))||z);return V>3&&z&&Object.defineProperty(A,E,z),z},__values=this&&this.__values||function(x){var A="function"==typeof Symbol&&Symbol.iterator,E=A&&x[A],R=0;if(E)return E.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&R>=x.length&&(x=void 0),{value:x&&x[R++],done:!x}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")},__extends=this&&this.__extends||function(){var extendStatics=function(x,A){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,A){x.__proto__=A}||function(x,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(x[E]=A[E])},extendStatics(x,A)};return function(x,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function __(){this.constructor=x}extendStatics(x,A),x.prototype=null===A?Object.create(A):(__.prototype=A.prototype,new __)}}();define("serverConnections/connection",["require","exports","colyseus.js","@decentraland/EnvironmentAPI","@decentraland/Identity"],(function(x,A,E,R,O){var V;function updateConnectionMessage(x,A){V.value=x,V.color=A}Object.defineProperty(A,"__esModule",{value:!0}),A.connect=void 0,A.connect=function(x,A){return void 0===A&&(A={}),__awaiter(this,void 0,void 0,(function(){var V,z,U,Q,W;return __generator(this,(function(H){switch(H.label){case 0:return[4,(0,R.isPreviewMode)()];case 1:return H.sent(),[4,(0,R.getCurrentRealm)()];case 2:return V=H.sent(),A.realm=null==V?void 0:V.displayName,z=A,[4,(0,O.getUserData)()];case 3:z.userData=H.sent(),log("userData:",A.userData),U=new E.Client("wss://noc8vp.us-east-vin.colyseus.net"),H.label=4;case 4:return H.trys.push([4,6,,7]),[4,U.joinOrCreate(x,A)];case 5:return function(x){x.onLeave((function(){return updateConnectionMessage("Connection lost",Color4.Red())}))}(Q=H.sent()),[2,Q];case 6:throw updateConnectionMessage("Error: "+(W=H.sent()).message,Color4.Red()),W;case 7:return[2]}}))}))}})),define("utils",["require","exports"],(function(x,A){Object.defineProperty(A,"__esModule",{value:!0}),A.randomDirection=A.isValidKey=A.randomInt=void 0,A.randomInt=function(x,A){return Math.round(Math.random()*(A-x))+x},A.isValidKey=function(x,A){return x in A},A.randomDirection=function(){return Math.random()<.5?-1:1}})),define("resourse",["require","exports","utils"],(function(x,A,E){Object.defineProperty(A,"__esModule",{value:!0});var R={Chinese_blade1:"sounds/random/sampling/Chinese_blade1.mp3",Chinese_blade2:"sounds/random/sampling/Chinese_blade2.mp3",attack1:"sounds/random/sampling/attack1.mp3",attack2:"sounds/random/sampling/attack2.mp3",attack3:"sounds/random/sampling/attack3.mp3",clenching_my_hand:"sounds/random/sampling/clenching_my_hand.mp3",cutting_with_a_katana1:"sounds/random/sampling/cutting_with_a_katana1.mp3",damage1:"sounds/random/sampling/damage1.mp3",damage2:"sounds/random/sampling/damage2.mp3",damage5:"sounds/random/sampling/damage5.mp3",damage6:"sounds/random/sampling/damage6.mp3",damage7:"sounds/random/sampling/damage7.mp3",extracting_a_knife:"sounds/random/sampling/extracting_a_knife.mp3",extracting_a_sword:"sounds/random/sampling/extracting_a_sword.mp3",flying_pan:"sounds/random/sampling/flying_pan.mp3",hitting1:"sounds/random/sampling/hitting1.mp3",holly_sword1:"sounds/random/sampling/holly_sword1.mp3",katana1:"sounds/random/sampling/katana1.mp3",kick1:"sounds/random/sampling/kick1.mp3",kick2:"sounds/random/sampling/kick2.mp3",knocking_a_wall:"sounds/random/sampling/knocking_a_wall.mp3",stabbing:"sounds/random/sampling/stabbing.mp3",striking:"sounds/random/sampling/striking.mp3",swing1:"sounds/random/sampling/swing1.mp3",swing2:"sounds/random/sampling/swing2.mp3",swing3:"sounds/random/sampling/swing3.mp3",swish1:"sounds/random/sampling/swish1.mp3",swish2:"sounds/random/sampling/swish2.mp3",sword_attack1:"sounds/random/sampling/sword_attack1.mp3",sword_attack2:"sounds/random/sampling/sword_attack2.mp3",new01:"sounds/random/new/new01.mp3",new02_1:"sounds/random/new/new02_1.mp3",new03:"sounds/random/new/new03.mp3",new04:"sounds/random/new/new04.mp3",new05_1:"sounds/random/new/new05_1.mp3",new06:"sounds/random/new/new06.mp3",new07_1:"sounds/random/new/new07_1.mp3",Japanese_drum1:"sounds/random/percussion/Japanese_drum1.mp3",Japanese_drum2:"sounds/random/percussion/Japanese_drum2.mp3",bass_drum:"sounds/random/percussion/bass_drum.mp3",drum1:"sounds/random/percussion/drum1.mp3",drum2:"sounds/random/percussion/drum2.mp3",small_drum1:"sounds/random/percussion/small_drum1.mp3",horror_piano_chord:"sounds/random/piano/horror_piano_chord.mp3",pianoA:"sounds/random/piano/pianoA.mp3",pianoB:"sounds/random/piano/pianoB.mp3",pianoC:"sounds/random/piano/pianoC.mp3",pianoC2:"sounds/random/piano/pianoC2.mp3",pianoD:"sounds/random/piano/pianoD.mp3",pianoE:"sounds/random/piano/pianoE.mp3",pianoF:"sounds/random/piano/pianoF.mp3",pianoG:"sounds/random/piano/pianoG.mp3"},O={};for(var V in R)(0,E.isValidKey)(V,R)&&(O[V]=new AudioClip(R[V]));A.default={randomSound:O,particles:{particles1:new GLTFShape("models/particles/monster1.glb"),particles2:new GLTFShape("models/particles/monster2.glb"),particles3:new GLTFShape("models/particles/monster3.glb")},bird:new GLTFShape("models/particles/star.glb")}})),define("serverConnections/birdParticles",["require","exports","@dcl/ecs-scene-utils","utils","resourse"],(function(x,A,E,R,O){Object.defineProperty(A,"__esModule",{value:!0}),A.SpawnBird=void 0;var V=new Vector3(.5,.5,.5),z=O.default.bird,U=(O.default.particles,function(x,A,E){void 0===E&&(E=10),this.birdCount=E,this.position=x,this.clip=A;for(var R=1;R<this.birdCount;)newBird(this.position,this.clip,R),R+=1});function newBird(x,A,O){var U=new Entity;if(1===O){var Q=new AudioSource(A);U.addComponent(Q),Q.playing=!0,Q.playOnce()}var W=new Vector3(x.x,x.y+1.2,x.z);U.addComponent(new Transform({position:W,scale:V})),U.addComponent(z);var H=new Vector3(x.x+8*Math.random()*(0,R.randomDirection)(),x.y+10*Math.random(),x.z+8*Math.random()*(0,R.randomDirection)());U.getComponent(Transform).lookAt(H),U.addComponent(new E.MoveTransformComponent(W,H,4,(function(){engine.removeEntity(U)}))),engine.addEntity(U)}A.SpawnBird=U})),define("serverConnections/gameplay",["require","exports","serverConnections/connection","serverConnections/birdParticles","@dcl/ecs-scene-utils","resourse","utils"],(function(x,A,E,R,O,V,z){Object.defineProperty(A,"__esModule",{value:!0});var U=V.default.randomSound;(0,E.connect)("my_room").then((function(x){var A=new Entity,E=x.sessionId;A.addComponent(new O.Interval(100,(function(){x.send("player-position",Camera.instance.feetPosition)}))),engine.addEntity(A);var V={},Z=[];function lightingControl(x,A){0==A?x.getComponent(GLTFShape).visible=!1:A>0&&A<=1?(x.getComponent(GLTFShape).visible=!0,0<A&&A<=.25?x.addComponentOrReplace(W):.25<A&&A<=.5?x.addComponentOrReplace(H):.5<A&&A<=.75?x.addComponentOrReplace($):.75<A&&A<=1&&x.addComponentOrReplace(Q)):A>1&&A<2?x.getComponent(Transform).position.y=10*(A-1.5)+23:A>2&&A<3?x.getComponent(Transform).rotation.setEuler(30+90*(A-2.5),-130,0):A>3&&A<4?x.getComponent(Transform).rotation.setEuler(30,50+90*(A-3.5)-180,0):10==A?x.addComponentOrReplace(Q):11==A?x.addComponentOrReplace(W):12==A?x.addComponentOrReplace(H):13==A&&x.addComponentOrReplace($)}Object.defineProperty(V,"positions",{get:function(){return Z},set:function(A){A&&A.length&&JSON.stringify(A)!==JSON.stringify(Z)&&A.map((function(A){var O=null,V=Object.keys(U),Q=V[(0,z.randomInt)(0,V.length-1)];(0,z.isValidKey)(Q,U)&&(O=U[Q]),function(A,O,V){if(log("Play particles animation!!!!"),A.sessionId===E){var U=Date.parse((new Date).toString())/1e3;x.send("record-timeline",{position:A,music:V,date:U})}var Q=(0,z.randomInt)(10,20);new R.SpawnBird(A,O,Q)}(A,O,Q)})),Z=A}}),x.state.players.onRemove=function(){},x.onMessage("PlayerPositionArray",(function(x){for(var A=[],E=x.length,R=0;R<E;R++)for(var O=[],z=[],U=[],Q=[],W=R+1;W<E;W++)O[W]=x[W].x-x[R].x,z[W]=x[W].y-x[R].y,U[W]=x[W].z-x[R].z,Q[W]=Math.sqrt(O[W]*O[W]+z[W]*z[W]+U[W]*U[W]),Q[W]<1&&Q[W]>.4&&A.push({x:x[W].x,y:x[W].y,z:x[W].z,sessionId:x[W].clientId});V.positions=A})),x.onLeave((function(x){log("onLeave, code =>",x)})),x.state.listen("fader1",(function(x){lightingControl(G,x)})),x.state.listen("fader2",(function(x){lightingControl(X,x)})),x.state.listen("fader3",(function(x){lightingControl(K,x)})),x.state.listen("fader4",(function(x){lightingControl(J,x)}))})).catch((function(x){error(x)}));var Q=new GLTFShape("models/beiwenquan/StageLightWhite.glb"),W=new GLTFShape("models/beiwenquan/StageLightBlue.glb"),H=new GLTFShape("models/beiwenquan/StageLightGreen.glb"),$=new GLTFShape("models/beiwenquan/StageLightRed.glb"),G=new Entity;G.addComponent(W),G.addComponent(new Transform({position:new Vector3(342,23,84),rotation:Quaternion.Euler(30,-130,0)})),engine.addEntity(G);var X=new Entity;X.addComponent(W),X.addComponent(new Transform({position:new Vector3(347,23,82),rotation:Quaternion.Euler(30,-130,0)})),engine.addEntity(X);var K=new Entity;K.addComponent(W),K.addComponent(new Transform({position:new Vector3(352,23,80),rotation:Quaternion.Euler(30,-130,0)})),engine.addEntity(K);var J=new Entity;J.addComponent(W),J.addComponent(new Transform({position:new Vector3(357,23,78),rotation:Quaternion.Euler(30,-130,0)})),engine.addEntity(J)})),define("beibei/beibei",["require","exports","@decentraland/RestrictedActions","@dcl/npc-scene-utils","@dcl/ecs-scene-utils"],(function(x,A,E,R,O){Object.defineProperty(A,"__esModule",{value:!0}),A.BeiBei=void 0,A.BeiBei=function(){var x=new Entity;engine.addEntity(x),x.addComponent(new GLTFShape("models/beibei/A1.glb")),x.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var A=new Entity;engine.addEntity(A),A.addComponent(new GLTFShape("models/beibei/D1.glb")),A.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var V=new Entity;engine.addEntity(V),V.addComponent(new GLTFShape("models/beibei/Z1.glb")),V.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var z=new Entity;z.addComponent(new GLTFShape("models/beibei/A2.glb")),z.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var U=new Entity;U.addComponent(new GLTFShape("models/beibei/Z2.glb")),U.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var Q=new Entity;Q.addComponent(new GLTFShape("models/beibei/Z3.glb")),Q.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var W=new Entity;W.addComponent(new GLTFShape("models/beibei/Car.glb")),W.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var H=new Entity;H.addComponent(new GLTFShape("models/beibei/ZP1.glb")),H.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var $=new Entity;engine.addEntity($),$.addComponent(new O.Delay(1e4,(function(){engine.addEntity(z)})));var G=new Entity;engine.addEntity(G),G.addComponent(new O.Delay(2e4,(function(){engine.addEntity(U)})));var X=new Entity;engine.addEntity(X),X.addComponent(new O.Delay(3e4,(function(){engine.addEntity(Q),engine.addEntity(W),engine.addEntity(H)})));var K=new VideoClip("https://tvhttps.jieguanart.com:8443/live/hello/index.m3u8"),J=new VideoTexture(K),Z=new BasicMaterial;Z.texture=J,J.playing=!0;var et=new Entity;et.addComponent(new PlaneShape),et.addComponent(new Transform({position:new Vector3(216.14,6.2737,88.247),scale:new Vector3(14.6,8.22,1),rotation:Quaternion.Euler(0,0,0)})),et.addComponent(Z),engine.addEntity(et);var nt=[{text:"Hi, I'm your tour guide Alice, I will show you the city of Beibei during the Republic of China."},{text:"What service do you need?",isQuestion:!0,buttons:[{label:"Teleport",goToDialog:2},{label:"Introduction",goToDialog:4},{label:"Nothing",goToDialog:3}]},{text:"Where do you want to go?",isQuestion:!0,buttons:[{label:"Starting point",goToDialog:5},{label:"Sky garden",goToDialog:6},{label:"Nothing",goToDialog:3}]},{text:"If you need help please contact me.",isEndOfDialog:!0},{text:"Beibei Beibei Beibei Beibei",isEndOfDialog:!0},{text:"There is an exhibition of rural construction here, welcome to visit.",isEndOfDialog:!0,triggeredByNext:function(){(0,E.movePlayerTo)(new Vector3(200,1,105))}},{text:"You can overlook this area from the sky garden.",isEndOfDialog:!0,triggeredByNext:function(){(0,E.movePlayerTo)(new Vector3(105,20,90))}}],ot=Camera.instance,it=function(){function FollowsPlayer(){}return __decorate([Component("FollowsPlayer")],FollowsPlayer)}(),rt=new R.NPC({position:new Vector3(200,1,210),rotation:Quaternion.Euler(0,0,0)},"models/beibei/alice.glb",(function(){rt.talk(nt,0)}),{portrait:{path:"images/alice.png",section:{sourceHeight:384,sourceWidth:384}},faceUser:!0,continueOnWalkAway:!0,onlyClickTrigger:!0});function distance(x,A){var E=x.x-A.x,R=x.z-A.z;return E*E+R*R}rt.addComponent(new it),engine.addEntity(rt);var st=new(function(){function PlayerFollowSystem(){this.group=engine.getComponentGroup(it)}return PlayerFollowSystem.prototype.update=function(x){var A,E;try{for(var R=__values(this.group.entities),O=R.next();!O.done;O=R.next()){var V=O.value.getComponent(Transform);if(distance(ot.feetPosition,V.position)>20){var z=ot.position.subtract(V.position);z=z.normalize().multiplyByFloats(9*x,9*x,9*x),V.position.addInPlace(z)}V.lookAt(ot.feetPosition)}}catch(x){A={error:x}}finally{try{O&&!O.done&&(E=R.return)&&E.call(R)}finally{if(A)throw A.error}}},PlayerFollowSystem}());engine.addSystem(st);var at=new AudioClip("sounds/BBW.mp3"),ut=new AudioSource(at);rt.addComponent(ut),ut.playing=!0,ut.loop=!0;var pt=new AudioClip("sounds/BBN.mp3"),lt=new AudioSource(pt);lt.playing=!0,lt.loop=!0;var ht=new AudioStream("https://dl.dropbox.com/s/pnyxb6lu2gqagk9/Tgupo.mp3");ht.playing=!0;var dt=new AudioStream("https://dl.dropbox.com/s/a8tiuesko9mmhxd/Terjie.mp3");dt.playing=!0;var ft=new AudioStream("https://dl.dropbox.com/s/3ywmmpu2izwdtf0/Tmeitan.mp3");ft.playing=!0;var gt=new AudioStream("https://dl.dropbox.com/s/afdtcp3ngh6ftkq/Tzhou.mp3");gt.playing=!0;var mt=new AudioStream("https://dl.dropbox.com/s/g4p4j3id55nixyt/yueliang.mp3");mt.playing=!0;var yt=new AudioStream("https://dl.dropbox.com/s/uryvmd7gkc1pmhl/guanghui.mp3");yt.playing=!0;var wt=new AudioStream("https://dl.dropbox.com/s/t0pmx5yp1u9ra3a/guoji.mp3");wt.playing=!0;var vt=new AudioStream("https://dl.dropbox.com/s/t0dkvowxzj7uw20/woheni.mp3");vt.playing=!0;var bt=new AudioStream("https://dl.dropbox.com/s/tjy2f58jlu3m63z/erjie.mp3");bt.playing=!0;var xt=new Entity,Tt=new BoxShape;Tt.visible=!1,xt.addComponent(Tt),xt.getComponent(BoxShape).withCollisions=!1,xt.addComponent(new Transform({position:new Vector3(216.08,9.2661,148.6)}));var At=new O.TriggerBoxShape(new Vector3(48,18.5,64));xt.addComponent(new O.TriggerComponent(At,{onCameraEnter:function(){rt.addComponentOrReplace(lt)},onCameraExit:function(){rt.addComponentOrReplace(ut),lt.playing=!0,ht.playing=!1,dt.playing=!1,ft.playing=!1,gt.playing=!1,mt.playing=!1,yt.playing=!1,wt.playing=!1,vt.playing=!1,bt.playing=!1}})),engine.addEntity(xt);var Et=new Entity;engine.addEntity(Et),Et.addComponent(new GLTFShape("models/beibei/CD.glb")),Et.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var Ct=new Entity;engine.addEntity(Ct),Ct.addComponent(new GLTFShape("models/beibei/CDHB.glb")),Ct.addComponent(new Transform({rotation:Quaternion.Euler(0,-90,0),position:new Vector3(216.08,.3,122.32)}));var St=new Entity;engine.addEntity(St),St.addComponent(new GLTFShape("models/beibei/CD1.glb")),St.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(214.35,1.5123,122.31)})),St.addComponent(new OnPointerDown((function(x){lt.playing=!1,ht.playing=!0,rt.addComponentOrReplace(ht)}),{hoverText:"Play"}));var _t=new Entity;engine.addEntity(_t),_t.addComponent(new GLTFShape("models/beibei/CD2.glb")),_t.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(214.72,1.5117,122.31)})),_t.addComponent(new OnPointerDown((function(x){lt.playing=!1,dt.playing=!0,rt.addComponentOrReplace(dt)}),{hoverText:"Play"}));var It=new Entity;engine.addEntity(It),It.addComponent(new GLTFShape("models/beibei/CD3.glb")),It.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(215.11,1.5117,122.31)})),It.addComponent(new OnPointerDown((function(x){lt.playing=!1,ft.playing=!0,rt.addComponentOrReplace(ft)}),{hoverText:"Play"}));var Rt=new Entity;engine.addEntity(Rt),Rt.addComponent(new GLTFShape("models/beibei/CD4.glb")),Rt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(215.52,1.5103,122.31)})),Rt.addComponent(new OnPointerDown((function(x){lt.playing=!1,gt.playing=!0,rt.addComponentOrReplace(gt)}),{hoverText:"Play"}));var Ot=new Entity;engine.addEntity(Ot),Ot.addComponent(new GLTFShape("models/beibei/CD5.glb")),Ot.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(216.64,1.5103,122.31)})),Ot.addComponent(new OnPointerDown((function(x){lt.playing=!1,mt.playing=!0,rt.addComponentOrReplace(mt)}),{hoverText:"Play"}));var Vt=new Entity;engine.addEntity(Vt),Vt.addComponent(new GLTFShape("models/beibei/CD6.glb")),Vt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(217.05,1.5117,122.31)})),Vt.addComponent(new OnPointerDown((function(x){lt.playing=!1,yt.playing=!0,rt.addComponentOrReplace(yt)}),{hoverText:"Play"}));var Pt=new Entity;engine.addEntity(Pt),Pt.addComponent(new GLTFShape("models/beibei/CD7.glb")),Pt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(217.44,1.5117,122.31)})),Pt.addComponent(new OnPointerDown((function(x){lt.playing=!1,wt.playing=!0,rt.addComponentOrReplace(wt)}),{hoverText:"Play"}));var kt=new Entity;engine.addEntity(kt),kt.addComponent(new GLTFShape("models/beibei/CD8.glb")),kt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(217.81,1.5123,122.31)})),kt.addComponent(new OnPointerDown((function(x){lt.playing=!1,vt.playing=!0,rt.addComponentOrReplace(vt)}),{hoverText:"Play"}));var Dt=new Entity;engine.addEntity(Dt),Dt.addComponent(new GLTFShape("models/beibei/CD9.glb")),Dt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(218.23,1.5117,122.31)})),Dt.addComponent(new OnPointerDown((function(x){lt.playing=!1,bt.playing=!0,rt.addComponentOrReplace(bt)}),{hoverText:"Play"}))}})),define("beiwenquan/exhibition",["require","exports","@dcl/ui-scene-utils"],(function(x,A,E){Object.defineProperty(A,"__esModule",{value:!0}),A.Exhibition=void 0;var R=function(x){function Exhibition(A,R,O){var V=x.call(this)||this;V.addComponent(new PlaneShape);var z=new Material;z.albedoTexture=A,z.transparencyMode=4,V.addComponent(z),V.addComponent(R);var U=new E.CenterImage(O,8,!0,0,0,1e3,300,{sourceHeight:1251,sourceWidth:4167,sourceLeft:0,sourceTop:0});return V.addComponent(new OnPointerDown((function(x){U.show()}),{button:ActionButton.POINTER,showFeedback:!1,hoverText:"Hold to view details, release to close."})),V.addComponent(new OnPointerUp((function(x){U.hide()}),{button:ActionButton.POINTER,showFeedback:!1,hoverText:"Hold to view details, release to close."})),Input.instance.subscribe("BUTTON_UP",ActionButton.POINTER,!1,(function(x){U.hide()})),V}return __extends(Exhibition,x),Exhibition}(Entity);A.Exhibition=R})),define("beiwenquan/exhibiton_image",["require","exports"],(function(x,A){Object.defineProperty(A,"__esModule",{value:!0}),A.exhibition_image_A10=A.exhibition_image_A9=A.exhibition_image_A6=A.exhibition_image_A4=A.exhibition_image_A3=A.exhibition_image_A2=A.exhibition_image_A1=void 0,A.exhibition_image_A1=["images/exhibition/A1/1A-1-1.jpg","images/exhibition/A1/1A-1-2.jpg","images/exhibition/A1/1A-3-1.jpg","images/exhibition/A1/1A-3-2.jpg","images/exhibition/A1/1A-3-3.jpg","images/exhibition/A1/1A-4-1.jpg","images/exhibition/A1/1A-4-2.jpg","images/exhibition/A1/1A-4-3.jpg","images/exhibition/A1/1A-4-4.jpg","images/exhibition/A1/1A-4-5.jpg","images/exhibition/A1/1A-5-1.jpg","images/exhibition/A1/1A-5-2.jpg","images/exhibition/A1/1A-5-3.jpg","images/exhibition/A1/1A-5-4.jpg","images/exhibition/A1/1A-5-5.jpg","images/exhibition/A1/1A-5-6.jpg","images/exhibition/A1/1A-5-7.jpg","images/exhibition/A1/1A-6-1.jpg","images/exhibition/A1/1A-6-2.jpg","images/exhibition/A1/1A-6-3.jpg","images/exhibition/A1/1A-6-4.jpg","images/exhibition/A1/1A-7-1.jpg","images/exhibition/A1/1A-7-2.jpg","images/exhibition/A1/1B-1-1.jpg","images/exhibition/A1/1B-1-2.jpg","images/exhibition/A1/1B-3-1.jpg","images/exhibition/A1/1B-3-2.jpg","images/exhibition/A1/1B-3-3.jpg","images/exhibition/A1/1B-4-1.jpg","images/exhibition/A1/1B-4-2.jpg","images/exhibition/A1/1B-4-3.jpg","images/exhibition/A1/1B-4-4.jpg","images/exhibition/A1/1B-4-5.jpg","images/exhibition/A1/1B-5-1.jpg","images/exhibition/A1/1B-5-2.jpg","images/exhibition/A1/1B-5-3.jpg","images/exhibition/A1/1B-5-4.jpg","images/exhibition/A1/1B-5-5.jpg","images/exhibition/A1/1B-5-6.jpg","images/exhibition/A1/1B-5-7.jpg","images/exhibition/A1/1B-6-1.jpg","images/exhibition/A1/1B-6-2.jpg","images/exhibition/A1/1B-6-3.jpg","images/exhibition/A1/1B-6-4.jpg","images/exhibition/A1/1B-7-1.jpg","images/exhibition/A1/1B-7-2.jpg","images/exhibition/A1/1C-1-1.jpg","images/exhibition/A1/1C-3-1.jpg","images/exhibition/A1/1C-4-1.jpg","images/exhibition/A1/1C-4-2.jpg","images/exhibition/A1/1C-4-3.jpg","images/exhibition/A1/1C-5-1.jpg","images/exhibition/A1/1C-5-2.jpg","images/exhibition/A1/1C-5-3.jpg","images/exhibition/A1/1C-5-4.jpg","images/exhibition/A1/1C-5-5.jpg","images/exhibition/A1/1C-5-6.jpg","images/exhibition/A1/1C-6-1.jpg","images/exhibition/A1/1C-6-2.jpg","images/exhibition/A1/1C-6-3.jpg","images/exhibition/A1/1C-7-1.jpg"],A.exhibition_image_A2=["images/exhibition/A2/2A-1-1.jpg","images/exhibition/A2/2A-3-1.jpg","images/exhibition/A2/2A-5-1.jpg","images/exhibition/A2/2A-6-1.jpg","images/exhibition/A2/2A-6-2.jpg","images/exhibition/A2/2A-8-1.jpg","images/exhibition/A2/2A-9-1.jpg","images/exhibition/A2/2A-9-2.jpg","images/exhibition/A2/2A-9-3.jpg","images/exhibition/A2/2A-9-4.jpg","images/exhibition/A2/2A-11-1.jpg","images/exhibition/A2/2A-13-1.jpg","images/exhibition/A2/2A-14-1.jpg","images/exhibition/A2/2A-14-2.jpg","images/exhibition/A2/2A-15-1.jpg","images/exhibition/A2/2A-17-1.jpg","images/exhibition/A2/2A-20-1.jpg","images/exhibition/A2/2A-22-1.jpg","images/exhibition/A2/2B-1-1.jpg","images/exhibition/A2/2B-3-1.jpg","images/exhibition/A2/2B-5-1.jpg","images/exhibition/A2/2B-6-1.jpg","images/exhibition/A2/2B-6-2.jpg","images/exhibition/A2/2B-8-1.jpg","images/exhibition/A2/2B-9-1.jpg","images/exhibition/A2/2B-9-2.jpg","images/exhibition/A2/2B-9-3.jpg","images/exhibition/A2/2B-9-4.jpg","images/exhibition/A2/2B-11-1.jpg","images/exhibition/A2/2B-13-1.jpg","images/exhibition/A2/2B-14-1.jpg","images/exhibition/A2/2B-14-2.jpg","images/exhibition/A2/2B-15-1.jpg","images/exhibition/A2/2B-17-1.jpg","images/exhibition/A2/2B-20-1.jpg","images/exhibition/A2/2B-22-1.jpg","images/exhibition/A2/2C-1-1.jpg","images/exhibition/A2/2C-3-1.jpg","images/exhibition/A2/2C-5-1.jpg","images/exhibition/A2/2C-6-1.jpg","images/exhibition/A2/2C-6-2.jpg","images/exhibition/A2/2C-8-1.jpg","images/exhibition/A2/2C-9-1.jpg","images/exhibition/A2/2C-9-2.jpg","images/exhibition/A2/2C-9-3.jpg","images/exhibition/A2/2C-9-4.jpg","images/exhibition/A2/2C-11-1.jpg","images/exhibition/A2/2C-13-1.jpg","images/exhibition/A2/2C-14-1.jpg","images/exhibition/A2/2C-14-2.jpg","images/exhibition/A2/2C-15-1.jpg","images/exhibition/A2/2C-17-1.jpg","images/exhibition/A2/2C-20-1.jpg","images/exhibition/A2/2C-22-1.jpg"],A.exhibition_image_A3=["images/exhibition/A3/3A-2-1.jpg","images/exhibition/A3/3A-3-1.jpg","images/exhibition/A3/3A-3-2.jpg","images/exhibition/A3/3A-5-1.jpg","images/exhibition/A3/3A-5-2.jpg","images/exhibition/A3/3A-5-4.jpg","images/exhibition/A3/3A-6-1.jpg","images/exhibition/A3/3A-6-2.jpg","images/exhibition/A3/3A-6-4.jpg","images/exhibition/A3/3A-8-1.jpg","images/exhibition/A3/3A-9-1.jpg","images/exhibition/A3/3A-9-2.jpg","images/exhibition/A3/3A-9-3.jpg","images/exhibition/A3/3A-9-4.jpg","images/exhibition/A3/3A-10-1.jpg"],A.exhibition_image_A4=["images/exhibition/A4/4A-1-1.jpg","images/exhibition/A4/4A-2-1.jpg","images/exhibition/A4/4A-3-1.jpg","images/exhibition/A4/4A-4-1.jpg","images/exhibition/A4/4A-7-1.jpg","images/exhibition/A4/4A-8-1.jpg","images/exhibition/A4/4A-8-2.jpg","images/exhibition/A4/4A-9-1.jpg","images/exhibition/A4/4A-10-1.jpg","images/exhibition/A4/4A-10-2.jpg"],A.exhibition_image_A6=["images/exhibition/A6/6A-1-1.jpg","images/exhibition/A6/6A-1-2.jpg","images/exhibition/A6/6A-1-3.jpg","images/exhibition/A6/6A-1-4.jpg","images/exhibition/A6/6A-3-1.jpg","images/exhibition/A6/6A-4-1.jpg","images/exhibition/A6/6A-4-2.jpg","images/exhibition/A6/6A-4-3.jpg","images/exhibition/A6/6A-4-4.jpg","images/exhibition/A6/6A-7-1.jpg","images/exhibition/A6/6A-7-2.jpg","images/exhibition/A6/6A-7-3.jpg","images/exhibition/A6/6A-10-1.jpg","images/exhibition/A6/6A-10-2.jpg","images/exhibition/A6/6A-10-3.jpg","images/exhibition/A6/6A-10-4.jpg","images/exhibition/A6/6B-1-1.jpg","images/exhibition/A6/6B-1-2.jpg","images/exhibition/A6/6B-1-3.jpg","images/exhibition/A6/6B-1-4.jpg","images/exhibition/A6/6B-3-1.jpg","images/exhibition/A6/6B-4-1.jpg","images/exhibition/A6/6B-4-2.jpg","images/exhibition/A6/6B-4-3.jpg","images/exhibition/A6/6B-4-4.jpg","images/exhibition/A6/6B-5-1.jpg","images/exhibition/A6/6B-7-1.jpg","images/exhibition/A6/6B-7-2.jpg","images/exhibition/A6/6B-7-3.jpg","images/exhibition/A6/6B-7-4.jpg","images/exhibition/A6/6B-9-1.jpg","images/exhibition/A6/6B-10-1.jpg","images/exhibition/A6/6B-10-2.jpg","images/exhibition/A6/6B-10-3.jpg","images/exhibition/A6/6B-10-4.jpg","images/exhibition/A6/6B-11-1.jpg","images/exhibition/A6/6C-1-1.jpg","images/exhibition/A6/6C-1-2.jpg","images/exhibition/A6/6C-1-3.jpg","images/exhibition/A6/6C-1-4.jpg","images/exhibition/A6/6C-4-1.jpg","images/exhibition/A6/6C-4-2.jpg","images/exhibition/A6/6C-4-3.jpg","images/exhibition/A6/6C-4-4.jpg","images/exhibition/A6/6C-7-1.jpg","images/exhibition/A6/6C-7-2.jpg","images/exhibition/A6/6C-7-3.jpg","images/exhibition/A6/6C-7-4.jpg","images/exhibition/A6/6C-10-1.jpg","images/exhibition/A6/6C-10-2.jpg","images/exhibition/A6/6C-10-3.jpg","images/exhibition/A6/6C-10-4.jpg"],A.exhibition_image_A9=[],A.exhibition_image_A10=["images/exhibition/A10/10A-1-1.jpg","images/exhibition/A10/10A-1-2.jpg","images/exhibition/A10/10A-2-1.jpg","images/exhibition/A10/10A-4-1.jpg","images/exhibition/A10/10A-6-1.jpg","images/exhibition/A10/10A-8-1.jpg"]})),define("beiwenquan/exhibition_texture",["require","exports"],(function(x,A){Object.defineProperty(A,"__esModule",{value:!0}),A.exhibition_texture_A10=A.exhibition_texture_A9=A.exhibition_texture_A6=A.exhibition_texture_A4=A.exhibition_texture_A3=A.exhibition_texture_A2=A.exhibition_texture_A1=void 0;var E=[new Texture("https://dl.dropbox.com/s/lwrp1pu9gsp5ph0/1A-1-1.png"),new Texture("https://dl.dropbox.com/s/pvqhnf3ju05w3fl/1A-1-2.png"),new Texture("https://dl.dropbox.com/s/yv665gvvsddnc6z/1A-3-1.png"),new Texture("https://dl.dropbox.com/s/ehoi5yqxgbjsn1q/1A-3-2.png"),new Texture("https://dl.dropbox.com/s/56ucagaecydjqb5/1A-3-3.png"),new Texture("https://dl.dropbox.com/s/i21sezg550dd7r5/1A-4-1.png"),new Texture("https://dl.dropbox.com/s/e9h5n3du41535tx/1A-4-2.png"),new Texture("https://dl.dropbox.com/s/k8e34exo3lves6c/1A-4-3.png"),new Texture("https://dl.dropbox.com/s/8q3g6xttix1uu6g/1A-4-4.png"),new Texture("https://dl.dropbox.com/s/9boi1ip3snm3sd5/1A-4-5.png"),new Texture("https://dl.dropbox.com/s/yc767kmp2bx47xt/1A-5-1.png"),new Texture("https://dl.dropbox.com/s/dnp0zip9bpts8cr/1A-5-2.png"),new Texture("https://dl.dropbox.com/s/z9cm4w8xy9v4a0k/1A-5-3.png"),new Texture("https://dl.dropbox.com/s/5kt4kwlfh2sav5v/1A-5-4.png"),new Texture("https://dl.dropbox.com/s/34xxfs3oepgfcbj/1A-5-5.png"),new Texture("https://dl.dropbox.com/s/hf1299ofiqxds8l/1A-5-6.png"),new Texture("https://dl.dropbox.com/s/03feob6isadia7d/1A-5-7.png"),new Texture("https://dl.dropbox.com/s/o3iu2svthnqbjid/1A-6-1.png"),new Texture("https://dl.dropbox.com/s/80o05s55o8h1h5o/1A-6-2.png"),new Texture("https://dl.dropbox.com/s/n234q5zzzfouflz/1A-6-3.png"),new Texture("https://dl.dropbox.com/s/j4qp15fi55yi7qt/1A-6-4.png"),new Texture("https://dl.dropbox.com/s/jhi0rzlovla19si/1A-7-1.png"),new Texture("https://dl.dropbox.com/s/qxf9zz4ykx033i3/1A-7-2.png"),new Texture("https://dl.dropbox.com/s/wpf4zjz8e3yee1c/1B-1-1.png"),new Texture("https://dl.dropbox.com/s/tl94zjmi7kmclmd/1B-1-2.png"),new Texture("https://dl.dropbox.com/s/d6nsirky0d6i8m2/1B-3-1.png"),new Texture("https://dl.dropbox.com/s/yw3l018higsag81/1B-3-2.png"),new Texture("https://dl.dropbox.com/s/od1bit5pemh18h4/1B-3-3.png"),new Texture("https://dl.dropbox.com/s/k82xtsfyiw8oov1/1B-4-1.png"),new Texture("https://dl.dropbox.com/s/z5lone7zedtzn7a/1B-4-2.png"),new Texture("https://dl.dropbox.com/s/cjw3etd40niu8n0/1B-4-3.png"),new Texture("https://dl.dropbox.com/s/olr7ph6bm0v562g/1B-4-4.png"),new Texture("https://dl.dropbox.com/s/7ionzg2e03mu5dv/1B-4-5.png"),new Texture("https://dl.dropbox.com/s/do82iyd8i84tvs4/1B-5-1.png"),new Texture("https://dl.dropbox.com/s/b47dj7t9vz2x70y/1B-5-2.png"),new Texture("https://dl.dropbox.com/s/kugk3s19ioo14vr/1B-5-3.png"),new Texture("https://dl.dropbox.com/s/0gbnri92j67gu62/1B-5-4.png"),new Texture("https://dl.dropbox.com/s/urv27pi3x920jik/1B-5-5.png"),new Texture("https://dl.dropbox.com/s/im5ztluuw6ocaig/1B-5-6.png"),new Texture("https://dl.dropbox.com/s/pt8d4eyleuvfywo/1B-5-7.png"),new Texture("https://dl.dropbox.com/s/gzv4ve230pkih7a/1B-6-1.png"),new Texture("https://dl.dropbox.com/s/tgy791u13utdvvc/1B-6-2.png"),new Texture("https://dl.dropbox.com/s/jmuaqrpdyldabdi/1B-6-3.png"),new Texture("https://dl.dropbox.com/s/kdrlgxf4qrofiqh/1B-6-4.png"),new Texture("https://dl.dropbox.com/s/j3zb9i1aywdrij7/1B-7-1.png"),new Texture("https://dl.dropbox.com/s/luhcghnb29x2mwh/1B-7-2.png"),new Texture("https://dl.dropbox.com/s/4iwq1l1bwols1so/1C-1-1.png"),new Texture("https://dl.dropbox.com/s/i7x4ga0zcnq5z5c/1C-3-1.png"),new Texture("https://dl.dropbox.com/s/jyafbas7nanxy3n/1C-4-1.png"),new Texture("https://dl.dropbox.com/s/8niupg7w9cowxms/1C-4-2.png"),new Texture("https://dl.dropbox.com/s/38fs4e4u7izaw9g/1C-4-3.png"),new Texture("https://dl.dropbox.com/s/onlb90q2obty35u/1C-5-1.png"),new Texture("https://dl.dropbox.com/s/6ddd3uae57r9hyh/1C-5-2.png"),new Texture("https://dl.dropbox.com/s/5shjodszddriznu/1C-5-3.png"),new Texture("https://dl.dropbox.com/s/mjzyctmdr589geo/1C-5-4.png"),new Texture("https://dl.dropbox.com/s/9bfeep8i7u3rgei/1C-5-5.png"),new Texture("https://dl.dropbox.com/s/vd7xtijxbc30z7p/1C-5-6.png"),new Texture("https://dl.dropbox.com/s/lq8fpexftdc2srj/1C-6-1.png"),new Texture("https://dl.dropbox.com/s/pnxeibis6n4jg5q/1C-6-2.png"),new Texture("https://dl.dropbox.com/s/ca27d34i1e2drb2/1C-6-3.png"),new Texture("https://dl.dropbox.com/s/mtb5iyasyuwx4cj/1C-7-1.png")];A.exhibition_texture_A1=E;var R=[new Texture("https://dl.dropbox.com/s/ob49gitonvgr8wy/2A-1-1.png"),new Texture("https://dl.dropbox.com/s/vdxtrcdwxaxunob/2A-3-1.png"),new Texture("https://dl.dropbox.com/s/dgemksse02lhrko/2A-5-1.png"),new Texture("https://dl.dropbox.com/s/5uq9k6sspj0j303/2A-6-1.png"),new Texture("https://dl.dropbox.com/s/tip1m4h2m1eanug/2A-6-2.png"),new Texture("https://dl.dropbox.com/s/1pccwc357lx40e0/2A-8-1.png"),new Texture("https://dl.dropbox.com/s/su3s8cmvvf6f26g/2A-9-1.png"),new Texture("https://dl.dropbox.com/s/v993z847ltn2ioz/2A-9-2.png"),new Texture("https://dl.dropbox.com/s/4zqv3qt0de9sy60/2A-9-3.png"),new Texture("https://dl.dropbox.com/s/9f91anr50j34i4r/2A-9-4.png"),new Texture("https://dl.dropbox.com/s/4rjgt7i05wqzakt/2A-11-1.png"),new Texture("https://dl.dropbox.com/s/gtkf7xk0uwbeb01/2A-13-1.png"),new Texture("https://dl.dropbox.com/s/a2ua8kcwqfk8cdx/2A-14-1.png"),new Texture("https://dl.dropbox.com/s/wkw3hl7286a9tn6/2A-14-2.png"),new Texture("https://dl.dropbox.com/s/mcxwt3i9hqbqksr/2A-15-1.png"),new Texture("https://dl.dropbox.com/s/g2ot4q7jeo7caze/2A-17-1.png"),new Texture("https://dl.dropbox.com/s/r3dnh8pv17av9w1/2A-20-1.png"),new Texture("https://dl.dropbox.com/s/jflx6tpzbvzlqo2/2A-22-1.png"),new Texture("https://dl.dropbox.com/s/ka0tmw4k2t7j1m7/2B-1-1.png"),new Texture("https://dl.dropbox.com/s/htkp147vipzed9l/2B-3-1.png"),new Texture("https://dl.dropbox.com/s/8jy93bzmd30basu/2B-5-1.png"),new Texture("https://dl.dropbox.com/s/8ckkoy24j07d8e8/2B-6-1.png"),new Texture("https://dl.dropbox.com/s/a2j89k3u5oufyxe/2B-6-2.png"),new Texture("https://dl.dropbox.com/s/r40bh9jbut62507/2B-8-1.png"),new Texture("https://dl.dropbox.com/s/a290emjyky6q8od/2B-9-1.png"),new Texture("https://dl.dropbox.com/s/rhduzvzlekkpi1k/2B-9-2.png"),new Texture("https://dl.dropbox.com/s/7ukl2wre7mqihn2/2B-9-3.png"),new Texture("https://dl.dropbox.com/s/1h305irc8up0p18/2B-9-4.png"),new Texture("https://dl.dropbox.com/s/oi947ayn334purh/2B-11-1.png"),new Texture("https://dl.dropbox.com/s/jo7c5b5q18mwk92/2B-13-1.png"),new Texture("https://dl.dropbox.com/s/lqap9wpacoencto/2B-14-1.png"),new Texture("https://dl.dropbox.com/s/3sv9eyaqjqxtpnf/2B-14-2.png"),new Texture("https://dl.dropbox.com/s/pfpgh7ib2s700ev/2B-15-1.png"),new Texture("https://dl.dropbox.com/s/slz6fwgxe5k5r9b/2B-17-1.png"),new Texture("https://dl.dropbox.com/s/o09uqyxglum35pq/2B-20-1.png"),new Texture("https://dl.dropbox.com/s/tjzgxarulj86211/2B-22-1.png"),new Texture("https://dl.dropbox.com/s/3zsdsj8qb4wsctg/2C-1-1.png"),new Texture("https://dl.dropbox.com/s/ipjf6mdabrkvnze/2C-3-1.png"),new Texture("https://dl.dropbox.com/s/y476efxlxp1xu5y/2C-5-1.png"),new Texture("https://dl.dropbox.com/s/gp7zn8wt0xqasdo/2C-6-1.png"),new Texture("https://dl.dropbox.com/s/2x8wn2l48ikzxna/2C-6-2.png"),new Texture("https://dl.dropbox.com/s/gtgzs1ukk0b7pfp/2C-8-1.png"),new Texture("https://dl.dropbox.com/s/bb2n6beumr2db8s/2C-9-1.png"),new Texture("https://dl.dropbox.com/s/qk7xkilzu9p1x7v/2C-9-2.png"),new Texture("https://dl.dropbox.com/s/g7jovhl32nk1734/2C-9-3.png"),new Texture("https://dl.dropbox.com/s/f8ca0k6225jt1yy/2C-9-4.png"),new Texture("https://dl.dropbox.com/s/u91wpm0i6l0cpmi/2C-11-1.png"),new Texture("https://dl.dropbox.com/s/0mmivab6gxxtdjd/2C-13-1.png"),new Texture("https://dl.dropbox.com/s/o2lecyttpv1706l/2C-14-1.png"),new Texture("https://dl.dropbox.com/s/z8pmogd5i6n2i8a/2C-14-2.png"),new Texture("https://dl.dropbox.com/s/b1odyy0llrenyua/2C-15-1.png"),new Texture("https://dl.dropbox.com/s/5y8k26bh94oqjdt/2C-17-1.png"),new Texture("https://dl.dropbox.com/s/agx1yx2jbiigybx/2C-20-1.png"),new Texture("https://dl.dropbox.com/s/cqgtgllmurmmlmr/2C-22-1.png")];A.exhibition_texture_A2=R;var O=[new Texture("https://dl.dropbox.com/s/dww6chkdr41oqv8/3A-2-1.png"),new Texture("https://dl.dropbox.com/s/mjxu9vobd467z3o/3A-3-1.png"),new Texture("https://dl.dropbox.com/s/9c39vlwiapo69z8/3A-3-2.png"),new Texture("https://dl.dropbox.com/s/nph5xxap3svf4nr/3A-5-1.png"),new Texture("https://dl.dropbox.com/s/oft8md08m0mxdil/3A-5-2.png"),new Texture("https://dl.dropbox.com/s/tpbwc1mabz4vh0c/3A-5-4.png"),new Texture("https://dl.dropbox.com/s/4jdjfrvxmopr4c7/3A-6-1.png"),new Texture("https://dl.dropbox.com/s/p625bb6wl0e15ee/3A-6-2.png"),new Texture("https://dl.dropbox.com/s/ljefx04x48j33h2/3A-6-4.png"),new Texture("https://dl.dropbox.com/s/b3z57bs96yne3fv/3A-8-1.png"),new Texture("https://dl.dropbox.com/s/vppn4qut2vbo6vb/3A-9-1.png"),new Texture("https://dl.dropbox.com/s/tv5shidwpdyy09y/3A-9-2.png"),new Texture("https://dl.dropbox.com/s/2q0ug1u5bry52ru/3A-9-3.png"),new Texture("https://dl.dropbox.com/s/vsxzxjpc7aik0g0/3A-9-4.png"),new Texture("https://dl.dropbox.com/s/r4529eehl6xh078/3A-10-1.png")];A.exhibition_texture_A3=O;var V=[new Texture("https://dl.dropbox.com/s/lhsfnjkb8ovem4e/4A-1-1.png"),new Texture("https://dl.dropbox.com/s/hfxwezvj16w3xm0/4A-2-1.png"),new Texture("https://dl.dropbox.com/s/boqv7x8f3ddd78y/4A-3-1.png"),new Texture("https://dl.dropbox.com/s/7hrq0rvmgovoxgn/4A-4-1.png"),new Texture("https://dl.dropbox.com/s/gwy6i11vi6m81ap/4A-7-1.png"),new Texture("https://dl.dropbox.com/s/q2kyw68r6niou7c/4A-8-1.png"),new Texture("https://dl.dropbox.com/s/ky775rxsfr039rm/4A-8-2.png"),new Texture("https://dl.dropbox.com/s/nsp8vlli61vq02z/4A-9-1.png"),new Texture("https://dl.dropbox.com/s/1o4tc0krga1lr3i/4A-10-1.png"),new Texture("https://dl.dropbox.com/s/4fzn4gn8xfgfctp/4A-10-2.png")];A.exhibition_texture_A4=V;var z=[new Texture("https://dl.dropbox.com/s/kxuit3i1exdroaz/6A-1-1.png"),new Texture("https://dl.dropbox.com/s/sj1438ctsihzceu/6A-1-2.png"),new Texture("https://dl.dropbox.com/s/dbcoczdv4554bfn/6A-1-3.png"),new Texture("https://dl.dropbox.com/s/y0or5z0gg3ueutb/6A-1-4.png"),new Texture("https://dl.dropbox.com/s/jy7hkaf5g65lgt8/6A-3-1.png"),new Texture("https://dl.dropbox.com/s/7t550liexvy8x65/6A-4-1.png"),new Texture("https://dl.dropbox.com/s/hdr86e31acypubv/6A-4-2.png"),new Texture("https://dl.dropbox.com/s/hzsjx25tgb220kc/6A-4-3.png"),new Texture("https://dl.dropbox.com/s/jq7fk61bgexo3od/6A-4-4.png"),new Texture("https://dl.dropbox.com/s/tijesgbcybyytph/6A-7-1.png"),new Texture("https://dl.dropbox.com/s/wml0d5sl1e1l8ja/6A-7-2.png"),new Texture("https://dl.dropbox.com/s/7c2wqoo3d4grlmq/6A-7-3.png"),new Texture("https://dl.dropbox.com/s/wmf30iogzli6816/6A-10-1.png"),new Texture("https://dl.dropbox.com/s/9prm9b8yqdw5lld/6A-10-2.png"),new Texture("https://dl.dropbox.com/s/eokeknnadv856wl/6A-10-3.png"),new Texture("https://dl.dropbox.com/s/iv8cepayism9hzd/6A-10-4.png"),new Texture("https://dl.dropbox.com/s/fk388jshrdpufth/6B-1-1.png"),new Texture("https://dl.dropbox.com/s/zgx7tojur101v6z/6B-1-2.png"),new Texture("https://dl.dropbox.com/s/xd288mg0s8rad7d/6B-1-3.png"),new Texture("https://dl.dropbox.com/s/gzj5pktbzcmorcb/6B-1-4.png"),new Texture("https://dl.dropbox.com/s/r5zxz6w7ef10dai/6B-3-1.png"),new Texture("https://dl.dropbox.com/s/4qns4wdq15ognrn/6B-4-1.png"),new Texture("https://dl.dropbox.com/s/3hwdkireatmo90v/6B-4-2.png"),new Texture("https://dl.dropbox.com/s/a71o4cy7q9qhe9n/6B-4-3.png"),new Texture("https://dl.dropbox.com/s/otwbuau1p8i8ujv/6B-4-4.png"),new Texture("https://dl.dropbox.com/s/tla659vb82gxdew/6B-5-1.png"),new Texture("https://dl.dropbox.com/s/4t8n3kur479wydr/6B-7-1.png"),new Texture("https://dl.dropbox.com/s/px9wbppmxiuhint/6B-7-2.png"),new Texture("https://dl.dropbox.com/s/mi6wrks03t4p30a/6B-7-3.png"),new Texture("https://dl.dropbox.com/s/jvtvmioj5fr120z/6B-7-4.png"),new Texture("https://dl.dropbox.com/s/zb4tmqhlzqve4pu/6B-9-1.png"),new Texture("https://dl.dropbox.com/s/q8mn5rorgzuvfhk/6B-10-1.png"),new Texture("https://dl.dropbox.com/s/mlhi1iesjxy8xeq/6B-10-2.png"),new Texture("https://dl.dropbox.com/s/jnxzpnkf82yurh9/6B-10-3.png"),new Texture("https://dl.dropbox.com/s/wn8wmsdb9onf2b6/6B-10-4.png"),new Texture("https://dl.dropbox.com/s/aj97phge2d212m2/6B-11-1.png"),new Texture("https://dl.dropbox.com/s/ru3hv2czku1nl80/6C-1-1.png"),new Texture("https://dl.dropbox.com/s/omjdl6ywgp07zgq/6C-1-2.png"),new Texture("https://dl.dropbox.com/s/fiwrds3p1z6jebu/6C-1-3.png"),new Texture("https://dl.dropbox.com/s/cymqrzjvcpaseab/6C-1-4.png"),new Texture("https://dl.dropbox.com/s/7dqfwpr4nw8sja4/6C-4-1.png"),new Texture("https://dl.dropbox.com/s/bwow8mrwp3u31g5/6C-4-2.png"),new Texture("https://dl.dropbox.com/s/aj5ddjfjfpwv7rv/6C-4-3.png"),new Texture("https://dl.dropbox.com/s/ytuelhmi5oubggy/6C-4-4.png"),new Texture("https://dl.dropbox.com/s/lyovjjzama05cmj/6C-7-1.png"),new Texture("https://dl.dropbox.com/s/3w73swme0nljiql/6C-7-2.png"),new Texture("https://dl.dropbox.com/s/wt3t0isgrk3hxf2/6C-7-3.png"),new Texture("https://dl.dropbox.com/s/ki9wl3pfpmxyopl/6C-7-4.png"),new Texture("https://dl.dropbox.com/s/dck2874ur9k9jpe/6C-10-1.png"),new Texture("https://dl.dropbox.com/s/nsvzn47cgd4mlij/6C-10-2.png"),new Texture("https://dl.dropbox.com/s/bdvf1o8zymu9hg2/6C-10-3.png"),new Texture("https://dl.dropbox.com/s/1zv7li0uiu5amt0/6C-10-4.png")];A.exhibition_texture_A6=z;var U=[new Texture("https://dl.dropbox.com/s/s7dd9qordx0sfv4/9A-2-1.png"),new Texture("https://dl.dropbox.com/s/nklhqboxrr61ock/9A-2-2.png"),new Texture("https://dl.dropbox.com/s/n2glbg7xwfwquup/9A-2-3.png"),new Texture("https://dl.dropbox.com/s/nyyjmi0mgrgojs5/9A-3-1.png"),new Texture("https://dl.dropbox.com/s/qrxyfpar59yrzjs/9A-3-2.png"),new Texture("https://dl.dropbox.com/s/od1ruc2a82nkf40/9A-3-3.png"),new Texture("https://dl.dropbox.com/s/9ah28w3ifa2d4su/9A-4-1.png"),new Texture("https://dl.dropbox.com/s/dxu9x8msj85468a/9A-4-2.png"),new Texture("https://dl.dropbox.com/s/aj9ubiql5k0uayv/9A-4-3.png"),new Texture("https://dl.dropbox.com/s/6xv1m4su12spu75/9A-4-4.png"),new Texture("https://dl.dropbox.com/s/wcsng4iy763e5wr/9A-5-1.png"),new Texture("https://dl.dropbox.com/s/7xeycq900a1a57g/9A-5-2.png"),new Texture("https://dl.dropbox.com/s/n4kmxyxsa0a4py1/9A-5-3.png"),new Texture("https://dl.dropbox.com/s/xflvoh19tgybzss/9A-6-1.png"),new Texture("https://dl.dropbox.com/s/73xs5wx8kvdont8/9A-6-2.png"),new Texture("https://dl.dropbox.com/s/7337qj90qo4tkvu/9A-6-3.png"),new Texture("https://dl.dropbox.com/s/2jjah8is1tb3b2t/9A-6-4.png"),new Texture("https://dl.dropbox.com/s/a13nbpba9hzliub/9A-8-1.png"),new Texture("https://dl.dropbox.com/s/qrp27ab5yom013h/9A-8-2.png"),new Texture("https://dl.dropbox.com/s/ygi4dfcnbuhf7rk/9A-8-3.png"),new Texture("https://dl.dropbox.com/s/x5pbg66mmrd6a3o/9A-9-1.png"),new Texture("https://dl.dropbox.com/s/ogwqtv3oq7f2g2z/9A-9-2.png"),new Texture("https://dl.dropbox.com/s/158b8esmhru3alp/9A-9-3.png"),new Texture("https://dl.dropbox.com/s/i7yzjzgyvldb2yg/9A-10-1.png"),new Texture("https://dl.dropbox.com/s/w8x4o20f0s43lyi/9A-10-2.png"),new Texture("https://dl.dropbox.com/s/dohg9rhcetey26s/9A-10-3.png"),new Texture("https://dl.dropbox.com/s/cz0p2fbw9jvi8w1/9A-11-1.png"),new Texture("https://dl.dropbox.com/s/kol2plqq1f1ri0d/9A-11-2.png"),new Texture("https://dl.dropbox.com/s/zgwv7rxeb5uv22v/9A-11-3.png"),new Texture("https://dl.dropbox.com/s/sbuz60uf4l4hx42/9A-12-1.png"),new Texture("https://dl.dropbox.com/s/51b91stmgtscsx0/9A-12-2.png"),new Texture("https://dl.dropbox.com/s/vn2kte6b1t64l95/9A-12-3.png"),new Texture("https://dl.dropbox.com/s/ta4g4sfpvi4dne9/9A-12-4.png"),new Texture("https://dl.dropbox.com/s/wglzmqi0l106w74/9B-2-1.png"),new Texture("https://dl.dropbox.com/s/9mlwa9uejgzrqza/9B-3-1.png"),new Texture("https://dl.dropbox.com/s/mr27m8dvqcjt4b8/9B-3-2.png"),new Texture("https://dl.dropbox.com/s/xjpkixoi1igqr96/9B-4-1.png"),new Texture("https://dl.dropbox.com/s/qfyduy8gt5s3riu/9B-5-1.png"),new Texture("https://dl.dropbox.com/s/ywbzzk4qaifcxs1/9B-6-1.png"),new Texture("https://dl.dropbox.com/s/ubcv9vlnkkntp6s/9B-7-1.png"),new Texture("https://dl.dropbox.com/s/d69dhu41uasvzcq/9B-7-2.png"),new Texture("https://dl.dropbox.com/s/iizq9lbx9l9qgdg/9B-7-3.png"),new Texture("https://dl.dropbox.com/s/l18pbkogmk5iv2t/9B-8-1.png"),new Texture("https://dl.dropbox.com/s/zvmhcafl8kz5nf7/9B-8-2.png"),new Texture("https://dl.dropbox.com/s/s886ci849u544o3/9B-8-3.png"),new Texture("https://dl.dropbox.com/s/0htxa0vnmny47y7/9B-10-1.png"),new Texture("https://dl.dropbox.com/s/0s27vuv3wf1ujd5/9B-10-2.png"),new Texture("https://dl.dropbox.com/s/90a4xla39svm0c3/9B-11-1.png"),new Texture("https://dl.dropbox.com/s/9ax7909nox4egbt/9B-11-2.png"),new Texture("https://dl.dropbox.com/s/qoytogtxkieu054/9B-11-3.png"),new Texture("https://dl.dropbox.com/s/xxkuawwxexdik3t/9B-12-1.png"),new Texture("https://dl.dropbox.com/s/ix5qapr0l63rkpd/9B-13-1.png"),new Texture("https://dl.dropbox.com/s/hqrcs5kaytcge1s/9B-14-1.png"),new Texture("https://dl.dropbox.com/s/5i0c2x0f2qu023p/9B-15-1.png"),new Texture("https://dl.dropbox.com/s/aka56fssg72s8iy/9B-15-2.png"),new Texture("https://dl.dropbox.com/s/3yowuqx11oilhig/9B-16-1.png"),new Texture("https://dl.dropbox.com/s/n4lsmwj8j9tfrsc/9B-16-2.png"),new Texture("https://dl.dropbox.com/s/3648wktzxlbkq5m/9B-16-3.png"),new Texture("https://dl.dropbox.com/s/e4uy7futifpecwm/9C-2-1.png"),new Texture("https://dl.dropbox.com/s/02l7933rhr2pcbq/9C-4-1.png"),new Texture("https://dl.dropbox.com/s/zmhr5xr4nwj9pmw/9C-6-1.png"),new Texture("https://dl.dropbox.com/s/wdnwd293ir504so/9C-8-1.png"),new Texture("https://dl.dropbox.com/s/fcyodlif82vip47/9C-10-1.png"),new Texture("https://dl.dropbox.com/s/iohg1hh927qa6ql/9C-12-1.png"),new Texture("https://dl.dropbox.com/s/a5sp0l5uq97o265/9C-14-1.png"),new Texture("https://dl.dropbox.com/s/hdb8wzycj7bz63b/9C-16-1.png"),new Texture("https://dl.dropbox.com/s/r9nrwrxa7ycaj5z/9C-18-1.png"),new Texture("https://dl.dropbox.com/s/duurhern4l33xil/9C-20-1.png"),new Texture("https://dl.dropbox.com/s/zvresdftji70pvl/9D-2-1.png"),new Texture("https://dl.dropbox.com/s/te1irah7crxidds/9D-3-1.png"),new Texture("https://dl.dropbox.com/s/odw16j2fxdgj18m/9D-4-1.png"),new Texture("https://dl.dropbox.com/s/x1hyi8aloug5ccy/9D-4-2.png"),new Texture("https://dl.dropbox.com/s/dp9bt8xb4g0c7nh/9D-4-3.png"),new Texture("https://dl.dropbox.com/s/sl1yea0p57pu930/9D-5-1.png"),new Texture("https://dl.dropbox.com/s/aq2ua0mt68i4lzz/9D-6-1.png"),new Texture("https://dl.dropbox.com/s/ngmx2mncy5mhw0n/9D-8-1.png"),new Texture("https://dl.dropbox.com/s/en9xfs9jrw9lzu7/9D-9-1.png"),new Texture("https://dl.dropbox.com/s/mtvha9cch2l1xjo/9D-10-2.png"),new Texture("https://dl.dropbox.com/s/5szq65ne4atsiwg/9D-10-3.png"),new Texture("https://dl.dropbox.com/s/wlnaihgtki69s3i/9D-10-4.png"),new Texture("https://dl.dropbox.com/s/8awrwnmu8m73st5/9D-11-1.png"),new Texture("https://dl.dropbox.com/s/s930hzwlpp2w60u/9D-12-1.png"),new Texture("https://dl.dropbox.com/s/jo6cbf5qy8q9gu8/9E-2-1.png"),new Texture("https://dl.dropbox.com/s/svmvxg8q0ccd2w9/9E-3-1.png"),new Texture("https://dl.dropbox.com/s/ysaap9o3sl0xkmy/9E-4-1.png"),new Texture("https://dl.dropbox.com/s/lyqc1xp4wq93s40/9E-4-2.png"),new Texture("https://dl.dropbox.com/s/p2etomgb1axg9bv/9E-4-3.png"),new Texture("https://dl.dropbox.com/s/lkiy4oy5yq9ddvq/9E-4-4.png"),new Texture("https://dl.dropbox.com/s/07apfwo1ma9jbk2/9E-4-5.png"),new Texture("https://dl.dropbox.com/s/q52hxqa8wim84w5/9E-5-1.png"),new Texture("https://dl.dropbox.com/s/7y7lfww6wnu63m7/9E-6-1.png"),new Texture("https://dl.dropbox.com/s/9e40rk6b95vzicp/9E-8-1.png"),new Texture("https://dl.dropbox.com/s/hblvytvyvz0jn0x/9E-9-1.png"),new Texture("https://dl.dropbox.com/s/9sok2o4oq3ne9xj/9E-10-1.png"),new Texture("https://dl.dropbox.com/s/8qaqlqf9yprq2cc/9E-10-2.png"),new Texture("https://dl.dropbox.com/s/1bva9c2yy7v508h/9E-10-3.png"),new Texture("https://dl.dropbox.com/s/x6aj1qzoxbjygf6/9E-10-4.png"),new Texture("https://dl.dropbox.com/s/5qvkbsiqr6ecgnr/9E-10-5.png"),new Texture("https://dl.dropbox.com/s/97zl6pn05jox9jx/9E-11-1.png"),new Texture("https://dl.dropbox.com/s/lcfjj33ox95qysg/9E-12-1.png"),new Texture("https://dl.dropbox.com/s/vtant9jt94teh08/9F-2-1.png"),new Texture("https://dl.dropbox.com/s/bc25zgxvytikhdi/9F-2-2.png"),new Texture("https://dl.dropbox.com/s/6bb8twyaggkyl4w/9F-3-1.png"),new Texture("https://dl.dropbox.com/s/1t6h1ghm3fuc7fg/9F-3-2.png"),new Texture("https://dl.dropbox.com/s/wls7xjwzcrxka6x/9F-4-1.png"),new Texture("https://dl.dropbox.com/s/2mz2darpdbwklq8/9F-5-1.png"),new Texture("https://dl.dropbox.com/s/3gk9r2dmulgi7xf/9F-6-1.png"),new Texture("https://dl.dropbox.com/s/tj5n2bi64e1t670/9F-7-1.png"),new Texture("https://dl.dropbox.com/s/2pmfzm00jo2m6ux/9F-8-1.png"),new Texture("https://dl.dropbox.com/s/9ds1n9evrk3x0h9/9F-10-1.png"),new Texture("https://dl.dropbox.com/s/y8z0rqozi1607de/9F-11-1.png"),new Texture("https://dl.dropbox.com/s/bnfeygxxf6rl9xx/9F-12-1.png"),new Texture("https://dl.dropbox.com/s/ebe9f4wxmfo1neo/9F-13-1.png"),new Texture("https://dl.dropbox.com/s/k0teiaxsevf0mp1/9F-14-1.png"),new Texture("https://dl.dropbox.com/s/o0cy22cc90xt492/9F-15-1.png"),new Texture("https://dl.dropbox.com/s/f8hhg2omzzjh8nf/9F-16-1.png"),new Texture("https://dl.dropbox.com/s/r5v7v4skab5k0k3/9G-2-1 .png"),new Texture("https://dl.dropbox.com/s/x45lco4ax3m2r8w/9G-3-1.png"),new Texture("https://dl.dropbox.com/s/8d1tsldw8ca3sc5/9G-5-1.png"),new Texture("https://dl.dropbox.com/s/1sr9hfzu3g4p11z/9G-7-1.png"),new Texture("https://dl.dropbox.com/s/vxvq7pla6b1wom0/9G-8-1.png"),new Texture("https://dl.dropbox.com/s/08hocwjko5mvv5c/9G-10-1.png"),new Texture("https://dl.dropbox.com/s/7pyt5al02s9gm94/9G-11-1.png"),new Texture("https://dl.dropbox.com/s/0egcok1ea2n5nbe/9G-13-1.png"),new Texture("https://dl.dropbox.com/s/wf6zpgnvzevwuiv/9G-15-1.png"),new Texture("https://dl.dropbox.com/s/jn54xqdziae3jzs/9G-16-1.png"),new Texture("https://dl.dropbox.com/s/4udygpbxnw6b4kq/9G-16-2.png"),new Texture("https://dl.dropbox.com/s/5ub6wuuws0jcehl/9H-2-1.png"),new Texture("https://dl.dropbox.com/s/wgbvpjtym4lziev/9H-2-2.png"),new Texture("https://dl.dropbox.com/s/yuvf7a0xw6vwis5/9H-2-3.png"),new Texture("https://dl.dropbox.com/s/w546p04qqcpvytn/9H-3-1.png"),new Texture("https://dl.dropbox.com/s/x0twy7hmvhhcot2/9H-3-2.png"),new Texture("https://dl.dropbox.com/s/wk2cu368xexldlq/9H-4-1.png"),new Texture("https://dl.dropbox.com/s/vxd8ho86qz691g1/9H-4-2.png"),new Texture("https://dl.dropbox.com/s/nljyg4qjxvugg3j/9H-4-3.png"),new Texture("https://dl.dropbox.com/s/sudfipmjsqypo10/9H-5-1.png"),new Texture("https://dl.dropbox.com/s/idvoh5vpoh2qm06/9H-5-2.png"),new Texture("https://dl.dropbox.com/s/mpc4ymgdtnze3r2/9H-5-3.png"),new Texture("https://dl.dropbox.com/s/1vvsus5zqea5vii/9H-5-4.png"),new Texture("https://dl.dropbox.com/s/zwze4ola9a30rh2/9H-5-5.png"),new Texture("https://dl.dropbox.com/s/afua4d3rmn3xxcz/9H-5-6.png"),new Texture("https://dl.dropbox.com/s/12snzuxrteqkq9n/9H-5-7.png"),new Texture("https://dl.dropbox.com/s/orxxb82pyvz8gxn/9H-5-8.png"),new Texture("https://dl.dropbox.com/s/v707pxaa19qgoob/9H-5-9.png"),new Texture("https://dl.dropbox.com/s/qitlj1vxh9db1tq/9H-5-10.png"),new Texture("https://dl.dropbox.com/s/wy6etnqn1tft382/9H-5-11.png"),new Texture("https://dl.dropbox.com/s/8jirpc6eo7av64c/9H-5-12.png"),new Texture("https://dl.dropbox.com/s/x4tspfxm9y40x0o/9H-6-1.png"),new Texture("https://dl.dropbox.com/s/bxsqhnoir3h8wg3/9H-6-2.png"),new Texture("https://dl.dropbox.com/s/stmetlp142wcfja/9H-6-3.png"),new Texture("https://dl.dropbox.com/s/4ieeqdarpedabe2/9H-7-1.png"),new Texture("https://dl.dropbox.com/s/ex8pjb6sn60fr6g/9H-7-2.png"),new Texture("https://dl.dropbox.com/s/3jf7xk1vge4vpf6/9H-7-3.png"),new Texture("https://dl.dropbox.com/s/f3l6gzivsujxejs/9H-8-1.png"),new Texture("https://dl.dropbox.com/s/m47wublue7s0h5u/9H-8-2.png")];A.exhibition_texture_A9=U;var Q=[new Texture("https://dl.dropbox.com/s/zpl4yx9m5yr73rm/10A-1-1.png"),new Texture("https://dl.dropbox.com/s/v430juifx70vtkc/10A-1-2.png"),new Texture("https://dl.dropbox.com/s/3yyv8jdyo2baz47/10A-2-1.png"),new Texture("https://dl.dropbox.com/s/bq3h84wz2ynirfl/10A-4-1.png"),new Texture("https://dl.dropbox.com/s/9iy58t1y90h2fcj/10A-6-1.png"),new Texture("https://dl.dropbox.com/s/xhhjs3h9itp0920/10A-8-1.png")];A.exhibition_texture_A10=Q})),define("beiwenquan/exhibition_transform",["require","exports"],(function(x,A){Object.defineProperty(A,"__esModule",{value:!0}),A.exhibition_transform_A10=A.exhibition_transform_A9=A.exhibition_transform_A6=A.exhibition_transform_A4=A.exhibition_transform_A3=A.exhibition_transform_A2=A.exhibition_transform_A1=void 0;var E=[new Transform({position:new Vector3(3,1,5),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(6,1,7),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(26.7258,58,125.637),rotation:Quaternion.Euler(180,157.9302,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(23.4906,58,124.325),rotation:Quaternion.Euler(180,157.9302,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(20.3511,58,123.052),rotation:Quaternion.Euler(180,157.9302,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(18.0596,58,124.222),rotation:Quaternion.Euler(180,247.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(16.9859,58,126.869),rotation:Quaternion.Euler(180,247.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(15.6324,58,130.206),rotation:Quaternion.Euler(180,247.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(14.3076,58,133.475),rotation:Quaternion.Euler(180,247.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(13.118,58,136.41),rotation:Quaternion.Euler(180,247.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(14.5046,58,139.445),rotation:Quaternion.Euler(180,157.9302,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(18.463,58,141.052),rotation:Quaternion.Euler(180,157.9302,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(22.5442,58,142.708),rotation:Quaternion.Euler(180,157.9302,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(26.68,58,144.376),rotation:Quaternion.Euler(180,157.9302,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(31.2975,58,146.25),rotation:Quaternion.Euler(180,157.9302,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(35.2089,58,147.837),rotation:Quaternion.Euler(180,157.9302,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(38.4026,58,149.133),rotation:Quaternion.Euler(180,157.9302,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(41.5377,58,147.934),rotation:Quaternion.Euler(180,247.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(43.098,58,144.047),rotation:Quaternion.Euler(180,247.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(44.723,58,140.011),rotation:Quaternion.Euler(180,247.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(46.2788,58,136.135),rotation:Quaternion.Euler(180,247.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(44.3756,58,132.793),rotation:Quaternion.Euler(180,180-202.07,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(40.3802,58,131.173),rotation:Quaternion.Euler(180,180-202.07,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(9,1,8),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(3,1,5),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(26.4854,62,125.536),rotation:Quaternion.Euler(180,180-202.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(23.4589,62,124.312),rotation:Quaternion.Euler(180,180-202.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(20.4878,62,123.109),rotation:Quaternion.Euler(180,180-202.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(18.107,62,124.25),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(17.1606,62,126.581),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(15.6485,62,130.304),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(14.0476,62,134.247),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(12.9997,62,136.828),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(14.9204,62,139.545),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(18.5773,62,141.03),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(22.9235,62,142.794),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(27.4686,62,144.64),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(31.1429,62,146.132),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(35.0209,62,147.707),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(38.5842,62,149.154),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(41.5719,62,147.891),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(43.3153,62,143.588),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(44.9227,62,139.629),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(46.1803,62,136.522),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(44.2834,62,132.756),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(40.6156,62,131.267),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(6,1,7),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(23.5989,66,124.369),rotation:Quaternion.Euler(180,180-202.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(17.5875,66,125.381),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(15.4886,66,130.57),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(13.3873,66,135.745),rotation:Quaternion.Euler(180,67.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(15.7525,66,139.954),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(20.1191,66,141.727),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(24.4542,66,143.477),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(28.9695,66,145.311),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(33.0052,66,146.95),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(36.9976,66,148.571),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.0852,66,146.616),rotation:Quaternion.Euler(180,180-292.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(44.1119,66,141.625),rotation:Quaternion.Euler(180,180-292.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(45.9946,66,136.979),rotation:Quaternion.Euler(180,180-292.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.5062,66,132.035),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)})];A.exhibition_transform_A1=E;var R=[new Transform({position:new Vector3(246.49,44,183.92),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(250.161,44,185.639),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(254.599,44,185.197),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(256.801,44,184.227),rotation:Quaternion.Euler(180,245.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(257.908,44,181.854),rotation:Quaternion.Euler(180,245.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(260.606,44,179.463),rotation:Quaternion.Euler(180,245.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(259.271,44,177.058),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(256.144,44,175.607),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(253.596,44,174.424),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(250.915,44,173.179),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(247.112,44,174.072),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(243.886,44,169.852),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(240.957,44,170.327),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(239.749,44,172.929),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(238.382,44,175.666),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(236.026,44,177.5),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(238.879,44,182.012),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(243.112,44,182.344),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(246.637,46.8,183.947),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(250.056,46.8,185.587),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(254.641,46.8,185.217),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(256.744,46.8,184.356),rotation:Quaternion.Euler(180,245.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(257.804,46.8,182.098),rotation:Quaternion.Euler(180,245.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(260.589,46.8,179.5),rotation:Quaternion.Euler(180,245.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(259.275,46.8,176.994),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(256.547,46.8,175.736),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(253.847,46.8,174.471),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(251.375,46.8,173.323),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(247.101,46.8,174.032),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(243.934,46.8,169.873),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(240.653,46.8,170.994),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(239.457,46.8,173.552),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(238.386,46.8,175.66),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(236.042,46.8,177.479),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(238.856,46.8,182),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(243.426,46.8,182.491),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(3,3,3),rotation:Quaternion.Euler(180,157.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(250.087,49.7,185.602),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(254.597,49.7,185.189),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(256.775,49.7,184.288),rotation:Quaternion.Euler(180,245.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(257.931,49.7,181.821),rotation:Quaternion.Euler(180,245.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(260.58,49.7,179.521),rotation:Quaternion.Euler(180,245.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(259.36,49.7,177.04),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(256.793,49.7,175.849),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(254.353,49.7,174.706),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(252.065,49.7,173.644),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(247.215,49.7,174.085),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(243.873,49.7,169.845),rotation:Quaternion.Euler(180,180-204.9,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(240.86,49.7,170.536),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(239.65,49.7,173.133),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(238.379,49.7,175.664),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(236.059,49.7,177.432),rotation:Quaternion.Euler(180,65.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(238.945,49.7,182.039),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(243.29,49.7,182.428),rotation:Quaternion.Euler(180,155.1,0),scale:new Vector3(2,2,2)})];A.exhibition_transform_A2=R;var O=[new Transform({position:new Vector3(321.826,16.5,197.599),rotation:Quaternion.Euler(180,153.2,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(325.028,16.5,199.214),rotation:Quaternion.Euler(180,153.2,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(327.14,16.5,196.416),rotation:Quaternion.Euler(180,180-296.8,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(318.325,16.5,185.323),rotation:Quaternion.Euler(180,116,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(316.552,16.5,181.611),rotation:Quaternion.Euler(180,115.5,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(312.127,16.5,172.289),rotation:Quaternion.Euler(180,115.4183,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(308.208,16.5,173.046),rotation:Quaternion.Euler(180,22.5,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(304.113,16.5,174.707),rotation:Quaternion.Euler(180,22,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(297.918,16.5,177.225),rotation:Quaternion.Euler(180,22,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(304.477,16.5,183.482),rotation:Quaternion.Euler(180,200,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(307.614,16.5,187.215),rotation:Quaternion.Euler(180,107,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(308.75,16.5,190.923),rotation:Quaternion.Euler(180,107,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(309.433,16.5,193.067),rotation:Quaternion.Euler(180,105,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(310.569,16.5,196.679),rotation:Quaternion.Euler(180,105,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(314.893,16.5,196.69),rotation:Quaternion.Euler(180,197.3203,0),scale:new Vector3(2,2,2)})];A.exhibition_transform_A3=O;var V=[new Transform({position:new Vector3(358.088,17,225.262),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(356.798,17,228.447),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(358.043,17,231.654),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(359.392,17,233.428),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(369.844,17,210.685),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(364.399,17,213.606),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(364.399,17,215.776),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(364.395,17,218.677),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(364.391,17,221.653),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(364.39,17,224.173),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)})];A.exhibition_transform_A4=V;var z=[new Transform({position:new Vector3(281.93,45.5,262.789),rotation:Quaternion.Euler(180,270,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.93,45.5,258.816),rotation:Quaternion.Euler(180,270,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.93,45.5,251.067),rotation:Quaternion.Euler(180,270,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.93,45.5,246.68),rotation:Quaternion.Euler(180,270,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(284.859,45.5,241.507),rotation:Quaternion.Euler(180,270,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(282.392,45.5,238.68),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(278.415,45.5,238.68),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(274.777,45.5,238.68),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(271.461,45.5,238.68),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.399,45.5,249.315),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.399,45.5,255.095),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.399,45.5,260.65),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.298,45.5,270.831),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(272.215,45.5,270.831),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(276.605,45.5,270.831),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.282,45.5,270.831),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.941,50,263.053),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.941,50,258.246),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.941,50,252.898),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.951,50,247.819),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(284.849,50,241.266),rotation:Quaternion.Euler(180,270,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(280.222,50,238.67),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(276.264,50,238.67),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(272.428,50,238.67),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(268.434,50,238.67),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(264.453,50,241.41),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.389,50,248.395),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.389,50,252.971),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.389,50,257.145),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.389,50,261.639),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(264.453,50,268.058),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(268.094,50,270.841),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(272.96,50,270.831),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(277.498,50,270.831),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.526,50,270.831),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(284.849,50,268.008),rotation:Quaternion.Euler(180,270,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.951,54.5,261.964),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.941,54.5,256.808),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.941,54.5,251.813),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.941,54.5,246.883),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.409,54.5,238.67),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(276.539,54.5,238.67),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(271.842,54.5,238.67),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(266.869,54.5,238.672),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.389,54.5,247.759),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.389,54.5,252.406),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.389,54.5,256.824),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(267.389,54.5,261.377),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(268.62,54.5,270.827),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(273.063,54.5,270.827),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(277.35,54.5,270.837),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(281.318,54.5,270.816),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)})];A.exhibition_transform_A6=z;var U=[new Transform({position:new Vector3(144.807,59,259.639),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.807,59,256.603),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.807,59,253.688),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.641,59,248.778),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.641,59,246),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.641,59,243.367),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(143.103,59,241.167),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(140.687,59,241.157),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(137.917,59,241.157),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(135.301,59,241.157),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,243.343),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,246.365),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,249.034),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,252.903),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,255.469),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,258.222),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,260.804),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,277.023),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,280.431),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,283.655),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,288.316),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,291.39),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(133.587,59,294.148),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(135.759,59,295.907),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(139.323,59,295.907),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(142.783,59,295.907),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.817,59,294.082),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.817,59,290.786),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.817,59,287.587),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.807,59,283.814),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.807,59,281.193),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.807,59,278.362),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(144.807,59,276.048),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(117.669,60,261.47),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(117.669,60,256.162),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(117.669,60,253.37),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(116.088,60,251.839),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(112.512,60,251.838),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(108.705,60,251.841),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.15,60,253.026),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.17,60,254.77),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.16,60,256.488),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.188,60,259.655),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.178,60,261.708),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.178,60,263.817),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.178,60,275.513),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.178,60,278.731),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.156,60,282.268),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.176,60,284.026),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.176,60,285.73),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(108.698,60,286.861),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(112.522,60,286.806),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(116.093,60,286.871),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(117.692,60,285.286),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(117.682,60,282.533),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(117.556,60,279.366),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(117.556,60,277.207),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(117.556,60,275.006),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(88.5773,62,263.096),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(87.1416,62,256.082),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(80.9521,62,256.082),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(74.8245,62,256.082),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(73.3522,62,262.705),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(73.3522,62,275.04),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(74.784,62,281.909),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(80.9753,62,281.909),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(87.1677,62,281.909),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(88.5873,62,274.941),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(87.9022,62,285.523),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(83.7172,62,285.523),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(81.8414,62,288.317),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(81.8814,62,291.388),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(81.8414,62,294.248),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(83.8055,62,297.202),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(87.8648,62,297.191),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(96.071,62,297.201),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(100.186,62,297.202),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(102.287,62,294.349),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(102.187,62,291.375),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(102.277,62,288.4),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(100.416,62,285.466),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(96.2087,62,285.45),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(96.1074,62,252.618),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(100.25,62,252.618),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(102.287,62,251.659),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(102.177,62,249.665),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(102.177,62,246.55),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(102.297,62,243.713),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(102.287,62,241.711),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(100.22,62,240.859),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(96.0901,62,240.859),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(87.8106,62,240.869),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(83.6203,62,240.869),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(81.8631,62,242.838),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(81.8631,62,244.85),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(81.8631,62,246.725),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(81.8631,62,248.726),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(81.8631,62,250.782),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(83.733,62,252.618),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(87.8775,62,252.618),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(99.1177,58.3,231.178),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(101.919,58.3,231.178),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(104.888,58.3,231.189),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(107.103,58.3,231.189),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(108.337,58.3,229.986),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(108.337,58.3,227.366),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(108.347,58.3,224.674),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(106.937,58.3,223.53),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(104.853,58.3,223.53),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(83.4053,58.3,223.53),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(81.1117,58.3,223.53),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(79.7903,58.3,224.71),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(79.7903,58.3,227.39),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(79.8003,58.3,229.998),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(82.2208,58.3,231.198),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(87.6726,58.3,231.198),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(2,2,2),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(2,2,2),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(2,2,2),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(2,2,2),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(2,2,2),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(2,2,2),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(2,2,2),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(2,2,2),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(2,2,2),rotation:Quaternion.Euler(180,270,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(2,2,2),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(2,2,2),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(59.2033,65,260.939),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(59.2033,65,257.724),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(59.2133,65,254.5),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(59.1314,65,249.622),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(59.1314,65,246.289),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(55.5273,65,243.305),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(49.8737,65,243.305),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(44.8841,65,243.305),rotation:Quaternion.Euler(180,0,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,246.056),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,250.328),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,256.152),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,260.102),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,265.784),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,269.083),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,272.449),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,276.816),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,42.195),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,283.046),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,288.173),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(42.195,65,291.444),rotation:Quaternion.Euler(180,90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(45.7834,65,294.318),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(50.6954,65,294.318),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(56.2259,65,294.318),rotation:Quaternion.Euler(180,180,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(59.2133,65,292.201),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(59.2133,65,289.689),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(59.2133,65,287.343),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(59.2133,65,281.858),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(59.2133,65,277.403),rotation:Quaternion.Euler(180,-90,0),scale:new Vector3(2,2,2)})];A.exhibition_transform_A9=U;var Q=[new Transform({position:new Vector3(31.5588,36.5,41.7227),rotation:Quaternion.Euler(180,-34,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(34.9489,36.5,43.9855),rotation:Quaternion.Euler(180,-34,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(30.7041,36.5,38.5027),rotation:Quaternion.Euler(180,-34,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(24.4208,36.5,47.3809),rotation:Quaternion.Euler(180,146.3,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(33.8456,36.5,53.6852),rotation:Quaternion.Euler(180,146.3,0),scale:new Vector3(2,2,2)}),new Transform({position:new Vector3(39.9067,36.5,44.645),rotation:Quaternion.Euler(180,-34,0),scale:new Vector3(2,2,2)})];A.exhibition_transform_A10=Q})),define("beiwenquan/beiwenquan",["require","exports","@dcl/ecs-scene-utils","@decentraland/RestrictedActions","@dcl/ui-scene-utils","beiwenquan/exhibition","beiwenquan/exhibiton_image","beiwenquan/exhibition_texture","beiwenquan/exhibition_transform"],(function(x,A,E,R,O,V,z,U,Q){Object.defineProperty(A,"__esModule",{value:!0}),A.beiwenquan=void 0,A.beiwenquan=function(){var x=new Entity;engine.addEntity(x),x.addComponent(new GLTFShape("models/beiwenquan/A1.glb")),x.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var A=new Entity;engine.addEntity(A),A.addComponent(new GLTFShape("models/beiwenquan/A2.glb")),A.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var W=new Entity;engine.addEntity(W),W.addComponent(new GLTFShape("models/beiwenquan/A3.glb")),W.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var H=new Entity;engine.addEntity(H),H.addComponent(new GLTFShape("models/beiwenquan/A4.glb")),H.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var $=new Entity;engine.addEntity($),$.addComponent(new GLTFShape("models/beiwenquan/A5.glb")),$.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var G=new Entity;engine.addEntity(G),G.addComponent(new GLTFShape("models/beiwenquan/A6.glb")),G.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var X=new Entity;engine.addEntity(X),X.addComponent(new GLTFShape("models/beiwenquan/A7.glb")),X.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var K=new Entity;engine.addEntity(K),K.addComponent(new GLTFShape("models/beiwenquan/A8.glb")),K.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var J=new Entity;engine.addEntity(J),J.addComponent(new GLTFShape("models/beiwenquan/A9.glb")),J.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var Z=new Entity;engine.addEntity(Z),Z.addComponent(new GLTFShape("models/beiwenquan/A10.glb")),Z.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var et=new Entity;engine.addEntity(et),et.addComponent(new GLTFShape("models/beiwenquan/Enviroment.glb")),et.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var nt=new Entity;engine.addEntity(nt),nt.addComponent(new GLTFShape("models/beiwenquan/Stage.glb")),nt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var ot=new Entity;engine.addEntity(ot),ot.addComponent(new GLTFShape("models/beiwenquan/BoatStageConveyor.glb")),ot.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var it=new E.TriggerSphereShape(8,new Vector3(255.192,.95,88.7549));ot.addComponent(new E.TriggerComponent(it,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(307.545,60,48.0286))}}));var rt=new Entity;engine.addEntity(rt),rt.addComponent(new GLTFShape("models/beiwenquan/up.glb")),rt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(29.7772,55.8951,136.61)}));var st=new E.TriggerSphereShape(1.8);rt.addComponent(new E.TriggerComponent(st,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(21.0359,60.8836,133.072)),O.displayAnnouncement("2F",5,Color4.Red(),50,!0)}}));var at=new Entity;engine.addEntity(at),at.addComponent(new GLTFShape("models/beiwenquan/up.glb")),at.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(33.4393,60.0117,137.901)}));var ut=new E.TriggerSphereShape(1.8);at.addComponent(new E.TriggerComponent(ut,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(23.6394,64.7636,134.092)),O.displayAnnouncement("3F",5,Color4.Red(),50,!0)}}));var pt=new Entity;engine.addEntity(pt),pt.addComponent(new GLTFShape("models/beiwenquan/down.glb")),pt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(26.5654,60.3164,134.406)}));var lt=new E.TriggerSphereShape(1.8);pt.addComponent(new E.TriggerComponent(lt,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(26.0235,56.6536,135.121)),O.displayAnnouncement("1F",5,Color4.Red(),50,!0)}}));var ht=new Entity;engine.addEntity(ht),ht.addComponent(new GLTFShape("models/beiwenquan/down.glb")),ht.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(29.896,64.1093,136.609)}));var dt=new E.TriggerSphereShape(1.8);ht.addComponent(new E.TriggerComponent(dt,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(22.4265,60.3164,134.406)),O.displayAnnouncement("2F",5,Color4.Red(),50,!0)}}));var ft=new Entity;engine.addEntity(ft),ft.addComponent(new GLTFShape("models/beiwenquan/up.glb")),ft.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(248.315,42.8379,179.628)}));var gt=new E.TriggerSphereShape(1.8);ft.addComponent(new E.TriggerComponent(gt,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(244.489,45.5376,177.123)),O.displayAnnouncement("2F",5,Color4.Red(),50,!0)}}));var mt=new Entity;engine.addEntity(mt),mt.addComponent(new GLTFShape("models/beiwenquan/up.glb")),mt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(251.033,45.5625,181.172)}));var yt=new E.TriggerSphereShape(1.8);mt.addComponent(new E.TriggerComponent(yt,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(244.489,48.2724,177.123)),O.displayAnnouncement("3F",5,Color4.Red(),50,!0)}}));var wt=new Entity;engine.addEntity(wt),wt.addComponent(new GLTFShape("models/beiwenquan/down.glb")),wt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(247.792,45.5154,179.671)}));var vt=new E.TriggerSphereShape(1.8);wt.addComponent(new E.TriggerComponent(vt,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(244.489,42.7968,177.123)),O.displayAnnouncement("1F",5,Color4.Red(),50,!0)}}));var bt=new Entity;engine.addEntity(bt),bt.addComponent(new GLTFShape("models/beiwenquan/down.glb")),bt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(247.792,48.2501,179.671)}));var xt=new E.TriggerSphereShape(1.8);bt.addComponent(new E.TriggerComponent(xt,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(244.489,45.565,177.123)),O.displayAnnouncement("2F",5,Color4.Red(),50,!0)}}));var Tt=new Entity;engine.addEntity(Tt),Tt.addComponent(new GLTFShape("models/beiwenquan/up.glb")),Tt.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(273.906,43.3342,258.708)}));var At=new E.TriggerSphereShape(1.8);Tt.addComponent(new E.TriggerComponent(At,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(273.861,47.9227,265.337)),O.displayAnnouncement("2F",5,Color4.Red(),50,!0)}}));var Et=new Entity;engine.addEntity(Et),Et.addComponent(new GLTFShape("models/beiwenquan/up.glb")),Et.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(273.906,48.0008,258.708)}));var Ct=new E.TriggerSphereShape(1.8);Et.addComponent(new E.TriggerComponent(Ct,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(273.861,52.7465,265.337)),O.displayAnnouncement("3F",5,Color4.Red(),50,!0)}}));var St=new Entity;engine.addEntity(St),St.addComponent(new GLTFShape("models/beiwenquan/down.glb")),St.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(273.861,47.9537,251.742)}));var _t=new E.TriggerSphereShape(1.8);St.addComponent(new E.TriggerComponent(_t,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(273.861,43.2085,265.337)),O.displayAnnouncement("1F",5,Color4.Red(),50,!0)}}));var It=new Entity;engine.addEntity(It),It.addComponent(new GLTFShape("models/beiwenquan/down.glb")),It.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(273.861,52.81,251.742)}));var Rt=new E.TriggerSphereShape(1.8);It.addComponent(new E.TriggerComponent(Rt,{onCameraEnter:function(){(0,R.movePlayerTo)(new Vector3(273.861,47.9227,265.337)),O.displayAnnouncement("2F",5,Color4.Red(),50,!0)}}));for(var Ot=0;Ot<U.exhibition_texture_A1.length;Ot++){var Vt=new V.Exhibition(U.exhibition_texture_A1[Ot],Q.exhibition_transform_A1[Ot],z.exhibition_image_A1[Ot]);engine.addEntity(Vt)}for(Ot=0;Ot<U.exhibition_texture_A2.length;Ot++){var Pt=new V.Exhibition(U.exhibition_texture_A2[Ot],Q.exhibition_transform_A2[Ot],z.exhibition_image_A2[Ot]);engine.addEntity(Pt)}for(Ot=0;Ot<U.exhibition_texture_A3.length;Ot++){var kt=new V.Exhibition(U.exhibition_texture_A3[Ot],Q.exhibition_transform_A3[Ot],z.exhibition_image_A3[Ot]);engine.addEntity(kt)}for(Ot=0;Ot<U.exhibition_texture_A4.length;Ot++){var Dt=new V.Exhibition(U.exhibition_texture_A4[Ot],Q.exhibition_transform_A4[Ot],z.exhibition_image_A4[Ot]);engine.addEntity(Dt)}for(Ot=0;Ot<U.exhibition_texture_A6.length;Ot++){var Lt=new V.Exhibition(U.exhibition_texture_A6[Ot],Q.exhibition_transform_A6[Ot],z.exhibition_image_A6[Ot]);engine.addEntity(Lt)}for(Ot=0;Ot<U.exhibition_texture_A9.length;Ot++){var Bt=new V.Exhibition(U.exhibition_texture_A9[Ot],Q.exhibition_transform_A9[Ot],z.exhibition_image_A9[Ot]);engine.addEntity(Bt)}for(Ot=0;Ot<U.exhibition_texture_A10.length;Ot++){var Ft=new V.Exhibition(U.exhibition_texture_A10[Ot],Q.exhibition_transform_A10[Ot],z.exhibition_image_A10[Ot]);engine.addEntity(Ft)}var Nt=new VideoClip("https://tvhttps.jieguanart.com:8443/live/hello/index.m3u8"),Mt=new VideoTexture(Nt),jt=new BasicMaterial;jt.texture=Mt,Mt.playing=!0,Mt.loop=!0;var Ut=new Entity;Ut.addComponent(new PlaneShape),Ut.addComponent(new Transform({position:new Vector3(329.753,22.1211,86.8465),scale:new Vector3(19.8,11.1375,1),rotation:Quaternion.Euler(0,-140.9,0)})),Ut.addComponent(jt),engine.addEntity(Ut);var Qt=new Entity;Qt.addComponent(new PlaneShape),Qt.addComponent(new Transform({position:new Vector3(316.8,14.531,93.962),scale:new Vector3(14.6,8.22,1),rotation:Quaternion.Euler(0,-180,0)})),Qt.addComponent(jt),engine.addEntity(Qt);var qt=new Entity;qt.addComponent(new PlaneShape),qt.addComponent(new Transform({position:new Vector3(334.4,14.531,72.525),scale:new Vector3(14.6,8.22,1),rotation:Quaternion.Euler(0,-71,0)})),qt.addComponent(jt),engine.addEntity(qt)}})),define("game",["require","exports","@dcl/ecs-scene-utils","beiwenquan/beiwenquan","serverConnections/gameplay"],(function(x,A,E,R){Object.defineProperty(A,"__esModule",{value:!0});var O=new Entity;engine.addEntity(O),O.addComponent(new GLTFShape("models/beiwenquan/Ground.glb")),O.addComponent(new Transform({rotation:Quaternion.Euler(0,180,0),position:new Vector3(0,0,0)}));var V=new Entity;engine.addEntity(V),V.addComponent(new E.Interval(1e4,(function(){!function(){__awaiter(this,void 0,void 0,(function(){var x,A,O,z;return __generator(this,(function(U){switch(U.label){case 0:x="https://worldtimeapi.org/api/timezone/etc/gmt",U.label=1;case 1:return U.trys.push([1,4,,5]),[4,fetch(x)];case 2:return[4,U.sent().json()];case 3:return A=U.sent(),O=new Date(A.datetime),z=O.getHours(),log(z),(0,R.beiwenquan)(),V.removeComponent(E.Interval),engine.removeEntity(V),[3,5];case 4:return U.sent(),[3,5];case 5:return[2]}}))}))}()})))})),define("serverConnections/sceneObject",["require","exports"],(function(x,A){Object.defineProperty(A,"__esModule",{value:!0}),A.middleCube=A.testSource=void 0;var E=new AudioClip("../sounds/test.wav");A.testSource=new AudioSource(E);var R,O=function(){function RotatorSystem(){this.group=engine.getComponentGroup(Transform)}return RotatorSystem.prototype.update=function(x){var E,R;try{for(var O=__values(this.group.entities),V=O.next();!V.done;V=O.next()){V.value.getComponent(Transform);var z=A.middleCube.getComponent(Transform).position.x-Camera.instance.feetPosition.x,U=A.middleCube.getComponent(Transform).position.z-Camera.instance.feetPosition.z;Math.sqrt(z*z+U*U)}}catch(x){E={error:x}}finally{try{V&&!V.done&&(R=O.return)&&R.call(O)}finally{if(E)throw E.error}}},RotatorSystem}();engine.addSystem(new O),A.middleCube=(8,-.5,8,(R=new Entity).addComponent(new Transform({position:new Vector3(8,-.5,8)})),R.addComponent(new BoxShape),R.addComponent(new Material),engine.addEntity(R),R)})),define("serverConnections/spawnParticles",["require","exports","resourse","utils"],(function(x,A,E,R){Object.defineProperty(A,"__esModule",{value:!0}),A.SpawnSystem=A.IsDrop=void 0;var O=function(){function IsDrop(){}return __decorate([Component("isDrop")],IsDrop)}();A.IsDrop=O;var V=engine.getComponentGroup(O),z=function(){function SpawnSystem(x,A){this.dropCount=10,this.position=x,this.clip=A}return SpawnSystem.prototype.update=function(x){var A,E;this.dropCount>0&&(this.dropCount-=1,function(x,A,E){var V=new Entity;if(9===A){var z=new AudioSource(E);V.addComponent(z),z.playing=!0,z.playOnce()}var H=null,$=Object.keys(W),G=$[(0,R.randomInt)(0,$.length-1)];(0,R.isValidKey)(G,W)&&(H=W[G]);var X=new BasicMaterial;X.texture=H,Math.random(),V.addComponent(new O),V.addComponent(new Transform({position:new Vector3(x.x,x.y+1,x.z),scale:new Vector3(.15,.15,.15)})),V.addComponent(U),V.addComponent(Q),V.addComponent(X),engine.addEntity(V)}(this.position,this.dropCount,this.clip));for(var z=0,H=V.entities.length;z<H;z++){var $=(J=V.entities[z]).getComponent(Transform).position,G=z%2==0?-1:1;$.x=$.x+Math.random()*x*.3*(1+Math.random())*G,$.y=$.y+Math.random()*x*.3,$.z=$.z+Math.random()*x*.3*(1+Math.random())*G,$.y>8&&engine.removeEntity(J)}try{for(var X=__values(V.entities),K=X.next();!K.done;K=X.next())var J=K.value}catch(x){A={error:x}}finally{try{K&&!K.done&&(E=X.return)&&E.call(X)}finally{if(A)throw A.error}}},SpawnSystem}();A.SpawnSystem=z;var U=new PlaneShape,Q=new Billboard(!1,!0,!1),W=(E.default.randomSound,E.default.particles)}));